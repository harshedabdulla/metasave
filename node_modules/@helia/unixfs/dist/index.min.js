(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.HeliaUnixfs = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var HeliaUnixfs=(()=>{var Yf=Object.create;var zr=Object.defineProperty;var Kf=Object.getOwnPropertyDescriptor;var Xf=Object.getOwnPropertyNames;var Jf=Object.getPrototypeOf,Zf=Object.prototype.hasOwnProperty;var ne=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),L=(r,e)=>{for(var t in e)zr(r,t,{get:e[t],enumerable:!0})},To=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Xf(e))!Zf.call(r,i)&&i!==t&&zr(r,i,{get:()=>e[i],enumerable:!(n=Kf(e,i))||n.enumerable});return r};var z=(r,e,t)=>(t=r!=null?Yf(Jf(r)):{},To(e||!r||!r.__esModule?zr(t,"default",{value:r,enumerable:!0}):t,r)),Qf=r=>To(zr({},"__esModule",{value:!0}),r);var q=ne((F0,Do)=>{"use strict";function No(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function eu(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return No(r,t)}catch{t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),No(new i,t)}}Do.exports=eu});var Is=ne((hr,Gr)=>{(function(r,e){"use strict";var t={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function n(f){if(!Array.isArray(f)&&!ArrayBuffer.isView(f))return!1;for(var d=0;d<f.length;d++)if(!Number.isInteger(f[d])||f[d]<0||f[d]>255)return!1;return!0}function i(f,d){return(f&65535)*d+(((f>>>16)*d&65535)<<16)}function o(f,d){return f<<d|f>>>32-d}function s(f){return f^=f>>>16,f=i(f,2246822507),f^=f>>>13,f=i(f,3266489909),f^=f>>>16,f}function a(f,d){f=[f[0]>>>16,f[0]&65535,f[1]>>>16,f[1]&65535],d=[d[0]>>>16,d[0]&65535,d[1]>>>16,d[1]&65535];var m=[0,0,0,0];return m[3]+=f[3]+d[3],m[2]+=m[3]>>>16,m[3]&=65535,m[2]+=f[2]+d[2],m[1]+=m[2]>>>16,m[2]&=65535,m[1]+=f[1]+d[1],m[0]+=m[1]>>>16,m[1]&=65535,m[0]+=f[0]+d[0],m[0]&=65535,[m[0]<<16|m[1],m[2]<<16|m[3]]}function c(f,d){f=[f[0]>>>16,f[0]&65535,f[1]>>>16,f[1]&65535],d=[d[0]>>>16,d[0]&65535,d[1]>>>16,d[1]&65535];var m=[0,0,0,0];return m[3]+=f[3]*d[3],m[2]+=m[3]>>>16,m[3]&=65535,m[2]+=f[2]*d[3],m[1]+=m[2]>>>16,m[2]&=65535,m[2]+=f[3]*d[2],m[1]+=m[2]>>>16,m[2]&=65535,m[1]+=f[1]*d[3],m[0]+=m[1]>>>16,m[1]&=65535,m[1]+=f[2]*d[2],m[0]+=m[1]>>>16,m[1]&=65535,m[1]+=f[3]*d[1],m[0]+=m[1]>>>16,m[1]&=65535,m[0]+=f[0]*d[3]+f[1]*d[2]+f[2]*d[1]+f[3]*d[0],m[0]&=65535,[m[0]<<16|m[1],m[2]<<16|m[3]]}function h(f,d){return d%=64,d===32?[f[1],f[0]]:d<32?[f[0]<<d|f[1]>>>32-d,f[1]<<d|f[0]>>>32-d]:(d-=32,[f[1]<<d|f[0]>>>32-d,f[0]<<d|f[1]>>>32-d])}function u(f,d){return d%=64,d===0?f:d<32?[f[0]<<d|f[1]>>>32-d,f[1]<<d]:[f[1]<<d-32,0]}function l(f,d){return[f[0]^d[0],f[1]^d[1]]}function p(f){return f=l(f,[0,f[0]>>>1]),f=c(f,[4283543511,3981806797]),f=l(f,[0,f[0]>>>1]),f=c(f,[3301882366,444984403]),f=l(f,[0,f[0]>>>1]),f}t.x86.hash32=function(f,d){if(t.inputValidation&&!n(f))return e;d=d||0;for(var m=f.length%4,_=f.length-m,g=d,w=0,x=3432918353,A=461845907,B=0;B<_;B=B+4)w=f[B]|f[B+1]<<8|f[B+2]<<16|f[B+3]<<24,w=i(w,x),w=o(w,15),w=i(w,A),g^=w,g=o(g,13),g=i(g,5)+3864292196;switch(w=0,m){case 3:w^=f[B+2]<<16;case 2:w^=f[B+1]<<8;case 1:w^=f[B],w=i(w,x),w=o(w,15),w=i(w,A),g^=w}return g^=f.length,g=s(g),g>>>0},t.x86.hash128=function(f,d){if(t.inputValidation&&!n(f))return e;d=d||0;for(var m=f.length%16,_=f.length-m,g=d,w=d,x=d,A=d,B=0,E=0,b=0,k=0,T=597399067,P=2869860233,G=951274213,pe=2716044179,D=0;D<_;D=D+16)B=f[D]|f[D+1]<<8|f[D+2]<<16|f[D+3]<<24,E=f[D+4]|f[D+5]<<8|f[D+6]<<16|f[D+7]<<24,b=f[D+8]|f[D+9]<<8|f[D+10]<<16|f[D+11]<<24,k=f[D+12]|f[D+13]<<8|f[D+14]<<16|f[D+15]<<24,B=i(B,T),B=o(B,15),B=i(B,P),g^=B,g=o(g,19),g+=w,g=i(g,5)+1444728091,E=i(E,P),E=o(E,16),E=i(E,G),w^=E,w=o(w,17),w+=x,w=i(w,5)+197830471,b=i(b,G),b=o(b,17),b=i(b,pe),x^=b,x=o(x,15),x+=A,x=i(x,5)+2530024501,k=i(k,pe),k=o(k,18),k=i(k,T),A^=k,A=o(A,13),A+=g,A=i(A,5)+850148119;switch(B=0,E=0,b=0,k=0,m){case 15:k^=f[D+14]<<16;case 14:k^=f[D+13]<<8;case 13:k^=f[D+12],k=i(k,pe),k=o(k,18),k=i(k,T),A^=k;case 12:b^=f[D+11]<<24;case 11:b^=f[D+10]<<16;case 10:b^=f[D+9]<<8;case 9:b^=f[D+8],b=i(b,G),b=o(b,17),b=i(b,pe),x^=b;case 8:E^=f[D+7]<<24;case 7:E^=f[D+6]<<16;case 6:E^=f[D+5]<<8;case 5:E^=f[D+4],E=i(E,P),E=o(E,16),E=i(E,G),w^=E;case 4:B^=f[D+3]<<24;case 3:B^=f[D+2]<<16;case 2:B^=f[D+1]<<8;case 1:B^=f[D],B=i(B,T),B=o(B,15),B=i(B,P),g^=B}return g^=f.length,w^=f.length,x^=f.length,A^=f.length,g+=w,g+=x,g+=A,w+=g,x+=g,A+=g,g=s(g),w=s(w),x=s(x),A=s(A),g+=w,g+=x,g+=A,w+=g,x+=g,A+=g,("00000000"+(g>>>0).toString(16)).slice(-8)+("00000000"+(w>>>0).toString(16)).slice(-8)+("00000000"+(x>>>0).toString(16)).slice(-8)+("00000000"+(A>>>0).toString(16)).slice(-8)},t.x64.hash128=function(f,d){if(t.inputValidation&&!n(f))return e;d=d||0;for(var m=f.length%16,_=f.length-m,g=[0,d],w=[0,d],x=[0,0],A=[0,0],B=[2277735313,289559509],E=[1291169091,658871167],b=0;b<_;b=b+16)x=[f[b+4]|f[b+5]<<8|f[b+6]<<16|f[b+7]<<24,f[b]|f[b+1]<<8|f[b+2]<<16|f[b+3]<<24],A=[f[b+12]|f[b+13]<<8|f[b+14]<<16|f[b+15]<<24,f[b+8]|f[b+9]<<8|f[b+10]<<16|f[b+11]<<24],x=c(x,B),x=h(x,31),x=c(x,E),g=l(g,x),g=h(g,27),g=a(g,w),g=a(c(g,[0,5]),[0,1390208809]),A=c(A,E),A=h(A,33),A=c(A,B),w=l(w,A),w=h(w,31),w=a(w,g),w=a(c(w,[0,5]),[0,944331445]);switch(x=[0,0],A=[0,0],m){case 15:A=l(A,u([0,f[b+14]],48));case 14:A=l(A,u([0,f[b+13]],40));case 13:A=l(A,u([0,f[b+12]],32));case 12:A=l(A,u([0,f[b+11]],24));case 11:A=l(A,u([0,f[b+10]],16));case 10:A=l(A,u([0,f[b+9]],8));case 9:A=l(A,[0,f[b+8]]),A=c(A,E),A=h(A,33),A=c(A,B),w=l(w,A);case 8:x=l(x,u([0,f[b+7]],56));case 7:x=l(x,u([0,f[b+6]],48));case 6:x=l(x,u([0,f[b+5]],40));case 5:x=l(x,u([0,f[b+4]],32));case 4:x=l(x,u([0,f[b+3]],24));case 3:x=l(x,u([0,f[b+2]],16));case 2:x=l(x,u([0,f[b+1]],8));case 1:x=l(x,[0,f[b]]),x=c(x,B),x=h(x,31),x=c(x,E),g=l(g,x)}return g=l(g,[0,f.length]),w=l(w,[0,f.length]),g=a(g,w),w=a(w,g),g=p(g),w=p(w),g=a(g,w),w=a(w,g),("00000000"+(g[0]>>>0).toString(16)).slice(-8)+("00000000"+(g[1]>>>0).toString(16)).slice(-8)+("00000000"+(w[0]>>>0).toString(16)).slice(-8)+("00000000"+(w[1]>>>0).toString(16)).slice(-8)},typeof hr<"u"?(typeof Gr<"u"&&Gr.exports&&(hr=Gr.exports=t),hr.murmurHash3=t):typeof define=="function"&&define.amd?define([],function(){return t}):(t._murmurHash3=r.murmurHash3,t.noConflict=function(){return r.murmurHash3=t._murmurHash3,t._murmurHash3=e,t.noConflict=e,t},r.murmurHash3=t)})(hr)});var Ts=ne((_2,Cs)=>{Cs.exports=Is()});var qr=ne((I2,Ds)=>{"use strict";Ds.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,t){let n=this._internalPositionFor(e,!1);if(t===void 0)n!==-1&&(this._unsetInternalPos(n),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let i=!1;n===-1?(n=this._data.length,this._setBit(e),this._changedData=!0):i=!0,this._setInternalPos(n,e,t,i),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();let t=this._internalPositionFor(e,!0);if(t!==-1)return this._data[t][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){let e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let t=0;for(;t<this.length;)e(this.get(t),t,this),t++}map(e){let t=0,n=new Array(this.length);for(;t<this.length;)n[t]=e(this.get(t),t,this),t++;return n}reduce(e,t){let n=0,i=t;for(;n<this.length;){let o=this.get(n);i=e(i,o,n),n++}return i}find(e){let t=0,n,i;for(;t<this.length&&!n;)i=this.get(t),n=e(i),t++;return n?i:void 0}_internalPositionFor(e,t){let n=this._bytePosFor(e,t);if(n>=this._bitArrays.length)return-1;let i=this._bitArrays[n],o=e-n*7;if(!((i&1<<o)>0))return-1;let a=this._bitArrays.slice(0,n).reduce(jl,0),c=~(4294967295<<o+1),h=Ns(i&c);return a+h-1}_bytePosFor(e,t){let n=Math.floor(e/7),i=n+1;for(;!t&&this._bitArrays.length<i;)this._bitArrays.push(0);return n}_setBit(e){let t=this._bytePosFor(e,!1);this._bitArrays[t]|=1<<e-t*7}_unsetBit(e){let t=this._bytePosFor(e,!1);this._bitArrays[t]&=~(1<<e-t*7)}_setInternalPos(e,t,n,i){let o=this._data,s=[t,n];if(i)this._sortData(),o[e]=s;else{if(o.length)if(o[o.length-1][0]>=t)o.push(s);else if(o[0][0]<=t)o.unshift(s);else{let a=Math.round(o.length/2);this._data=o.slice(0,a).concat(s).concat(o.slice(a))}else this._data.push(s);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(Gl),this._changedData=!1}bitField(){let e=[],t=8,n=0,i=0,o,s=this._bitArrays.slice();for(;s.length||n;){n===0&&(o=s.shift(),n=7);let c=Math.min(n,t),h=~(255<<c),u=o&h;i|=u<<8-t,o=o>>>c,n-=c,t-=c,(!t||!n&&!s.length)&&(e.push(i),i=0,t=8)}for(var a=e.length-1;a>0&&e[a]===0;a--)e.pop();return e}compactArray(){return this._sortData(),this._data.map(Wl)}};function jl(r,e){return r+Ns(e)}function Ns(r){let e=r;return e=e-(e>>1&1431655765),e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}function Gl(r,e){return r[0]-e[0]}function Wl(r){return r[1]}});var ga=ne((r3,ya)=>{var Zi=class{constructor(e,t=12,n=8*1024,i=32*1024,o=64,s){this.bits=t,this.min=n,this.max=i,this.asModule=e,this.rabin=new e.Rabin(t,n,i,o,s),this.polynomial=s}fingerprint(e){let{__retain:t,__release:n,__allocArray:i,__getInt32Array:o,Int32Array_ID:s,Uint8Array_ID:a}=this.asModule,c=new Int32Array(Math.ceil(e.length/this.min)),h=t(i(s,c)),u=t(i(a,e)),l=this.rabin.fingerprint(u,h),p=o(l);n(u),n(h);let f=p.indexOf(0);return f>=0?p.subarray(0,f):p}};ya.exports=Zi});var Ea=ne(br=>{"use strict";var dd=typeof BigUint64Array<"u",gr=Symbol(),wr=1024;function wa(r,e){let t=new Uint32Array(r),n=new Uint16Array(r);var i=t[e+-4>>>2]>>>1,o=e>>>1;if(i<=wr)return String.fromCharCode.apply(String,n.subarray(o,o+i));let s=[];do{let a=n[o+wr-1],c=a>=55296&&a<56320?wr-1:wr;s.push(String.fromCharCode.apply(String,n.subarray(o,o+=c))),i-=c}while(i>wr);return s.join("")+String.fromCharCode.apply(String,n.subarray(o,o+i))}function Qi(r){let e={};function t(i,o){return i?wa(i.buffer,o):"<yet unknown>"}let n=r.env=r.env||{};return n.abort=n.abort||function(o,s,a,c){let h=e.memory||n.memory;throw Error("abort: "+t(h,o)+" at "+t(h,s)+":"+a+":"+c)},n.trace=n.trace||function(o,s){let a=e.memory||n.memory;console.log("trace: "+t(a,o)+(s?" ":"")+Array.prototype.slice.call(arguments,2,2+s).join(", "))},r.Math=r.Math||Math,r.Date=r.Date||Date,e}function eo(r,e){let t=e.exports,n=t.memory,i=t.table,o=t.__alloc,s=t.__retain,a=t.__rtti_base||-1;function c(E){let b=new Uint32Array(n.buffer),k=b[a>>>2];if((E>>>=0)>=k)throw Error("invalid id: "+E);return b[(a+4>>>2)+E*2]}function h(E){let b=new Uint32Array(n.buffer),k=b[a>>>2];if((E>>>=0)>=k)throw Error("invalid id: "+E);return b[(a+4>>>2)+E*2+1]}function u(E){return 31-Math.clz32(E>>>5&31)}function l(E){return 31-Math.clz32(E>>>14&31)}function p(E){let b=E.length,k=o(b<<1,1),T=new Uint16Array(n.buffer);for(var P=0,G=k>>>1;P<b;++P)T[G+P]=E.charCodeAt(P);return k}r.__allocString=p;function f(E){let b=n.buffer;if(new Uint32Array(b)[E+-8>>>2]!==1)throw Error("not a string: "+E);return wa(b,E)}r.__getString=f;function d(E,b,k){let T=n.buffer;if(k)switch(E){case 2:return new Float32Array(T);case 3:return new Float64Array(T)}else switch(E){case 0:return new(b?Int8Array:Uint8Array)(T);case 1:return new(b?Int16Array:Uint16Array)(T);case 2:return new(b?Int32Array:Uint32Array)(T);case 3:return new(b?BigInt64Array:BigUint64Array)(T)}throw Error("unsupported align: "+E)}function m(E,b){let k=c(E);if(!(k&3))throw Error("not an array: "+E+" @ "+k);let T=u(k),P=b.length,G=o(P<<T,0),pe=o(k&2?16:12,E),D=new Uint32Array(n.buffer);D[pe+0>>>2]=s(G),D[pe+4>>>2]=G,D[pe+8>>>2]=P<<T,k&2&&(D[pe+12>>>2]=P);let Co=d(T,k&1024,k&2048);if(k&8192)for(let Pr=0;Pr<P;++Pr)Co[(G>>>T)+Pr]=s(b[Pr]);else Co.set(b,G>>>T);return pe}r.__allocArray=m;function _(E){let b=new Uint32Array(n.buffer),k=b[E+-8>>>2],T=c(k);if(!(T&1))throw Error("not an array: "+k);let P=u(T);var G=b[E+4>>>2];let pe=T&2?b[E+12>>>2]:b[G+-4>>>2]>>>P;return d(P,T&1024,T&2048).subarray(G>>>=P,G+pe)}r.__getArrayView=_;function g(E){let b=_(E),k=b.length,T=new Array(k);for(let P=0;P<k;P++)T[P]=b[P];return T}r.__getArray=g;function w(E){let b=n.buffer,k=new Uint32Array(b)[E+-4>>>2];return b.slice(E,E+k)}r.__getArrayBuffer=w;function x(E,b,k){return new E(A(E,b,k))}function A(E,b,k){let T=n.buffer,P=new Uint32Array(T),G=P[k+4>>>2];return new E(T,G,P[G+-4>>>2]>>>b)}r.__getInt8Array=x.bind(null,Int8Array,0),r.__getInt8ArrayView=A.bind(null,Int8Array,0),r.__getUint8Array=x.bind(null,Uint8Array,0),r.__getUint8ArrayView=A.bind(null,Uint8Array,0),r.__getUint8ClampedArray=x.bind(null,Uint8ClampedArray,0),r.__getUint8ClampedArrayView=A.bind(null,Uint8ClampedArray,0),r.__getInt16Array=x.bind(null,Int16Array,1),r.__getInt16ArrayView=A.bind(null,Int16Array,1),r.__getUint16Array=x.bind(null,Uint16Array,1),r.__getUint16ArrayView=A.bind(null,Uint16Array,1),r.__getInt32Array=x.bind(null,Int32Array,2),r.__getInt32ArrayView=A.bind(null,Int32Array,2),r.__getUint32Array=x.bind(null,Uint32Array,2),r.__getUint32ArrayView=A.bind(null,Uint32Array,2),dd&&(r.__getInt64Array=x.bind(null,BigInt64Array,3),r.__getInt64ArrayView=A.bind(null,BigInt64Array,3),r.__getUint64Array=x.bind(null,BigUint64Array,3),r.__getUint64ArrayView=A.bind(null,BigUint64Array,3)),r.__getFloat32Array=x.bind(null,Float32Array,2),r.__getFloat32ArrayView=A.bind(null,Float32Array,2),r.__getFloat64Array=x.bind(null,Float64Array,3),r.__getFloat64ArrayView=A.bind(null,Float64Array,3);function B(E,b){let k=new Uint32Array(n.buffer);var T=k[E+-8>>>2];if(T<=k[a>>>2])do if(T==b)return!0;while(T=h(T));return!1}return r.__instanceof=B,r.memory=r.memory||n,r.table=r.table||i,Aa(t,r)}function ba(r){return typeof Response<"u"&&r instanceof Response}async function xa(r,e){return ba(r=await r)?_a(r,e):eo(Qi(e||(e={})),await WebAssembly.instantiate(r instanceof WebAssembly.Module?r:await WebAssembly.compile(r),e))}br.instantiate=xa;function pd(r,e){return eo(Qi(e||(e={})),new WebAssembly.Instance(r instanceof WebAssembly.Module?r:new WebAssembly.Module(r),e))}br.instantiateSync=pd;async function _a(r,e){return WebAssembly.instantiateStreaming?eo(Qi(e||(e={})),(await WebAssembly.instantiateStreaming(r,e)).instance):xa(ba(r=await r)?r.arrayBuffer():r,e)}br.instantiateStreaming=_a;function Aa(r,e){var t=e?Object.create(e):{},n=r.__argumentsLength?function(i){r.__argumentsLength.value=i}:r.__setArgumentsLength||r.__setargc||function(){};for(let i in r){if(!Object.prototype.hasOwnProperty.call(r,i))continue;let o=r[i],s=i.split("."),a=t;for(;s.length>1;){let u=s.shift();Object.prototype.hasOwnProperty.call(a,u)||(a[u]={}),a=a[u]}let c=s[0],h=c.indexOf("#");if(h>=0){let u=c.substring(0,h),l=a[u];if(typeof l>"u"||!l.prototype){let p=function(...f){return p.wrap(p.prototype.constructor(0,...f))};p.prototype={valueOf:function(){return this[gr]}},p.wrap=function(f){return Object.create(p.prototype,{[gr]:{value:f,writable:!1}})},l&&Object.getOwnPropertyNames(l).forEach(f=>Object.defineProperty(p,f,Object.getOwnPropertyDescriptor(l,f))),a[u]=p}if(c=c.substring(h+1),a=a[u].prototype,/^(get|set):/.test(c)){if(!Object.prototype.hasOwnProperty.call(a,c=c.substring(4))){let p=r[i.replace("set:","get:")],f=r[i.replace("get:","set:")];Object.defineProperty(a,c,{get:function(){return p(this[gr])},set:function(d){f(this[gr],d)},enumerable:!0})}}else c==="constructor"?(a[c]=(...p)=>(n(p.length),o(...p))).original=o:(a[c]=function(...p){return n(p.length),o(this[gr],...p)}).original=o}else/^(get|set):/.test(c)?Object.prototype.hasOwnProperty.call(a,c=c.substring(4))||Object.defineProperty(a,c,{get:r[i.replace("set:","get:")],set:r[i.replace("get:","set:")],enumerable:!0}):typeof o=="function"&&o!==n?(a[c]=(...u)=>(n(u.length),o(...u))).original=o:a[c]=o}return t}br.demangle=Aa});var Sa=ne((i3,va)=>{var{instantiate:md}=Ea();to.supported=typeof WebAssembly<"u";function to(r={}){if(!to.supported)return null;var e=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return md(new Response(new Blob([e],{type:"application/wasm"})),r)}va.exports=to});var Ia=ne((o3,Ba)=>{var ka=ga(),yd=Sa(),gd=async(r,e,t,n,i)=>{let o=await yd();return new ka(o,r,e,t,n,i)};Ba.exports={Rabin:ka,create:gd}});var sf=ne((kw,yo)=>{"use strict";var _1=Object.prototype.hasOwnProperty,te="~";function Cr(){}Object.create&&(Cr.prototype=Object.create(null),new Cr().__proto__||(te=!1));function A1(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function of(r,e,t,n,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var o=new A1(t,n||r,i),s=te?te+e:e;return r._events[s]?r._events[s].fn?r._events[s]=[r._events[s],o]:r._events[s].push(o):(r._events[s]=o,r._eventsCount++),r}function gn(r,e){--r._eventsCount===0?r._events=new Cr:delete r._events[e]}function Z(){this._events=new Cr,this._eventsCount=0}Z.prototype.eventNames=function(){var e=[],t,n;if(this._eventsCount===0)return e;for(n in t=this._events)_1.call(t,n)&&e.push(te?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};Z.prototype.listeners=function(e){var t=te?te+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s};Z.prototype.listenerCount=function(e){var t=te?te+e:e,n=this._events[t];return n?n.fn?1:n.length:0};Z.prototype.emit=function(e,t,n,i,o,s){var a=te?te+e:e;if(!this._events[a])return!1;var c=this._events[a],h=arguments.length,u,l;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,o),!0;case 6:return c.fn.call(c.context,t,n,i,o,s),!0}for(l=1,u=new Array(h-1);l<h;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var p=c.length,f;for(l=0;l<p;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),h){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,n);break;case 4:c[l].fn.call(c[l].context,t,n,i);break;default:if(!u)for(f=1,u=new Array(h-1);f<h;f++)u[f-1]=arguments[f];c[l].fn.apply(c[l].context,u)}}return!0};Z.prototype.on=function(e,t,n){return of(this,e,t,n,!1)};Z.prototype.once=function(e,t,n){return of(this,e,t,n,!0)};Z.prototype.removeListener=function(e,t,n,i){var o=te?te+e:e;if(!this._events[o])return this;if(!t)return gn(this,o),this;var s=this._events[o];if(s.fn)s.fn===t&&(!i||s.once)&&(!n||s.context===n)&&gn(this,o);else{for(var a=0,c=[],h=s.length;a<h;a++)(s[a].fn!==t||i&&!s[a].once||n&&s[a].context!==n)&&c.push(s[a]);c.length?this._events[o]=c.length===1?c[0]:c:gn(this,o)}return this};Z.prototype.removeAllListeners=function(e){var t;return e?(t=te?te+e:e,this._events[t]&&gn(this,t)):(this._events=new Cr,this._eventsCount=0),this};Z.prototype.off=Z.prototype.removeListener;Z.prototype.addListener=Z.prototype.on;Z.prefixed=te;Z.EventEmitter=Z;typeof yo<"u"&&(yo.exports=Z)});var gf=ne((g6,yf)=>{"use strict";yf.exports=r=>{if(Object.prototype.toString.call(r)!=="[object Object]")return!1;let e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}});var Ef=ne((_f,Af)=>{"use strict";var _n=gf(),{hasOwnProperty:bf}=Object.prototype,{propertyIsEnumerable:D1}=Object,Rt=(r,e,t)=>Object.defineProperty(r,e,{value:t,writable:!0,enumerable:!0,configurable:!0}),U1=_f,wf={concatArrays:!1,ignoreUndefined:!1},An=r=>{let e=[];for(let t in r)bf.call(r,t)&&e.push(t);if(Object.getOwnPropertySymbols){let t=Object.getOwnPropertySymbols(r);for(let n of t)D1.call(r,n)&&e.push(n)}return e};function Ot(r){return Array.isArray(r)?F1(r):_n(r)?L1(r):r}function F1(r){let e=r.slice(0,0);return An(r).forEach(t=>{Rt(e,t,Ot(r[t]))}),e}function L1(r){let e=Object.getPrototypeOf(r)===null?Object.create(null):{};return An(r).forEach(t=>{Rt(e,t,Ot(r[t]))}),e}var xf=(r,e,t,n)=>(t.forEach(i=>{typeof e[i]>"u"&&n.ignoreUndefined||(i in r&&r[i]!==Object.getPrototypeOf(r)?Rt(r,i,Ao(r[i],e[i],n)):Rt(r,i,Ot(e[i])))}),r),P1=(r,e,t)=>{let n=r.slice(0,0),i=0;return[r,e].forEach(o=>{let s=[];for(let a=0;a<o.length;a++)bf.call(o,a)&&(s.push(String(a)),o===r?Rt(n,i++,o[a]):Rt(n,i++,Ot(o[a])));n=xf(n,o,An(o).filter(a=>!s.includes(a)),t)}),n};function Ao(r,e,t){return t.concatArrays&&Array.isArray(r)&&Array.isArray(e)?P1(r,e,t):!_n(e)||!_n(r)?Ot(e):xf(r,e,An(e),t)}Af.exports=function(...r){let e=Ao(Ot(wf),this!==U1&&this||{},wf),t={_:{}};for(let n of r)if(n!==void 0){if(!_n(n))throw new TypeError("`"+n+"` is not an Option Object");t=Ao(t,{_:n},e)}return t._}});var kf=ne((x6,Sf)=>{var Vt=1e3,Mt=Vt*60,Ht=Mt*60,ut=Ht*24,z1=ut*7,R1=ut*365.25;Sf.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return O1(r);if(t==="number"&&isFinite(r))return e.long?V1(r):$1(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function O1(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*R1;case"weeks":case"week":case"w":return t*z1;case"days":case"day":case"d":return t*ut;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Ht;case"minutes":case"minute":case"mins":case"min":case"m":return t*Mt;case"seconds":case"second":case"secs":case"sec":case"s":return t*Vt;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function $1(r){var e=Math.abs(r);return e>=ut?Math.round(r/ut)+"d":e>=Ht?Math.round(r/Ht)+"h":e>=Mt?Math.round(r/Mt)+"m":e>=Vt?Math.round(r/Vt)+"s":r+"ms"}function V1(r){var e=Math.abs(r);return e>=ut?Sn(r,e,ut,"day"):e>=Ht?Sn(r,e,Ht,"hour"):e>=Mt?Sn(r,e,Mt,"minute"):e>=Vt?Sn(r,e,Vt,"second"):r+" ms"}function Sn(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var If=ne((_6,Bf)=>{function M1(r){t.debug=t,t.default=t,t.coerce=c,t.disable=o,t.enable=i,t.enabled=s,t.humanize=kf(),t.destroy=h,Object.keys(r).forEach(u=>{t[u]=r[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let l=0;for(let p=0;p<u.length;p++)l=(l<<5)-l+u.charCodeAt(p),l|=0;return t.colors[Math.abs(l)%t.colors.length]}t.selectColor=e;function t(u){let l,p=null,f,d;function m(..._){if(!m.enabled)return;let g=m,w=Number(new Date),x=w-(l||w);g.diff=x,g.prev=l,g.curr=w,l=w,_[0]=t.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let A=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(E,b)=>{if(E==="%%")return"%";A++;let k=t.formatters[b];if(typeof k=="function"){let T=_[A];E=k.call(g,T),_.splice(A,1),A--}return E}),t.formatArgs.call(g,_),(g.log||t.log).apply(g,_)}return m.namespace=u,m.useColors=t.useColors(),m.color=t.selectColor(u),m.extend=n,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(f!==t.namespaces&&(f=t.namespaces,d=t.enabled(u)),d),set:_=>{p=_}}),typeof t.init=="function"&&t.init(m),m}function n(u,l){let p=t(this.namespace+(typeof l>"u"?":":l)+u);return p.log=this.log,p}function i(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let l,p=(typeof u=="string"?u:"").split(/[\s,]+/),f=p.length;for(l=0;l<f;l++)p[l]&&(u=p[l].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.slice(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function o(){let u=[...t.names.map(a),...t.skips.map(a).map(l=>"-"+l)].join(",");return t.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let l,p;for(l=0,p=t.skips.length;l<p;l++)if(t.skips[l].test(u))return!1;for(l=0,p=t.names.length;l<p;l++)if(t.names[l].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Bf.exports=M1});var Cf=ne((he,kn)=>{he.formatArgs=j1;he.save=G1;he.load=W1;he.useColors=H1;he.storage=q1();he.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();he.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function H1(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function j1(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+kn.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}he.log=console.debug||console.log||(()=>{});function G1(r){try{r?he.storage.setItem("debug",r):he.storage.removeItem("debug")}catch{}}function W1(){let r;try{r=he.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function q1(){try{return localStorage}catch{}}kn.exports=If()(he);var{formatters:Y1}=kn.exports;Y1.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var D0={};L(D0,{globSource:()=>void 0,unixfs:()=>N0,urlSource:()=>Wf});var Ji=z(q(),1);function tu(r){return r[Symbol.asyncIterator]!=null}function ru(r){if(tu(r))return(async()=>{for await(let e of r)return e})();for(let e of r)return e}var zn=ru;function nu(r){return r[Symbol.asyncIterator]!=null}function iu(r,e=1){return e=Number(e),nu(r)?async function*(){let t=[];if(e<1&&(e=1),e!==Math.round(e))throw new Error("Batch size must be an integer");for await(let n of r)for(t.push(n);t.length>=e;)yield t.slice(0,e),t=t.slice(e);for(;t.length>0;)yield t.slice(0,e),t=t.slice(e)}():function*(){let t=[];if(e<1&&(e=1),e!==Math.round(e))throw new Error("Batch size must be an integer");for(let n of r)for(t.push(n);t.length>=e;)yield t.slice(0,e),t=t.slice(e);for(;t.length>0;)yield t.slice(0,e),t=t.slice(e)}()}var Yt=iu;async function*Kt(r,e=1){for await(let t of Yt(r,e)){let n=t.map(async i=>i().then(o=>({ok:!0,value:o}),o=>({ok:!1,err:o})));for(let i=0;i<n.length;i++){let o=await n[i];if(o.ok)yield o.value;else throw o.err}}}function $e(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function Le(r=0){return globalThis.Buffer?.alloc!=null?$e(globalThis.Buffer.alloc(r)):new Uint8Array(r)}function me(r=0){return globalThis.Buffer?.allocUnsafe!=null?$e(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function Xt(r,e){if(globalThis.Buffer!=null)return $e(globalThis.Buffer.concat(r,e));e==null&&(e=r.reduce((i,o)=>i+o.length,0));let t=me(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return $e(t)}function Uo(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}var Lo=Symbol.for("@achingbrain/uint8arraylist");function Fo(r,e){if(e==null||e<0)throw new RangeError("index is out of bounds");let t=0;for(let n of r){let i=t+n.byteLength;if(e<i)return{buf:n,index:e-t};t=i}throw new RangeError("index is out of bounds")}function Rr(r){return!!r?.[Lo]}var Ze=class r{bufs;length;[Lo]=!0;constructor(...e){this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let t=0;for(let n of e)if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.push(n);else if(Rr(n))t+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=t}prepend(...e){this.prependAll(e)}prependAll(e){let t=0;for(let n of e.reverse())if(n instanceof Uint8Array)t+=n.byteLength,this.bufs.unshift(n);else if(Rr(n))t+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=t}get(e){let t=Fo(this.bufs,e);return t.buf[t.index]}set(e,t){let n=Fo(this.bufs,e);n.buf[n.index]=t}write(e,t=0){if(e instanceof Uint8Array)for(let n=0;n<e.length;n++)this.set(t+n,e[n]);else if(Rr(e))for(let n=0;n<e.length;n++)this.set(t+n,e.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(e>=this.bufs[0].byteLength)e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}}}slice(e,t){let{bufs:n,length:i}=this._subList(e,t);return Xt(n,i)}subarray(e,t){let{bufs:n,length:i}=this._subList(e,t);return n.length===1?n[0]:Xt(n,i)}sublist(e,t){let{bufs:n,length:i}=this._subList(e,t),o=new r;return o.length=i,o.bufs=[...n],o}_subList(e,t){if(e=e??0,t=t??this.length,e<0&&(e=this.length+e),t<0&&(t=this.length+t),e<0||t>this.length)throw new RangeError("index is out of bounds");if(e===t)return{bufs:[],length:0};if(e===0&&t===this.length)return{bufs:this.bufs,length:this.length};let n=[],i=0;for(let o=0;o<this.bufs.length;o++){let s=this.bufs[o],a=i,c=a+s.byteLength;if(i=c,e>=c)continue;let h=e>=a&&e<c,u=t>a&&t<=c;if(h&&u){if(e===a&&t===c){n.push(s);break}let l=e-a;n.push(s.subarray(l,l+(t-e)));break}if(h){if(e===0){n.push(s);continue}n.push(s.subarray(e-a));continue}if(u){if(t===c){n.push(s);break}n.push(s.subarray(0,t-a));break}n.push(s)}return{bufs:n,length:t-e}}indexOf(e,t=0){if(!Rr(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=e instanceof Uint8Array?e:e.subarray();if(t=Number(t??0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),e.length===0)return t>this.length?this.length:t;let i=n.byteLength;if(i===0)throw new TypeError("search must be at least 1 byte long");let o=256,s=new Int32Array(o);for(let l=0;l<o;l++)s[l]=-1;for(let l=0;l<i;l++)s[n[l]]=l;let a=s,c=this.byteLength-n.byteLength,h=n.byteLength-1,u;for(let l=t;l<=c;l+=u){u=0;for(let p=h;p>=0;p--){let f=this.get(l+p);if(n[p]!==f){u=Math.max(1,p-a[f]);break}}if(u===0)return l}return-1}getInt8(e){let t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getInt8(0)}setInt8(e,t){let n=me(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,t),this.write(n,e)}getInt16(e,t){let n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,t)}setInt16(e,t,n){let i=Le(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,t,n),this.write(i,e)}getInt32(e,t){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,t)}setInt32(e,t,n){let i=Le(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,t,n),this.write(i,e)}getBigInt64(e,t){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,t)}setBigInt64(e,t,n){let i=Le(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,t,n),this.write(i,e)}getUint8(e){let t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0)}setUint8(e,t){let n=me(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,t),this.write(n,e)}getUint16(e,t){let n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,t)}setUint16(e,t,n){let i=Le(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,t,n),this.write(i,e)}getUint32(e,t){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,t)}setUint32(e,t,n){let i=Le(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,t,n),this.write(i,e)}getBigUint64(e,t){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,t)}setBigUint64(e,t,n){let i=Le(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,t,n),this.write(i,e)}getFloat32(e,t){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,t)}setFloat32(e,t,n){let i=Le(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,t,n),this.write(i,e)}getFloat64(e,t){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,t)}setFloat64(e,t,n){let i=Le(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,t,n),this.write(i,e)}equals(e){if(e==null||!(e instanceof r)||e.bufs.length!==this.bufs.length)return!1;for(let t=0;t<this.bufs.length;t++)if(!Uo(this.bufs[t],e.bufs[t]))return!1;return!0}static fromUint8Arrays(e,t){let n=new r;return n.bufs=e,t==null&&(t=e.reduce((i,o)=>i+o.byteLength,0)),n.length=t,n}};var ou=262144,Jt=(r={})=>{let e=r.chunkSize??ou;return async function*(n){let i=new Ze,o=0,s=!1;for await(let a of n)for(i.append(a),o+=a.length;o>=e;)if(yield i.slice(0,e),s=!0,e===i.length)i=new Ze,o=0;else{let c=new Ze;c.append(i.sublist(e)),i=c,o-=e}(!s||o>0)&&(yield i.subarray(0,o))}};var j={};L(j,{code:()=>Y,createLink:()=>ts,createNode:()=>es,decode:()=>M,encode:()=>U,name:()=>rl,prepare:()=>O,validate:()=>Jn});var Gn={};L(Gn,{base32:()=>Me,base32hex:()=>gu,base32hexpad:()=>bu,base32hexpadupper:()=>xu,base32hexupper:()=>wu,base32pad:()=>mu,base32padupper:()=>yu,base32upper:()=>pu,base32z:()=>_u});var ht={};L(ht,{coerce:()=>ye,empty:()=>Po,equals:()=>Rn,fromHex:()=>au,fromString:()=>On,isBinary:()=>cu,toHex:()=>su,toString:()=>$n});var Po=new Uint8Array(0);function su(r){return r.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}function au(r){let e=r.match(/../g);return e!=null?new Uint8Array(e.map(t=>parseInt(t,16))):Po}function Rn(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}function ye(r){if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")}function cu(r){return r instanceof ArrayBuffer||ArrayBuffer.isView(r)}function On(r){return new TextEncoder().encode(r)}function $n(r){return new TextDecoder().decode(r)}function fu(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=i}var a=r.length,c=r.charAt(0),h=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function l(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var m=0,_=0,g=0,w=d.length;g!==w&&d[g]===0;)g++,m++;for(var x=(w-g)*u+1>>>0,A=new Uint8Array(x);g!==w;){for(var B=d[g],E=0,b=x-1;(B!==0||E<_)&&b!==-1;b--,E++)B+=256*A[b]>>>0,A[b]=B%a>>>0,B=B/a>>>0;if(B!==0)throw new Error("Non-zero carry");_=E,g++}for(var k=x-_;k!==x&&A[k]===0;)k++;for(var T=c.repeat(m);k<x;++k)T+=r.charAt(A[k]);return T}function p(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var m=0;if(d[m]!==" "){for(var _=0,g=0;d[m]===c;)_++,m++;for(var w=(d.length-m)*h+1>>>0,x=new Uint8Array(w);d[m];){var A=t[d.charCodeAt(m)];if(A===255)return;for(var B=0,E=w-1;(A!==0||B<g)&&E!==-1;E--,B++)A+=a*x[E]>>>0,x[E]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");g=B,m++}if(d[m]!==" "){for(var b=w-g;b!==w&&x[b]===0;)b++;for(var k=new Uint8Array(_+(w-b)),T=_;b!==w;)k[T++]=x[b++];return k}}}function f(d){var m=p(d);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:p,decode:f}}var uu=fu,lu=uu,zo=lu;var Vn=class{name;prefix;baseEncode;constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Mn=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Ro(this,e)}},Hn=class{decoders;constructor(e){this.decoders=e}or(e){return Ro(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function Ro(r,e){return new Hn({...r.decoders??{[r.prefix]:r},...e.decoders??{[e.prefix]:e}})}var jn=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Vn(e,t,n),this.decoder=new Mn(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function dt({name:r,prefix:e,encode:t,decode:n}){return new jn(r,e,t,n)}function Ve({name:r,prefix:e,alphabet:t}){let{encode:n,decode:i}=zo(t,r);return dt({prefix:e,name:r,encode:n,decode:o=>ye(i(o))})}function hu(r,e,t,n){let i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let o=r.length;for(;r[o-1]==="=";)--o;let s=new Uint8Array(o*t/8|0),a=0,c=0,h=0;for(let u=0;u<o;++u){let l=i[r[u]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|l,a+=t,a>=8&&(a-=8,s[h++]=255&c>>a)}if(a>=t||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s}function du(r,e,t){let n=e[e.length-1]==="=",i=(1<<t)-1,o="",s=0,a=0;for(let c=0;c<r.length;++c)for(a=a<<8|r[c],s+=8;s>t;)s-=t,o+=e[i&a>>s];if(s!==0&&(o+=e[i&a<<t-s]),n)for(;o.length*t&7;)o+="=";return o}function R({name:r,prefix:e,bitsPerChar:t,alphabet:n}){return dt({prefix:e,name:r,encode(i){return du(i,n,t)},decode(i){return hu(i,n,t,r)}})}var Me=R({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),pu=R({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),mu=R({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),yu=R({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),gu=R({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),wu=R({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),bu=R({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),xu=R({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),_u=R({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Wn={};L(Wn,{base58btc:()=>ge,base58flickr:()=>Au});var ge=Ve({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Au=Ve({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Eu=Vo,Oo=128,vu=127,Su=~vu,ku=Math.pow(2,31);function Vo(r,e,t){e=e||[],t=t||0;for(var n=t;r>=ku;)e[t++]=r&255|Oo,r/=128;for(;r&Su;)e[t++]=r&255|Oo,r>>>=7;return e[t]=r|0,Vo.bytes=t-n+1,e}var Bu=qn,Iu=128,$o=127;function qn(r,n){var t=0,n=n||0,i=0,o=n,s,a=r.length;do{if(o>=a)throw qn.bytes=0,new RangeError("Could not decode varint");s=r[o++],t+=i<28?(s&$o)<<i:(s&$o)*Math.pow(2,i),i+=7}while(s>=Iu);return qn.bytes=o-n,t}var Cu=Math.pow(2,7),Tu=Math.pow(2,14),Nu=Math.pow(2,21),Du=Math.pow(2,28),Uu=Math.pow(2,35),Fu=Math.pow(2,42),Lu=Math.pow(2,49),Pu=Math.pow(2,56),zu=Math.pow(2,63),Ru=function(r){return r<Cu?1:r<Tu?2:r<Nu?3:r<Du?4:r<Uu?5:r<Fu?6:r<Lu?7:r<Pu?8:r<zu?9:10},Ou={encode:Eu,decode:Bu,encodingLength:Ru},$u=Ou,Zt=$u;function Qt(r,e=0){return[Zt.decode(r,e),Zt.decode.bytes]}function pt(r,e,t=0){return Zt.encode(r,e,t),e}function mt(r){return Zt.encodingLength(r)}function Qe(r,e){let t=e.byteLength,n=mt(r),i=n+mt(t),o=new Uint8Array(i+t);return pt(r,o,0),pt(t,o,n),o.set(e,i),new yt(r,t,e,o)}function $r(r){let e=ye(r),[t,n]=Qt(e),[i,o]=Qt(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new yt(t,i,s,e)}function Mo(r,e){if(r===e)return!0;{let t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&Rn(r.bytes,t.bytes)}}var yt=class{code;size;digest;bytes;constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}};function Ho(r,e){let{bytes:t,version:n}=r;switch(n){case 0:return Mu(t,Yn(r),e??ge.encoder);default:return Hu(t,Yn(r),e??Me.encoder)}}var jo=new WeakMap;function Yn(r){let e=jo.get(r);if(e==null){let t=new Map;return jo.set(r,t),t}return e}var N=class r{code;version;multihash;bytes;"/";constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==er)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==ju)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=Qe(e,t);return r.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return r.equals(this,e)}static equals(e,t){let n=t;return n!=null&&e.code===n.code&&e.version===n.version&&Mo(e.multihash,n.multihash)}toString(e){return Ho(this,e)}toJSON(){return{"/":Ho(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let t=e;if(t instanceof r)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){let{version:n,code:i,multihash:o,bytes:s}=t;return new r(n,i,o,s??Go(n,i,o.bytes))}else if(t[Gu]===!0){let{version:n,multihash:i,code:o}=t,s=$r(i);return r.create(n,o,s)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==er)throw new Error(`Version 0 CID must use dag-pb (code: ${er}) block encoding`);return new r(e,t,n,n.bytes)}case 1:{let i=Go(e,t,n.bytes);return new r(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return r.create(0,er,e)}static createV1(e,t){return r.create(1,e,t)}static decode(e){let[t,n]=r.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=r.inspectBytes(e),n=t.size-t.multihashSize,i=ye(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),s=new yt(t.multihashCode,t.digestSize,o,i);return[t.version===0?r.createV0(s):r.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[l,p]=Qt(e.subarray(t));return t+=p,l},i=n(),o=er;if(i===18?(i=0,t=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=t,a=n(),c=n(),h=t+c,u=h-s;return{version:i,codec:o,multihashCode:a,digestSize:c,multihashSize:u,size:h}}static parse(e,t){let[n,i]=Vu(e,t),o=r.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Yn(o).set(n,e),o}};function Vu(r,e){switch(r[0]){case"Q":{let t=e??ge;return[ge.prefix,t.decode(`${ge.prefix}${r}`)]}case ge.prefix:{let t=e??ge;return[ge.prefix,t.decode(r)]}case Me.prefix:{let t=e??Me;return[Me.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}}function Mu(r,e,t){let{prefix:n}=t;if(n!==ge.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i}function Hu(r,e,t){let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i}var er=112,ju=18;function Go(r,e,t){let n=mt(r),i=n+mt(e),o=new Uint8Array(i+t.byteLength);return pt(r,o,0),pt(e,o,n),o.set(t,i),o}var Gu=Symbol.for("@ipld/js-cid/CID");var Wu=new TextDecoder;function Kn(r,e){let t=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(e>=r.length)throw new Error("protobuf: unexpected end of data");let i=r[e++];if(t+=n<28?(i&127)<<n:(i&127)*2**n,i<128)break}return[t,e]}function Vr(r,e){let t;[t,e]=Kn(r,e);let n=e+t;if(t<0||n<0)throw new Error("protobuf: invalid length");if(n>r.length)throw new Error("protobuf: unexpected end of data");return[r.subarray(e,n),n]}function Wo(r,e){let t;return[t,e]=Kn(r,e),[t&7,t>>3,e]}function qu(r){let e={},t=r.length,n=0;for(;n<t;){let i,o;if([i,o,n]=Wo(r,n),o===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,n]=Vr(r,n)}else if(o===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(i!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let s;[s,n]=Vr(r,n),e.Name=Wu.decode(s)}else if(o===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(i!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[e.Tsize,n]=Kn(r,n)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`)}if(n>t)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function qo(r){let e=r.length,t=0,n,i=!1,o;for(;t<e;){let a,c;if([a,c,t]=Wo(r,t),a!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(c===1){if(o)throw new Error("protobuf: (PBNode) duplicate Data section");[o,t]=Vr(r,t),n&&(i=!0)}else if(c===2){if(i)throw new Error("protobuf: (PBNode) duplicate Links section");n||(n=[]);let h;[h,t]=Vr(r,t),n.push(qu(h))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${c}`)}if(t>e)throw new Error("protobuf: (PBNode) unexpected end of data");let s={};return o&&(s.Data=o),s.Links=n||[],s}var Ko=new TextEncoder,Yo=2**32,Yu=2**31;function Ku(r,e){let t=e.length;if(typeof r.Tsize=="number"){if(r.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(r.Tsize))throw new Error("Tsize too large for encoding");t=tr(e,t,r.Tsize)-1,e[t]=24}if(typeof r.Name=="string"){let n=Ko.encode(r.Name);t-=n.length,e.set(n,t),t=tr(e,t,n.length)-1,e[t]=18}return r.Hash&&(t-=r.Hash.length,e.set(r.Hash,t),t=tr(e,t,r.Hash.length)-1,e[t]=10),e.length-t}function Xo(r){let e=Ju(r),t=new Uint8Array(e),n=e;if(r.Data&&(n-=r.Data.length,t.set(r.Data,n),n=tr(t,n,r.Data.length)-1,t[n]=10),r.Links)for(let i=r.Links.length-1;i>=0;i--){let o=Ku(r.Links[i],t.subarray(0,n));n-=o,n=tr(t,n,o)-1,t[n]=18}return t}function Xu(r){let e=0;if(r.Hash){let t=r.Hash.length;e+=1+t+wt(t)}if(typeof r.Name=="string"){let t=Ko.encode(r.Name).length;e+=1+t+wt(t)}return typeof r.Tsize=="number"&&(e+=1+wt(r.Tsize)),e}function Ju(r){let e=0;if(r.Data){let t=r.Data.length;e+=1+t+wt(t)}if(r.Links)for(let t of r.Links){let n=Xu(t);e+=1+n+wt(n)}return e}function tr(r,e,t){e-=wt(t);let n=e;for(;t>=Yu;)r[e++]=t&127|128,t/=128;for(;t>=128;)r[e++]=t&127|128,t>>>=7;return r[e]=t,n}function wt(r){return r%2===0&&r++,Math.floor((Zu(r)+6)/7)}function Zu(r){let e=0;return r>=Yo&&(r=Math.floor(r/Yo),e=32),r>=65536&&(r>>>=16,e+=16),r>=256&&(r>>>=8,e+=8),e+Qu[r]}var Qu=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8];var el=["Data","Links"],tl=["Hash","Name","Tsize"],Xn=new TextEncoder;function Zo(r,e){if(r===e)return 0;let t=r.Name?Xn.encode(r.Name):[],n=e.Name?Xn.encode(e.Name):[],i=t.length,o=n.length;for(let s=0,a=Math.min(i,o);s<a;++s)if(t[s]!==n[s]){i=t[s],o=n[s];break}return i<o?-1:o<i?1:0}function Jo(r,e){return!Object.keys(r).some(t=>!e.includes(t))}function Qo(r){if(typeof r.asCID=="object"){let t=N.asCID(r);if(!t)throw new TypeError("Invalid DAG-PB form");return{Hash:t}}if(typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");let e={};if(r.Hash){let t=N.asCID(r.Hash);try{t||(typeof r.Hash=="string"?t=N.parse(r.Hash):r.Hash instanceof Uint8Array&&(t=N.decode(r.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}t&&(e.Hash=t)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof r.Name=="string"&&(e.Name=r.Name),typeof r.Tsize=="number"&&(e.Tsize=r.Tsize),e}function O(r){if((r instanceof Uint8Array||typeof r=="string")&&(r={Data:r}),typeof r!="object"||Array.isArray(r))throw new TypeError("Invalid DAG-PB form");let e={};if(r.Data!==void 0)if(typeof r.Data=="string")e.Data=Xn.encode(r.Data);else if(r.Data instanceof Uint8Array)e.Data=r.Data;else throw new TypeError("Invalid DAG-PB form");if(r.Links!==void 0)if(Array.isArray(r.Links))e.Links=r.Links.map(Qo),e.Links.sort(Zo);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function Jn(r){if(!r||typeof r!="object"||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form");if(!Jo(r,el))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(r.Data!==void 0&&!(r.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(r.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<r.Links.length;e++){let t=r.Links[e];if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!Jo(t,tl))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(t.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(t.Hash==null||!t.Hash["/"]||t.Hash["/"]!==t.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(t.Name!==void 0&&typeof t.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(t.Tsize!==void 0){if(typeof t.Tsize!="number"||t.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&Zo(t,r.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function es(r,e=[]){return O({Data:r,Links:e})}function ts(r,e,t){return Qo({Hash:t,Name:r,Tsize:e})}var rl="dag-pb",Y=112;function U(r){Jn(r);let e={};return r.Links&&(e.Links=r.Links.map(t=>{let n={};return t.Hash&&(n.Hash=t.Hash.bytes),t.Name!==void 0&&(n.Name=t.Name),t.Tsize!==void 0&&(n.Tsize=t.Tsize),n})),r.Data&&(e.Data=r.Data),Xo(e)}function M(r){let e=qo(r),t={};return e.Data&&(t.Data=e.Data),e.Links&&(t.Links=e.Links.map(n=>{let i={};try{i.Hash=N.decode(n.Hash)}catch{}if(!i.Hash)throw new Error("Invalid Hash field found in link, expected CID");return n.Name!==void 0&&(i.Name=n.Name),n.Tsize!==void 0&&(i.Tsize=n.Tsize),i})),t}var vi=z(q(),1);var Zn=new Float32Array([-0]),He=new Uint8Array(Zn.buffer);function rs(r,e,t){Zn[0]=r,e[t]=He[0],e[t+1]=He[1],e[t+2]=He[2],e[t+3]=He[3]}function ns(r,e){return He[0]=r[e],He[1]=r[e+1],He[2]=r[e+2],He[3]=r[e+3],Zn[0]}var Qn=new Float64Array([-0]),J=new Uint8Array(Qn.buffer);function is(r,e,t){Qn[0]=r,e[t]=J[0],e[t+1]=J[1],e[t+2]=J[2],e[t+3]=J[3],e[t+4]=J[4],e[t+5]=J[5],e[t+6]=J[6],e[t+7]=J[7]}function os(r,e){return J[0]=r[e],J[1]=r[e+1],J[2]=r[e+2],J[3]=r[e+3],J[4]=r[e+4],J[5]=r[e+5],J[6]=r[e+6],J[7]=r[e+7],Qn[0]}var nl=BigInt(Number.MAX_SAFE_INTEGER),il=BigInt(Number.MIN_SAFE_INTEGER),ie=class r{lo;hi;constructor(e,t){this.lo=e|0,this.hi=t|0}toNumber(e=!1){if(!e&&this.hi>>>31>0){let t=~this.lo+1>>>0,n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let t=~this.lo+1>>>0,n=~this.hi>>>0;return t===0&&(n=n+1>>>0),-(BigInt(t)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){let e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){let e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){let e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}static fromBigInt(e){if(e===0n)return et;if(e<nl&&e>il)return this.fromNumber(Number(e));let t=e<0n;t&&(e=-e);let n=e>>32n,i=e-(n<<32n);return t&&(n=~n|0n,i=~i|0n,++i>ss&&(i=0n,++n>ss&&(n=0n))),new r(Number(i),Number(n))}static fromNumber(e){if(e===0)return et;let t=e<0;t&&(e=-e);let n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new r(n,i)}static from(e){return typeof e=="number"?r.fromNumber(e):typeof e=="bigint"?r.fromBigInt(e):typeof e=="string"?r.fromBigInt(BigInt(e)):e.low!=null||e.high!=null?new r(e.low>>>0,e.high>>>0):et}},et=new ie(0,0);et.toBigInt=function(){return 0n};et.zzEncode=et.zzDecode=function(){return this};et.length=function(){return 1};var ss=4294967296n;function as(r){let e=0,t=0;for(let n=0;n<r.length;++n)t=r.charCodeAt(n),t<128?e+=1:t<2048?e+=2:(t&64512)===55296&&(r.charCodeAt(n+1)&64512)===56320?(++n,e+=4):e+=3;return e}function cs(r,e,t){if(t-e<1)return"";let i,o=[],s=0,a;for(;e<t;)a=r[e++],a<128?o[s++]=a:a>191&&a<224?o[s++]=(a&31)<<6|r[e++]&63:a>239&&a<365?(a=((a&7)<<18|(r[e++]&63)<<12|(r[e++]&63)<<6|r[e++]&63)-65536,o[s++]=55296+(a>>10),o[s++]=56320+(a&1023)):o[s++]=(a&15)<<12|(r[e++]&63)<<6|r[e++]&63,s>8191&&((i??(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i!=null?(s>0&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))}function ei(r,e,t){let n=t,i,o;for(let s=0;s<r.length;++s)i=r.charCodeAt(s),i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&((o=r.charCodeAt(s+1))&64512)===56320?(i=65536+((i&1023)<<10)+(o&1023),++s,e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128);return t-n}function xe(r,e){return RangeError(`index out of range: ${r.pos} + ${e??1} > ${r.len}`)}function Mr(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}var ti=class{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(e){this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=4294967295;if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,xe(this,10);return e}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw xe(this,4);return Mr(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw xe(this,4);return Mr(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw xe(this,4);let e=ns(this.buf,this.pos);return this.pos+=4,e}double(){if(this.pos+8>this.len)throw xe(this,4);let e=os(this.buf,this.pos);return this.pos+=8,e}bytes(){let e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw xe(this,e);return this.pos+=e,t===n?new Uint8Array(0):this.buf.subarray(t,n)}string(){let e=this.bytes();return cs(e,0,e.length)}skip(e){if(typeof e=="number"){if(this.pos+e>this.len)throw xe(this,e);this.pos+=e}else do if(this.pos>=this.len)throw xe(this);while(this.buf[this.pos++]&128);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){let e=new ie(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw xe(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw xe(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw xe(this,8);let e=Mr(this.buf,this.pos+=4),t=Mr(this.buf,this.pos+=4);return new ie(e,t)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){return this.readLongVarint().toNumber(!0)}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}};function ri(r){return new ti(r instanceof Uint8Array?r:r.subarray())}function rr(r,e){let t=ri(r);return e.decode(t)}var ni={};L(ni,{base10:()=>ol});var ol=Ve({prefix:"9",name:"base10",alphabet:"0123456789"});var ii={};L(ii,{base16:()=>sl,base16upper:()=>al});var sl=R({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),al=R({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var oi={};L(oi,{base2:()=>cl});var cl=R({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var si={};L(si,{base256emoji:()=>dl});var us=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),fl=us.reduce((r,e,t)=>(r[t]=e,r),[]),ul=us.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function ll(r){return r.reduce((e,t)=>(e+=fl[t],e),"")}function hl(r){let e=[];for(let t of r){let n=ul[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var dl=dt({prefix:"\u{1F680}",name:"base256emoji",encode:ll,decode:hl});var ai={};L(ai,{base36:()=>pl,base36upper:()=>ml});var pl=Ve({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ml=Ve({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ci={};L(ci,{base64:()=>nr,base64pad:()=>yl,base64url:()=>gl,base64urlpad:()=>wl});var nr=R({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),yl=R({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),gl=R({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),wl=R({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var fi={};L(fi,{base8:()=>bl});var bl=R({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ui={};L(ui,{identity:()=>xl});var xl=dt({prefix:"\0",name:"identity",encode:r=>$n(r),decode:r=>On(r)});var Pp=new TextEncoder,zp=new TextDecoder;var Be={};L(Be,{code:()=>oe,decode:()=>vl,encode:()=>El,name:()=>Al});var Al="raw",oe=85;function El(r){return ye(r)}function vl(r){return ye(r)}var hi={};L(hi,{identity:()=>li});var ls=0,Sl="identity",hs=ye;function kl(r){return Qe(ls,hs(r))}var li={code:ls,name:Sl,encode:hs,digest:kl};var pi={};L(pi,{sha256:()=>se,sha512:()=>Bl});function tt({name:r,code:e,encode:t}){return new di(r,e,t)}var di=class{name;code;encode;constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?Qe(this.code,t):t.then(n=>Qe(this.code,n))}else throw Error("Unknown type, must be binary type")}};function ps(r){return async e=>new Uint8Array(await crypto.subtle.digest(r,e))}var se=tt({name:"sha2-256",code:18,encode:ps("SHA-256")}),Bl=tt({name:"sha2-512",code:19,encode:ps("SHA-512")});var mi={...ui,...oi,...fi,...ni,...ii,...Gn,...ai,...Wn,...ci,...si},Xp={...pi,...hi};function ys(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var ms=ys("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),yi=ys("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=me(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),Il={utf8:ms,"utf-8":ms,hex:mi.base16,latin1:yi,ascii:yi,binary:yi,...mi},gs=Il;function je(r,e="utf8"){let t=gs[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?$e(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}function gi(r){let e=r??8192,t=e>>>1,n,i=e;return function(s){if(s<1||s>t)return me(s);i+s>e&&(n=me(e),i=0);let a=n.subarray(i,i+=s);return i&7&&(i=(i|7)+1),a}}var rt=class{fn;len;next;val;constructor(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}};function wi(){}var xi=class{head;tail;len;next;constructor(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}},Cl=gi();function Tl(r){return globalThis.Buffer!=null?me(r):Cl(r)}var sr=class{len;head;tail;states;constructor(){this.len=0,this.head=new rt(wi,0,0),this.tail=this.head,this.states=null}_push(e,t,n){return this.tail=this.tail.next=new rt(e,t,n),this.len+=t,this}uint32(e){return this.len+=(this.tail=this.tail.next=new _i((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this}int32(e){return e<0?this._push(ir,10,ie.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){let t=ie.fromBigInt(e);return this._push(ir,t.length(),t)}uint64Number(e){let t=ie.fromNumber(e);return this._push(ir,t.length(),t)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){let t=ie.fromBigInt(e).zzEncode();return this._push(ir,t.length(),t)}sint64Number(e){let t=ie.fromNumber(e).zzEncode();return this._push(ir,t.length(),t)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(bi,1,e?1:0)}fixed32(e){return this._push(or,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){let t=ie.fromBigInt(e);return this._push(or,4,t.lo)._push(or,4,t.hi)}fixed64Number(e){let t=ie.fromNumber(e);return this._push(or,4,t.lo)._push(or,4,t.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(rs,4,e)}double(e){return this._push(is,8,e)}bytes(e){let t=e.length>>>0;return t===0?this._push(bi,1,0):this.uint32(t)._push(Dl,t,e)}string(e){let t=as(e);return t!==0?this.uint32(t)._push(ei,t,e):this._push(bi,1,0)}fork(){return this.states=new xi(this),this.head=this.tail=new rt(wi,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new rt(wi,0,0),this.len=0),this}ldelim(){let e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n!==0&&(this.tail.next=e.next,this.tail=t,this.len+=n),this}finish(){let e=this.head.next,t=Tl(this.len),n=0;for(;e!=null;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t}};function bi(r,e,t){e[t]=r&255}function Nl(r,e,t){for(;r>127;)e[t++]=r&127|128,r>>>=7;e[t]=r}var _i=class extends rt{next;constructor(e,t){super(Nl,e,t),this.next=void 0}};function ir(r,e,t){for(;r.hi!==0;)e[t++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[t++]=r.lo&127|128,r.lo=r.lo>>>7;e[t++]=r.lo}function or(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function Dl(r,e,t){e.set(r,t)}globalThis.Buffer!=null&&(sr.prototype.bytes=function(r){let e=r.length>>>0;return this.uint32(e),e>0&&this._push(Ul,e,r),this},sr.prototype.string=function(r){let e=globalThis.Buffer.byteLength(r);return this.uint32(e),e>0&&this._push(Fl,e,r),this});function Ul(r,e,t){e.set(r,t)}function Fl(r,e,t){r.length<40?ei(r,e,t):e.utf8Write!=null?e.utf8Write(r,t):e.set(je(r),t)}function Ai(){return new sr}function ar(r,e){let t=Ai();return e.encode(r,t,{lengthDelimited:!1}),t.finish()}var bt;(function(r){r[r.VARINT=0]="VARINT",r[r.BIT64=1]="BIT64",r[r.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",r[r.START_GROUP=3]="START_GROUP",r[r.END_GROUP=4]="END_GROUP",r[r.BIT32=5]="BIT32"})(bt||(bt={}));function Hr(r,e,t,n){return{name:r,type:e,encode:t,decode:n}}function Ei(r){function e(i){if(r[i.toString()]==null)throw new Error("Invalid enum value");return r[i]}let t=function(o,s){let a=e(o);s.int32(a)},n=function(o){let s=o.int32();return e(s)};return Hr("enum",bt.VARINT,t,n)}function cr(r,e){return Hr("message",bt.LENGTH_DELIMITED,r,e)}var _e;(function(r){let e;(function(i){i.Raw="Raw",i.Directory="Directory",i.File="File",i.Metadata="Metadata",i.Symlink="Symlink",i.HAMTShard="HAMTShard"})(e=r.DataType||(r.DataType={}));let t;(function(i){i[i.Raw=0]="Raw",i[i.Directory=1]="Directory",i[i.File=2]="File",i[i.Metadata=3]="Metadata",i[i.Symlink=4]="Symlink",i[i.HAMTShard=5]="HAMTShard"})(t||(t={})),function(i){i.codec=()=>Ei(t)}(e=r.DataType||(r.DataType={}));let n;r.codec=()=>(n==null&&(n=cr((i,o,s={})=>{if(s.lengthDelimited!==!1&&o.fork(),i.Type!=null&&(o.uint32(8),r.DataType.codec().encode(i.Type,o)),i.Data!=null&&(o.uint32(18),o.bytes(i.Data)),i.filesize!=null&&(o.uint32(24),o.uint64(i.filesize)),i.blocksizes!=null)for(let a of i.blocksizes)o.uint32(32),o.uint64(a);i.hashType!=null&&(o.uint32(40),o.uint64(i.hashType)),i.fanout!=null&&(o.uint32(48),o.uint64(i.fanout)),i.mode!=null&&(o.uint32(56),o.uint32(i.mode)),i.mtime!=null&&(o.uint32(66),jr.codec().encode(i.mtime,o)),s.lengthDelimited!==!1&&o.ldelim()},(i,o)=>{let s={blocksizes:[]},a=o==null?i.len:i.pos+o;for(;i.pos<a;){let c=i.uint32();switch(c>>>3){case 1:s.Type=r.DataType.codec().decode(i);break;case 2:s.Data=i.bytes();break;case 3:s.filesize=i.uint64();break;case 4:s.blocksizes.push(i.uint64());break;case 5:s.hashType=i.uint64();break;case 6:s.fanout=i.uint64();break;case 7:s.mode=i.uint32();break;case 8:s.mtime=jr.codec().decode(i,i.uint32());break;default:i.skipType(c&7);break}}return s})),n),r.encode=i=>ar(i,r.codec()),r.decode=i=>rr(i,r.codec())})(_e||(_e={}));var jr;(function(r){let e;r.codec=()=>(e==null&&(e=cr((t,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),t.Seconds!=null&&(n.uint32(8),n.int64(t.Seconds)),t.FractionalNanoseconds!=null&&(n.uint32(21),n.fixed32(t.FractionalNanoseconds)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.Seconds=t.int64();break;case 2:i.FractionalNanoseconds=t.fixed32();break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>ar(t,r.codec()),r.decode=t=>rr(t,r.codec())})(jr||(jr={}));var ws;(function(r){let e;r.codec=()=>(e==null&&(e=cr((t,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),t.MimeType!=null&&(n.uint32(10),n.string(t.MimeType)),i.lengthDelimited!==!1&&n.ldelim()},(t,n)=>{let i={},o=n==null?t.len:t.pos+n;for(;t.pos<o;){let s=t.uint32();switch(s>>>3){case 1:i.MimeType=t.string();break;default:t.skipType(s&7);break}}return i})),e),r.encode=t=>ar(t,r.codec()),r.decode=t=>rr(t,r.codec())})(ws||(ws={}));var bs={Raw:"raw",Directory:"directory",File:"file",Metadata:"metadata",Symlink:"symlink",HAMTShard:"hamt-sharded-directory"},Ll=["directory","hamt-sharded-directory"],xs=parseInt("0644",8),_s=parseInt("0755",8),C=class r{static unmarshal(e){let t=_e.decode(e),n=new r({type:bs[t.Type!=null?t.Type.toString():"File"],data:t.Data,blockSizes:t.blocksizes,mode:t.mode,mtime:t.mtime!=null?{secs:t.mtime.Seconds??0n,nsecs:t.mtime.FractionalNanoseconds}:void 0,fanout:t.fanout});return n._originalMode=t.mode??0,n}type;data;blockSizes;hashType;fanout;mtime;_mode;_originalMode;constructor(e={type:"file"}){let{type:t,data:n,blockSizes:i,hashType:o,fanout:s,mtime:a,mode:c}=e;if(t!=null&&!Object.values(bs).includes(t))throw(0,vi.default)(new Error("Type: "+t+" is not valid"),"ERR_INVALID_TYPE");this.type=t??"file",this.data=n,this.hashType=o,this.fanout=s,this.blockSizes=i??[],this._originalMode=0,this.mode=c,this.mtime=a}set mode(e){e==null?this._mode=this.isDirectory()?_s:xs:this._mode=e&4095}get mode(){return this._mode}isDirectory(){return Ll.includes(this.type)}addBlockSize(e){this.blockSizes.push(e)}removeBlockSize(e){this.blockSizes.splice(e,1)}fileSize(){if(this.isDirectory())return 0n;let e=0n;return this.blockSizes.forEach(t=>{e+=t}),this.data!=null&&(e+=BigInt(this.data.length)),e}marshal(){let e;switch(this.type){case"raw":e=_e.DataType.Raw;break;case"directory":e=_e.DataType.Directory;break;case"file":e=_e.DataType.File;break;case"metadata":e=_e.DataType.Metadata;break;case"symlink":e=_e.DataType.Symlink;break;case"hamt-sharded-directory":e=_e.DataType.HAMTShard;break;default:throw(0,vi.default)(new Error(`Type: ${e} is not valid`),"ERR_INVALID_TYPE")}let t=this.data;(this.data==null||this.data.length===0)&&(t=void 0);let n;this.mode!=null&&(n=this._originalMode&4294963200|(this.mode??0),n===xs&&!this.isDirectory()&&(n=void 0),n===_s&&this.isDirectory()&&(n=void 0));let i;return this.mtime!=null&&(i={Seconds:this.mtime.secs,FractionalNanoseconds:this.mtime.nsecs}),_e.encode({Type:e,Data:t,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:n,mtime:i})}};var $=class extends Event{constructor(e,t){super(e),this.detail=t}};var Ae=async(r,e,t)=>{t.codec==null&&(t.codec=j);let n=await se.digest(r),i=N.create(t.cidVersion,t.codec.code,n);return await e.put(i,r,t),i};function As(r){return async function*(t,n){let i=0n;for await(let o of t.content)yield async()=>{let s,a={codec:j,cidVersion:r.cidVersion,onProgress:r.onProgress};r.rawLeaves?(a.codec=Be,a.cidVersion=1):(s=new C({type:r.leafType,data:o}),o=U({Data:s.marshal(),Links:[]}));let c=await Ae(o,n,a);return i+=BigInt(o.byteLength),r.onProgress?.(new $("unixfs:importer:progress:file:write",{bytesWritten:i,cid:c,path:t.path})),{cid:c,unixfs:s,size:BigInt(o.length),block:o}}}}var Si=z(q(),1);var Es=async(r,e,t)=>{let n=new C({type:"directory",mtime:r.mtime,mode:r.mode}),i=U(O({Data:n.marshal()})),o=await Ae(i,e,t),s=r.path;return{cid:o,path:s,unixfs:n,size:BigInt(i.length),originalPath:r.originalPath,block:i}};async function*Pl(r,e,t){let n=-1,i;for await(let o of Kt(t.bufferImporter(r,e),t.blockWriteConcurrency)){if(n++,n===0){i={...o,single:!0};continue}else n===1&&i!=null&&(yield{...i,block:void 0,single:void 0},i=void 0);yield{...o,block:void 0}}i!=null&&(yield i)}function vs(r){return r.single===!0}var zl=(r,e,t)=>async function(i){if(i.length===1&&vs(i[0])&&t.reduceSingleLeafToSelf){let u=i[0],l=u.block;return vs(u)&&(r.mtime!==void 0||r.mode!==void 0)&&(u.unixfs=new C({type:"file",mtime:r.mtime,mode:r.mode,data:u.block}),l={Data:u.unixfs.marshal(),Links:[]},u.block=U(O(l)),u.cid=await Ae(u.block,e,{...t,cidVersion:t.cidVersion}),u.size=BigInt(u.block.length)),t.onProgress?.(new $("unixfs:importer:progress:file:layout",{cid:u.cid,path:u.originalPath})),{cid:u.cid,path:r.path,unixfs:u.unixfs,size:u.size,originalPath:u.originalPath}}let o=new C({type:"file",mtime:r.mtime,mode:r.mode}),s=i.filter(u=>u.cid.code===oe&&u.size>0||u.unixfs!=null&&u.unixfs.data==null&&u.unixfs.fileSize()>0n?!0:!!u.unixfs?.data?.length).map(u=>u.cid.code===oe?(o.addBlockSize(u.size),{Name:"",Tsize:Number(u.size),Hash:u.cid}):(u.unixfs==null||u.unixfs.data==null?o.addBlockSize(u.unixfs?.fileSize()??0n):o.addBlockSize(BigInt(u.unixfs.data.length)),{Name:"",Tsize:Number(u.size),Hash:u.cid})),a={Data:o.marshal(),Links:s},c=U(O(a)),h=await Ae(c,e,t);return t.onProgress?.(new $("unixfs:importer:progress:file:layout",{cid:h,path:r.originalPath})),{cid:h,path:r.path,unixfs:o,size:BigInt(c.length+a.Links.reduce((u,l)=>u+(l.Tsize??0),0)),originalPath:r.originalPath,block:c}},Ss=async(r,e,t)=>t.layout(Pl(r,e,t),zl(r,e,t));function Rl(r){return Symbol.iterator in r}function Ol(r){return Symbol.asyncIterator in r}function $l(r){try{if(r instanceof Uint8Array)return async function*(){yield r}();if(Rl(r))return async function*(){yield*r}();if(Ol(r))return r}catch{throw(0,Si.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw(0,Si.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}function ks(r){return async function*(t,n){for await(let i of t){let o;if(i.path!=null&&(o=i.path,i.path=i.path.split("/").filter(s=>s!=null&&s!==".").join("/")),Vl(i)){let s={path:i.path,mtime:i.mtime,mode:i.mode,content:async function*(){let a=0n;for await(let c of r.chunker(r.chunkValidator($l(i.content)))){let h=BigInt(c.byteLength);a+=h,r.onProgress?.(new $("unixfs:importer:progress:file:read",{bytesRead:a,chunkSize:h,path:i.path})),yield c}}(),originalPath:o};yield async()=>Ss(s,n,r)}else if(i.path!=null){let s={path:i.path,mtime:i.mtime,mode:i.mode,originalPath:o};yield async()=>Es(s,n,r)}else throw new Error("Import candidate must have content or path or both")}}}function Vl(r){return r.content!=null}var ki=z(q(),1);var Bs=()=>async function*(e){for await(let t of e){if(t.length===void 0)throw(0,ki.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if(typeof t=="string"||t instanceof String)yield je(t.toString());else if(Array.isArray(t))yield Uint8Array.from(t);else if(t instanceof Uint8Array)yield t;else throw(0,ki.default)(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}};var Ml=174;function fr(r){let e=r?.maxChildrenPerNode??Ml;return async function t(n,i){let o=[];for await(let s of Yt(n,e))o.push(await i(s));return o.length>1?t(o,i):o[0]}}var Ie=class{options;root;dir;path;dirty;flat;parent;parentKey;unixfs;mode;mtime;cid;size;nodeSize;constructor(e,t){this.options=t??{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime}},ur=N.parse("QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn"),lr=N.parse("zdj7WbTaiJT1fgatdet9Ei9iDB5hdCxkbVyhyh8YTUnXMiwYi");var nt=class extends Ie{_children;constructor(e,t){super(e,t),this._children=new Map}async put(e,t){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,this._children.set(e,t)}async get(e){return Promise.resolve(this._children.get(e))}childCount(){return this._children.size}directChildrenCount(){return this.childCount()}onlyChild(){return this._children.values().next().value}async*eachChildSeries(){for(let[e,t]of this._children.entries())yield{key:e,child:t}}estimateNodeSize(){if(this.nodeSize!==void 0)return this.nodeSize;this.nodeSize=0;for(let[e,t]of this._children.entries())t.size!=null&&t.cid!=null&&(this.nodeSize+=e.length+(this.options.cidVersion===1?lr.bytes.byteLength:ur.bytes.byteLength));return this.nodeSize}async*flush(e){let t=[];for(let[c,h]of this._children.entries()){let u=h;if(h instanceof Ie)for await(let l of h.flush(e))u=l,yield l;u.size!=null&&u.cid!=null&&t.push({Name:c,Tsize:Number(u.size),Hash:u.cid})}let n=new C({type:"directory",mtime:this.mtime,mode:this.mode}),i={Data:n.marshal(),Links:t},o=U(O(i)),s=await Ae(o,e,this.options),a=o.length+i.Links.reduce((c,h)=>c+(h.Tsize==null?0:h.Tsize),0);this.cid=s,this.size=a,yield{cid:s,unixfs:n,path:this.path,size:BigInt(a)}}};var Wr=z(Ts(),1);function Hl(r){let e=new Array(4);for(let t=0;t<4;t++)e[t]=r&255,r=r>>8;return new Uint8Array(e)}var v2=tt({name:"murmur3-32",code:35,encode:r=>Hl(Wr.default.x86.hash32(r))}),it=tt({name:"murmur3-128",code:34,encode:r=>ht.fromHex(Wr.default.x64.hash128(r))}),S2=tt({name:"murmur3-x64-64",code:34,encode:r=>ht.fromHex(Wr.default.x64.hash128(r)).subarray(0,8)});var ra=z(qr(),1);function xt(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}var Ni={};L(Ni,{base10:()=>Zl});function ql(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=i}var a=r.length,c=r.charAt(0),h=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function l(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var m=0,_=0,g=0,w=d.length;g!==w&&d[g]===0;)g++,m++;for(var x=(w-g)*u+1>>>0,A=new Uint8Array(x);g!==w;){for(var B=d[g],E=0,b=x-1;(B!==0||E<_)&&b!==-1;b--,E++)B+=256*A[b]>>>0,A[b]=B%a>>>0,B=B/a>>>0;if(B!==0)throw new Error("Non-zero carry");_=E,g++}for(var k=x-_;k!==x&&A[k]===0;)k++;for(var T=c.repeat(m);k<x;++k)T+=r.charAt(A[k]);return T}function p(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var m=0;if(d[m]!==" "){for(var _=0,g=0;d[m]===c;)_++,m++;for(var w=(d.length-m)*h+1>>>0,x=new Uint8Array(w);d[m];){var A=t[d.charCodeAt(m)];if(A===255)return;for(var B=0,E=w-1;(A!==0||B<g)&&E!==-1;E--,B++)A+=a*x[E]>>>0,x[E]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");g=B,m++}if(d[m]!==" "){for(var b=w-g;b!==w&&x[b]===0;)b++;for(var k=new Uint8Array(_+(w-b)),T=_;b!==w;)k[T++]=x[b++];return k}}}function f(d){var m=p(d);if(m)return m;throw new Error(`Non-${e} character`)}return{encode:l,decodeUnsafe:p,decode:f}}var Yl=ql,Kl=Yl,Us=Kl;var N2=new Uint8Array(0);var Fs=(r,e)=>{if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0},Pe=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")};var Ls=r=>new TextEncoder().encode(r),Ps=r=>new TextDecoder().decode(r);var Bi=class{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Ii=class{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Rs(this,e)}},Ci=class{constructor(e){this.decoders=e}or(e){return Rs(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Rs=(r,e)=>new Ci({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}}),Ti=class{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new Bi(e,t,n),this.decoder=new Ii(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},_t=({name:r,prefix:e,encode:t,decode:n})=>new Ti(r,e,t,n),Ge=({prefix:r,name:e,alphabet:t})=>{let{encode:n,decode:i}=Us(t,e);return _t({prefix:r,name:e,encode:n,decode:o=>Pe(i(o))})},Xl=(r,e,t,n)=>{let i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let o=r.length;for(;r[o-1]==="=";)--o;let s=new Uint8Array(o*t/8|0),a=0,c=0,h=0;for(let u=0;u<o;++u){let l=i[r[u]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<t|l,a+=t,a>=8&&(a-=8,s[h++]=255&c>>a)}if(a>=t||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s},Jl=(r,e,t)=>{let n=e[e.length-1]==="=",i=(1<<t)-1,o="",s=0,a=0;for(let c=0;c<r.length;++c)for(a=a<<8|r[c],s+=8;s>t;)s-=t,o+=e[i&a>>s];if(s&&(o+=e[i&a<<t-s]),n)for(;o.length*t&7;)o+="=";return o},V=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>_t({prefix:e,name:r,encode(i){return Jl(i,n,t)},decode(i){return Xl(i,n,t,r)}});var Zl=Ge({prefix:"9",name:"base10",alphabet:"0123456789"});var Di={};L(Di,{base16:()=>Ql,base16upper:()=>eh});var Ql=V({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),eh=V({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ui={};L(Ui,{base2:()=>th});var th=V({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Fi={};L(Fi,{base256emoji:()=>sh});var Os=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),rh=Os.reduce((r,e,t)=>(r[t]=e,r),[]),nh=Os.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function ih(r){return r.reduce((e,t)=>(e+=rh[t],e),"")}function oh(r){let e=[];for(let t of r){let n=nh[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}var sh=_t({prefix:"\u{1F680}",name:"base256emoji",encode:ih,decode:oh});var Li={};L(Li,{base32:()=>At,base32hex:()=>uh,base32hexpad:()=>hh,base32hexpadupper:()=>dh,base32hexupper:()=>lh,base32pad:()=>ch,base32padupper:()=>fh,base32upper:()=>ah,base32z:()=>ph});var At=V({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ah=V({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ch=V({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),fh=V({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),uh=V({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),lh=V({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hh=V({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),dh=V({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ph=V({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Pi={};L(Pi,{base36:()=>mh,base36upper:()=>yh});var mh=Ge({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yh=Ge({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var zi={};L(zi,{base58btc:()=>Ce,base58flickr:()=>gh});var Ce=Ge({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),gh=Ge({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Ri={};L(Ri,{base64:()=>wh,base64pad:()=>bh,base64url:()=>xh,base64urlpad:()=>_h});var wh=V({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),bh=V({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),xh=V({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),_h=V({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Oi={};L(Oi,{base8:()=>Ah});var Ah=V({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var $i={};L($i,{identity:()=>Eh});var Eh=_t({prefix:"\0",name:"identity",encode:r=>Ps(r),decode:r=>Ls(r)});var W2=new TextEncoder,q2=new TextDecoder;var Mi={};L(Mi,{identity:()=>Wh});var kh=Ms,$s=128,Bh=127,Ih=~Bh,Ch=Math.pow(2,31);function Ms(r,e,t){e=e||[],t=t||0;for(var n=t;r>=Ch;)e[t++]=r&255|$s,r/=128;for(;r&Ih;)e[t++]=r&255|$s,r>>>=7;return e[t]=r|0,Ms.bytes=t-n+1,e}var Th=Vi,Nh=128,Vs=127;function Vi(r,n){var t=0,n=n||0,i=0,o=n,s,a=r.length;do{if(o>=a)throw Vi.bytes=0,new RangeError("Could not decode varint");s=r[o++],t+=i<28?(s&Vs)<<i:(s&Vs)*Math.pow(2,i),i+=7}while(s>=Nh);return Vi.bytes=o-n,t}var Dh=Math.pow(2,7),Uh=Math.pow(2,14),Fh=Math.pow(2,21),Lh=Math.pow(2,28),Ph=Math.pow(2,35),zh=Math.pow(2,42),Rh=Math.pow(2,49),Oh=Math.pow(2,56),$h=Math.pow(2,63),Vh=function(r){return r<Dh?1:r<Uh?2:r<Fh?3:r<Lh?4:r<Ph?5:r<zh?6:r<Rh?7:r<Oh?8:r<$h?9:10},Mh={encode:kh,decode:Th,encodingLength:Vh},Hh=Mh,dr=Hh;var pr=(r,e=0)=>[dr.decode(r,e),dr.decode.bytes],Et=(r,e,t=0)=>(dr.encode(r,e,t),e),vt=r=>dr.encodingLength(r);var ot=(r,e)=>{let t=e.byteLength,n=vt(r),i=n+vt(t),o=new Uint8Array(i+t);return Et(r,o,0),Et(t,o,n),o.set(e,i),new St(r,t,e,o)},Hs=r=>{let e=Pe(r),[t,n]=pr(e),[i,o]=pr(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new St(t,i,s,e)},js=(r,e)=>{if(r===e)return!0;{let t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&Fs(r.bytes,t.bytes)}},St=class{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}};var Gs=0,jh="identity",Ws=Pe,Gh=r=>ot(Gs,Ws(r)),Wh={code:Gs,name:jh,encode:Ws,digest:Gh};var Gi={};L(Gi,{sha256:()=>qh,sha512:()=>Yh});var ji=({name:r,code:e,encode:t})=>new Hi(r,e,t),Hi=class{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?ot(this.code,t):t.then(n=>ot(this.code,n))}else throw Error("Unknown type, must be binary type")}};var Ys=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),qh=ji({name:"sha2-256",code:18,encode:Ys("SHA-256")}),Yh=ji({name:"sha2-512",code:19,encode:Ys("SHA-512")});var Ks=(r,e)=>{let{bytes:t,version:n}=r;switch(n){case 0:return Xh(t,Wi(r),e||Ce.encoder);default:return Jh(t,Wi(r),e||At.encoder)}};var Xs=new WeakMap,Wi=r=>{let e=Xs.get(r);if(e==null){let t=new Map;return Xs.set(r,t),t}return e},Kr=class r{constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==yr)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==Zh)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=ot(e,t);return r.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return r.equals(this,e)}static equals(e,t){let n=t;return n&&e.code===n.code&&e.version===n.version&&js(e.multihash,n.multihash)}toString(e){return Ks(this,e)}toJSON(){return{"/":Ks(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let t=e;if(t instanceof r)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){let{version:n,code:i,multihash:o,bytes:s}=t;return new r(n,i,o,s||Js(n,i,o.bytes))}else if(t[Qh]===!0){let{version:n,multihash:i,code:o}=t,s=Hs(i);return r.create(n,o,s)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==yr)throw new Error(`Version 0 CID must use dag-pb (code: ${yr}) block encoding`);return new r(e,t,n,n.bytes)}case 1:{let i=Js(e,t,n.bytes);return new r(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return r.create(0,yr,e)}static createV1(e,t){return r.create(1,e,t)}static decode(e){let[t,n]=r.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=r.inspectBytes(e),n=t.size-t.multihashSize,i=Pe(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),s=new St(t.multihashCode,t.digestSize,o,i);return[t.version===0?r.createV0(s):r.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[l,p]=pr(e.subarray(t));return t+=p,l},i=n(),o=yr;if(i===18?(i=0,t=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=t,a=n(),c=n(),h=t+c,u=h-s;return{version:i,codec:o,multihashCode:a,digestSize:c,multihashSize:u,size:h}}static parse(e,t){let[n,i]=Kh(e,t),o=r.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Wi(o).set(n,e),o}},Kh=(r,e)=>{switch(r[0]){case"Q":{let t=e||Ce;return[Ce.prefix,t.decode(`${Ce.prefix}${r}`)]}case Ce.prefix:{let t=e||Ce;return[Ce.prefix,t.decode(r)]}case At.prefix:{let t=e||At;return[At.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}},Xh=(r,e,t)=>{let{prefix:n}=t;if(n!==Ce.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i},Jh=(r,e,t)=>{let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i},yr=112,Zh=18,Js=(r,e,t)=>{let n=vt(r),i=n+vt(e),o=new Uint8Array(i+t.byteLength);return Et(r,o,0),Et(e,o,n),o.set(t,i),o},Qh=Symbol.for("@ipld/js-cid/CID");var qi={...$i,...Ui,...Oi,...Ni,...Di,...Li,...Pi,...zi,...Ri,...Fi},fy={...Gi,...Mi};function Xr(r=0){return globalThis.Buffer?.allocUnsafe!=null?xt(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function Qs(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}var Zs=Qs("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Yi=Qs("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);let e=Xr(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),ed={utf8:Zs,"utf-8":Zs,hex:qi.base16,latin1:Yi,ascii:Yi,binary:Yi,...qi},ea=ed;function ta(r,e="utf8"){let t=ea[e];if(t==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?xt(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}var ae=class r{constructor(e,t,n=0){this._options=e,this._popCount=0,this._parent=t,this._posAtParent=n,this._children=new ra.default,this.key=null}async put(e,t){let n=await this._findNewBucketAndPos(e);await n.bucket._putAt(n,e,t)}async get(e){let t=await this._findChild(e);if(t!=null)return t.value}async del(e){let t=await this._findPlace(e),n=t.bucket._at(t.pos);n!=null&&n.key===e&&t.bucket._delAt(t.pos)}leafCount(){return this._children.compactArray().reduce((t,n)=>n instanceof r?t+n.leafCount():t+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){let e=this._children.compactArray();for(let t of e)t instanceof r?yield*t.eachLeafSeries():yield t}serialize(e,t){let n=[];return t(this._children.reduce((i,o,s)=>(o!=null&&(o instanceof r?i.push(o.serialize(e,t)):i.push(e(o,s))),i),n))}async asyncTransform(e,t){return await na(this,e,t)}toJSON(){return this.serialize(rd,nd)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){let t=await this._findPlace(e),n=t.bucket._at(t.pos);if(!(n instanceof r)&&n!=null&&n.key===e)return n}async _findPlace(e){let t=this._options.hash(typeof e=="string"?ta(e):e),n=await t.take(this._options.bits),i=this._children.get(n);return i instanceof r?await i._findPlace(t):{bucket:this,pos:n,hash:t,existingChild:i}}async _findNewBucketAndPos(e){let t=await this._findPlace(e);if(t.existingChild!=null&&t.existingChild.key!==e){let n=new r(this._options,t.bucket,t.pos);t.bucket._putObjectAt(t.pos,n);let i=await n._findPlace(t.existingChild.hash);return i.bucket._putAt(i,t.existingChild.key,t.existingChild.value),await n._findNewBucketAndPos(t.hash)}return t}_putAt(e,t,n){this._putObjectAt(e.pos,{key:t,value:n,hash:e.hash})}_putObjectAt(e,t){this._children.get(e)==null&&this._popCount++,this._children.set(e,t)}_delAt(e){if(e===-1)throw new Error("Invalid position");this._children.get(e)!=null&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent!=null&&this._popCount<=1)if(this._popCount===1){let e=this._children.find(td);if(e!=null&&!(e instanceof r)){let t=e.hash;t.untake(this._options.bits);let n={pos:this._posAtParent,hash:t,bucket:this._parent};this._parent._putAt(n,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}};function td(r){return!!r}function rd(r,e){return r.key}function nd(r){return r}async function na(r,e,t){let n=[];for(let i of r._children.compactArray())if(i instanceof ae)await na(i,e,t);else{let o=await e(i);n.push({bitField:r._children.bitField(),children:o})}return await t(n)}var id=[255,254,252,248,240,224,192,128],od=[1,3,7,15,31,63,127,255],Jr=class{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let t=e,n=0;for(;t>0&&this._haveBits();){let i=this._value[this._currentBytePos],o=this._currentBitPos+1,s=Math.min(o,t),a=sd(i,o-s,s);n=(n<<s)+a,t-=s,this._currentBitPos-=s,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function sd(r,e,t){let n=ad(e,t);return(r&n)>>>e}function ad(r,e){return id[r]&od[Math.min(e+r-1,7)]}function ia(r,e){e==null&&(e=r.reduce((i,o)=>i+o.length,0));let t=Xr(e),n=0;for(let i of r)t.set(i,n),n+=i.length;return xt(t)}function oa(r){function e(t){return t instanceof Zr?t:new Zr(t,r)}return e}var Zr=class{constructor(e,t){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=t,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let t=e;for(;this._availableBits<t;)await this._produceMoreBits();let n=0;for(;t>0;){let i=this._buffers[this._currentBufferIndex],o=Math.min(i.availableBits(),t),s=i.take(o);n=(n<<o)+s,t-=o,this._availableBits-=o,i.availableBits()===0&&this._currentBufferIndex++}return n}untake(e){let t=e;for(;t>0;){let n=this._buffers[this._currentBufferIndex],i=Math.min(n.totalBits()-n.availableBits(),t);n.untake(i),t-=i,this._availableBits+=i,this._currentBufferIndex>0&&n.totalBits()===n.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;let e=this._depth>0?ia([this._value,Uint8Array.from([this._depth])]):this._value,t=await this._hashFn(e),n=new Jr(t);this._buffers.push(n),this._availableBits+=n.availableBits()}};function kt(r){if(r==null||r.hashFn==null)throw new Error("please define an options.hashFn");let e={bits:r.bits??8,hash:oa(r.hashFn)};return new ae(e)}async function cd(r){return(await it.encode(r)).slice(0,8).reverse()}var sa=BigInt(34),fd=8,Ki=class extends Ie{_bucket;constructor(e,t){super(e,t),this._bucket=kt({hashFn:cd,bits:t.shardFanoutBits??fd})}async put(e,t){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,await this._bucket.put(e,t)}async get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(let{key:e,value:t}of this._bucket.eachLeafSeries())yield{key:e,child:t}}estimateNodeSize(){return this.nodeSize!==void 0?this.nodeSize:(this.nodeSize=fa(this._bucket,this,this.options),this.nodeSize)}async*flush(e){for await(let t of ca(this._bucket,e,this,this.options))yield{...t,path:this.path}}},aa=Ki;async function*ca(r,e,t,n){let i=r._children,o=(r.tableSize()-1).toString(16).length,s=[],a=0n;for(let d=0;d<i.length;d++){let m=i.get(d);if(m==null)continue;let _=d.toString(16).toUpperCase().padStart(o,"0");if(m instanceof ae){let g;for await(let w of ca(m,e,null,n))g=w;if(g==null)throw new Error("Could not flush sharded directory, no subshard found");s.push({Name:_,Tsize:Number(g.size),Hash:g.cid}),a+=g.size}else if(ud(m.value)){let g=m.value,w;for await(let A of g.flush(e))w=A,yield w;if(w==null)throw new Error("Did not flush dir");let x=_+m.key;s.push({Name:x,Tsize:Number(w.size),Hash:w.cid}),a+=w.size}else{let g=m.value;if(g.cid==null)continue;let w=_+m.key,x=g.size;s.push({Name:w,Tsize:Number(x),Hash:g.cid}),a+=BigInt(x??0)}}let c=Uint8Array.from(i.bitField().reverse()),h=new C({type:"hamt-sharded-directory",data:c,fanout:BigInt(r.tableSize()),hashType:sa,mtime:t?.mtime,mode:t?.mode}),u={Data:h.marshal(),Links:s},l=U(O(u)),p=await Ae(l,e,n),f=BigInt(l.byteLength)+a;yield{cid:p,unixfs:h,size:f}}function ud(r){return typeof r.flush=="function"}function fa(r,e,t){let n=r._children,i=(r.tableSize()-1).toString(16).length,o=[];for(let h=0;h<n.length;h++){let u=n.get(h);if(u==null)continue;let l=h.toString(16).toUpperCase().padStart(i,"0");if(u instanceof ae){let p=fa(u,null,t);o.push({Name:l,Tsize:Number(p),Hash:t.cidVersion===0?ur:lr})}else if(typeof u.value.flush=="function"){let f=u.value.nodeSize();o.push({Name:l+u.key,Tsize:Number(f),Hash:t.cidVersion===0?ur:lr})}else{let p=u.value;if(p.cid==null)continue;let f=l+u.key,d=p.size;o.push({Name:f,Tsize:Number(d),Hash:p.cid})}}let s=Uint8Array.from(n.bitField().reverse()),a=new C({type:"hamt-sharded-directory",data:s,fanout:BigInt(r.tableSize()),hashType:sa,mtime:e?.mtime,mode:e?.mode});return U(O({Data:a.marshal(),Links:o})).length}async function Xi(r,e,t,n){let i=e;e instanceof nt&&e.estimateNodeSize()>t&&(i=await ld(e,n));let o=i.parent;if(o!=null){if(i!==e){if(r!=null&&(r.parent=i),i.parentKey==null)throw new Error("No parent key found");await o.put(i.parentKey,i)}return Xi(i,o,t,n)}return i}async function ld(r,e){let t=new aa({root:r.root,dir:!0,parent:r.parent,parentKey:r.parentKey,path:r.path,dirty:r.dirty,flat:!1,mtime:r.mtime,mode:r.mode},e);for await(let{key:n,child:i}of r.eachChildSeries())await t.put(n,i);return t}var ua=(r="")=>r.split(/(?<!\\)\//).filter(Boolean);async function hd(r,e,t){let n=ua(r.path??""),i=n.length-1,o=e,s="";for(let a=0;a<n.length;a++){let c=n[a];s+=`${s!==""?"/":""}${c}`;let h=a===i;if(o.dirty=!0,o.cid=void 0,o.size=void 0,h)await o.put(c,r),e=await Xi(null,o,t.shardSplitThresholdBytes,t);else{let u=await o.get(c);(u==null||!(u instanceof Ie))&&(u=new nt({root:!1,dir:!0,parent:o,parentKey:c,path:s,dirty:!0,flat:!0,mtime:u?.unixfs?.mtime,mode:u?.unixfs?.mode},t)),await o.put(c,u),o=u}}return e}async function*la(r,e){if(!(r instanceof Ie)){r.unixfs?.isDirectory()===!0&&(yield r);return}yield*r.flush(e)}function ha(r){return async function*(t,n){let i=new nt({root:!0,dir:!0,path:"",dirty:!0,flat:!0},r),o,s=!1;for await(let a of t){if(a==null)continue;let c=`${a.originalPath??""}`.split("/")[0];c!=null&&c!==""&&(o==null?(o=c,s=!0):o!==c&&(s=!1)),i=await hd(a,i,r),(a.unixfs==null||!a.unixfs.isDirectory())&&(yield a)}if(r.wrapWithDirectory||s&&i.childCount()>1)yield*la(i,n);else for await(let a of i.eachChildSeries())a!=null&&(yield*la(a.child,n))}}async function*We(r,e,t={}){let n;Symbol.asyncIterator in r||Symbol.iterator in r?n=r:n=[r];let i=t.wrapWithDirectory??!1,o=t.shardSplitThresholdBytes??262144,s=t.shardFanoutBits??8,a=t.cidVersion??1,c=t.rawLeaves??!0,h=t.leafType??"file",u=t.fileImportConcurrency??50,l=t.blockWriteConcurrency??10,p=t.reduceSingleLeafToSelf??!0,f=t.chunker??Jt(),d=t.chunkValidator??Bs(),m=t.dagBuilder??ks({chunker:f,chunkValidator:d,wrapWithDirectory:i,layout:t.layout??fr(),bufferImporter:t.bufferImporter??As({cidVersion:a,rawLeaves:c,leafType:h,onProgress:t.onProgress}),blockWriteConcurrency:l,reduceSingleLeafToSelf:p,cidVersion:a,onProgress:t.onProgress}),_=t.treeBuilder??ha({wrapWithDirectory:i,shardSplitThresholdBytes:o,shardFanoutBits:s,cidVersion:a,onProgress:t.onProgress});for await(let g of _(Kt(m(n,e),u),e))yield{cid:g.cid,path:g.path,unixfs:g.unixfs,size:g.size}}async function Qr(r,e,t={}){let n=await zn(We([r],e,t));if(n==null)throw(0,Ji.default)(new Error("Nothing imported"),"ERR_INVALID_PARAMS");return n}async function da(r,e,t={}){let n=await zn(We([r],e,t));if(n==null)throw(0,Ji.default)(new Error("Nothing imported"),"ERR_INVALID_PARAMS");return n}async function pa(r,e,t={}){return Qr({content:r},e,t)}async function ma(r,e,t={}){return Qr({content:r},e,t)}var wd=z(q(),1),bd=z(Ia(),1);var xr={cidVersion:1,rawLeaves:!0,layout:fr({maxChildrenPerNode:1024}),chunker:Jt({chunkSize:1048576})};async function*Ca(r,e,t={}){yield*We(r,e,{...xr,...t})}async function Ta(r,e,t={}){let{cid:n}=await pa(r,e,{...xr,...t});return n}async function Na(r,e,t={}){let{cid:n}=await ma(r,e,{...xr,...t});return n}async function Da(r,e,t={}){let{cid:n}=await Qr(r,e,{...xr,...t});return n}async function Ua(r,e,t={}){let{cid:n}=await da({...r,path:r.path??"-"},e,{...xr,...t});return n}var bn=z(q(),1);function xd(r){return r[Symbol.asyncIterator]!=null}function _d(r){if(xd(r))return(async()=>{let t;for await(let n of r)t=n;return t})();let e;for(let t of r)e=t;return e}var qe=_d;var Ad=["string","number","bigint","symbol"],Ed=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function Fa(r){if(r===null)return"null";if(r===void 0)return"undefined";if(r===!0||r===!1)return"boolean";let e=typeof r;if(Ad.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(r))return"Array";if(vd(r))return"Buffer";let t=Sd(r);return t||"Object"}function vd(r){return r&&r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer.call(null,r)}function Sd(r){let e=Object.prototype.toString.call(r).slice(8,-1);if(Ed.includes(e))return e}var y=class{constructor(e,t,n){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=n}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}};y.uint=new y(0,"uint",!0);y.negint=new y(1,"negint",!0);y.bytes=new y(2,"bytes",!0);y.string=new y(3,"string",!0);y.array=new y(4,"array",!1);y.map=new y(5,"map",!1);y.tag=new y(6,"tag",!1);y.float=new y(7,"float",!0);y.false=new y(7,"false",!0);y.true=new y(7,"true",!0);y.null=new y(7,"null",!0);y.undefined=new y(7,"undefined",!0);y.break=new y(7,"break",!0);var v=class{constructor(e,t,n){this.type=e,this.value=t,this.encodedLength=n,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}};var Bt=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",kd=new TextDecoder,Bd=new TextEncoder;function en(r){return Bt&&globalThis.Buffer.isBuffer(r)}function tn(r){return r instanceof Uint8Array?en(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r:Uint8Array.from(r)}var Ra=Bt?(r,e,t)=>t-e>64?globalThis.Buffer.from(r.subarray(e,t)).toString("utf8"):Pa(r,e,t):(r,e,t)=>t-e>64?kd.decode(r.subarray(e,t)):Pa(r,e,t),rn=Bt?r=>r.length>64?globalThis.Buffer.from(r):La(r):r=>r.length>64?Bd.encode(r):La(r);var It=Bt?(r,e,t)=>en(r)?new Uint8Array(r.subarray(e,t)):r.slice(e,t):(r,e,t)=>r.slice(e,t),Oa=Bt?(r,e)=>(r=r.map(t=>t instanceof Uint8Array?t:globalThis.Buffer.from(t)),tn(globalThis.Buffer.concat(r,e))):(r,e)=>{let t=new Uint8Array(e),n=0;for(let i of r)n+i.length>t.length&&(i=i.subarray(0,t.length-n)),t.set(i,n),n+=i.length;return t},$a=Bt?r=>globalThis.Buffer.allocUnsafe(r):r=>new Uint8Array(r);function Va(r,e){if(en(r)&&en(e))return r.compare(e);for(let t=0;t<r.length;t++)if(r[t]!==e[t])return r[t]<e[t]?-1:1;return 0}function La(r){let e=[],t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e}function Pa(r,e,t){let n=[];for(;e<t;){let i=r[e],o=null,s=i>239?4:i>223?3:i>191?2:1;if(e+s<=t){let a,c,h,u;switch(s){case 1:i<128&&(o=i);break;case 2:a=r[e+1],(a&192)===128&&(u=(i&31)<<6|a&63,u>127&&(o=u));break;case 3:a=r[e+1],c=r[e+2],(a&192)===128&&(c&192)===128&&(u=(i&15)<<12|(a&63)<<6|c&63,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:a=r[e+1],c=r[e+2],h=r[e+3],(a&192)===128&&(c&192)===128&&(h&192)===128&&(u=(i&15)<<18|(a&63)<<12|(c&63)<<6|h&63,u>65535&&u<1114112&&(o=u))}}o===null?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),e+=s}return ro(n)}var za=4096;function ro(r){let e=r.length;if(e<=za)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=za));return t}var Id=256,nn=class{constructor(e=Id){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let i=t.length-(this.maxCursor-this.cursor)-1;t.set(e,i)}else{if(t){let i=t.length-(this.maxCursor-this.cursor)-1;i<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=$a(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,this._initReuseChunk===null&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(this.chunks.length===1){let n=this.chunks[0];e&&this.cursor>n.length/2?(t=this.cursor===n.length?n:n.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=It(n,0,this.cursor)}else t=Oa(this.chunks,this.cursor);return e&&this.reset(),t}};var I="CBOR decode error:",Ct="CBOR encode error:",_r=[];_r[23]=1;_r[24]=2;_r[25]=3;_r[26]=5;_r[27]=9;function ze(r,e,t){if(r.length-e<t)throw new Error(`${I} not enough data for type`)}var W=[24,256,65536,4294967296,BigInt("18446744073709551616")];function ce(r,e,t){ze(r,e,1);let n=r[e];if(t.strict===!0&&n<W[0])throw new Error(`${I} integer encoded in more bytes than necessary (strict decode)`);return n}function fe(r,e,t){ze(r,e,2);let n=r[e]<<8|r[e+1];if(t.strict===!0&&n<W[1])throw new Error(`${I} integer encoded in more bytes than necessary (strict decode)`);return n}function ue(r,e,t){ze(r,e,4);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3];if(t.strict===!0&&n<W[2])throw new Error(`${I} integer encoded in more bytes than necessary (strict decode)`);return n}function le(r,e,t){ze(r,e,8);let n=r[e]*16777216+(r[e+1]<<16)+(r[e+2]<<8)+r[e+3],i=r[e+4]*16777216+(r[e+5]<<16)+(r[e+6]<<8)+r[e+7],o=(BigInt(n)<<BigInt(32))+BigInt(i);if(t.strict===!0&&o<W[3])throw new Error(`${I} integer encoded in more bytes than necessary (strict decode)`);if(o<=Number.MAX_SAFE_INTEGER)return Number(o);if(t.allowBigInt===!0)return o;throw new Error(`${I} integers outside of the safe integer range are not supported`)}function Ma(r,e,t,n){return new v(y.uint,ce(r,e+1,n),2)}function Ha(r,e,t,n){return new v(y.uint,fe(r,e+1,n),3)}function ja(r,e,t,n){return new v(y.uint,ue(r,e+1,n),5)}function Ga(r,e,t,n){return new v(y.uint,le(r,e+1,n),9)}function we(r,e){return K(r,0,e.value)}function K(r,e,t){if(t<W[0]){let n=Number(t);r.push([e|n])}else if(t<W[1]){let n=Number(t);r.push([e|24,n])}else if(t<W[2]){let n=Number(t);r.push([e|25,n>>>8,n&255])}else if(t<W[3]){let n=Number(t);r.push([e|26,n>>>24&255,n>>>16&255,n>>>8&255,n&255])}else{let n=BigInt(t);if(n<W[4]){let i=[e|27,0,0,0,0,0,0,0],o=Number(n&BigInt(4294967295)),s=Number(n>>BigInt(32)&BigInt(4294967295));i[8]=o&255,o=o>>8,i[7]=o&255,o=o>>8,i[6]=o&255,o=o>>8,i[5]=o&255,i[4]=s&255,s=s>>8,i[3]=s&255,s=s>>8,i[2]=s&255,s=s>>8,i[1]=s&255,r.push(i)}else throw new Error(`${I} encountered BigInt larger than allowable range`)}}we.encodedSize=function(e){return K.encodedSize(e.value)};K.encodedSize=function(e){return e<W[0]?1:e<W[1]?2:e<W[2]?3:e<W[3]?5:9};we.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};function Wa(r,e,t,n){return new v(y.negint,-1-ce(r,e+1,n),2)}function qa(r,e,t,n){return new v(y.negint,-1-fe(r,e+1,n),3)}function Ya(r,e,t,n){return new v(y.negint,-1-ue(r,e+1,n),5)}var no=BigInt(-1),Ka=BigInt(1);function Xa(r,e,t,n){let i=le(r,e+1,n);if(typeof i!="bigint"){let o=-1-i;if(o>=Number.MIN_SAFE_INTEGER)return new v(y.negint,o,9)}if(n.allowBigInt!==!0)throw new Error(`${I} integers outside of the safe integer range are not supported`);return new v(y.negint,no-BigInt(i),9)}function on(r,e){let t=e.value,n=typeof t=="bigint"?t*no-Ka:t*-1-1;K(r,e.type.majorEncoded,n)}on.encodedSize=function(e){let t=e.value,n=typeof t=="bigint"?t*no-Ka:t*-1-1;return n<W[0]?1:n<W[1]?2:n<W[2]?3:n<W[3]?5:9};on.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0};function Ar(r,e,t,n){ze(r,e,t+n);let i=It(r,e+t,e+t+n);return new v(y.bytes,i,t+n)}function Ja(r,e,t,n){return Ar(r,e,1,t)}function Za(r,e,t,n){return Ar(r,e,2,ce(r,e+1,n))}function Qa(r,e,t,n){return Ar(r,e,3,fe(r,e+1,n))}function ec(r,e,t,n){return Ar(r,e,5,ue(r,e+1,n))}function tc(r,e,t,n){let i=le(r,e+1,n);if(typeof i=="bigint")throw new Error(`${I} 64-bit integer bytes lengths not supported`);return Ar(r,e,9,i)}function sn(r){return r.encodedBytes===void 0&&(r.encodedBytes=r.type===y.string?rn(r.value):r.value),r.encodedBytes}function Tt(r,e){let t=sn(e);K(r,e.type.majorEncoded,t.length),r.push(t)}Tt.encodedSize=function(e){let t=sn(e);return K.encodedSize(t.length)+t.length};Tt.compareTokens=function(e,t){return Td(sn(e),sn(t))};function Td(r,e){return r.length<e.length?-1:r.length>e.length?1:Va(r,e)}function Er(r,e,t,n,i){let o=t+n;ze(r,e,o);let s=new v(y.string,Ra(r,e+t,e+o),o);return i.retainStringBytes===!0&&(s.byteValue=It(r,e+t,e+o)),s}function rc(r,e,t,n){return Er(r,e,1,t,n)}function nc(r,e,t,n){return Er(r,e,2,ce(r,e+1,n),n)}function ic(r,e,t,n){return Er(r,e,3,fe(r,e+1,n),n)}function oc(r,e,t,n){return Er(r,e,5,ue(r,e+1,n),n)}function sc(r,e,t,n){let i=le(r,e+1,n);if(typeof i=="bigint")throw new Error(`${I} 64-bit integer string lengths not supported`);return Er(r,e,9,i,n)}var ac=Tt;function Nt(r,e,t,n){return new v(y.array,n,t)}function cc(r,e,t,n){return Nt(r,e,1,t)}function fc(r,e,t,n){return Nt(r,e,2,ce(r,e+1,n))}function uc(r,e,t,n){return Nt(r,e,3,fe(r,e+1,n))}function lc(r,e,t,n){return Nt(r,e,5,ue(r,e+1,n))}function hc(r,e,t,n){let i=le(r,e+1,n);if(typeof i=="bigint")throw new Error(`${I} 64-bit integer array lengths not supported`);return Nt(r,e,9,i)}function dc(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${I} indefinite length items not allowed`);return Nt(r,e,1,1/0)}function an(r,e){K(r,y.array.majorEncoded,e.value)}an.compareTokens=we.compareTokens;an.encodedSize=function(e){return K.encodedSize(e.value)};function Dt(r,e,t,n){return new v(y.map,n,t)}function pc(r,e,t,n){return Dt(r,e,1,t)}function mc(r,e,t,n){return Dt(r,e,2,ce(r,e+1,n))}function yc(r,e,t,n){return Dt(r,e,3,fe(r,e+1,n))}function gc(r,e,t,n){return Dt(r,e,5,ue(r,e+1,n))}function wc(r,e,t,n){let i=le(r,e+1,n);if(typeof i=="bigint")throw new Error(`${I} 64-bit integer map lengths not supported`);return Dt(r,e,9,i)}function bc(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${I} indefinite length items not allowed`);return Dt(r,e,1,1/0)}function cn(r,e){K(r,y.map.majorEncoded,e.value)}cn.compareTokens=we.compareTokens;cn.encodedSize=function(e){return K.encodedSize(e.value)};function xc(r,e,t,n){return new v(y.tag,t,1)}function _c(r,e,t,n){return new v(y.tag,ce(r,e+1,n),2)}function Ac(r,e,t,n){return new v(y.tag,fe(r,e+1,n),3)}function Ec(r,e,t,n){return new v(y.tag,ue(r,e+1,n),5)}function vc(r,e,t,n){return new v(y.tag,le(r,e+1,n),9)}function fn(r,e){K(r,y.tag.majorEncoded,e.value)}fn.compareTokens=we.compareTokens;fn.encodedSize=function(e){return K.encodedSize(e.value)};var Pd=20,zd=21,Rd=22,Od=23;function Sc(r,e,t,n){if(n.allowUndefined===!1)throw new Error(`${I} undefined values are not supported`);return n.coerceUndefinedToNull===!0?new v(y.null,null,1):new v(y.undefined,void 0,1)}function kc(r,e,t,n){if(n.allowIndefinite===!1)throw new Error(`${I} indefinite length items not allowed`);return new v(y.break,void 0,1)}function io(r,e,t){if(t){if(t.allowNaN===!1&&Number.isNaN(r))throw new Error(`${I} NaN values are not supported`);if(t.allowInfinity===!1&&(r===1/0||r===-1/0))throw new Error(`${I} Infinity values are not supported`)}return new v(y.float,r,e)}function Bc(r,e,t,n){return io(oo(r,e+1),3,n)}function Ic(r,e,t,n){return io(so(r,e+1),5,n)}function Cc(r,e,t,n){return io(Uc(r,e+1),9,n)}function un(r,e,t){let n=e.value;if(n===!1)r.push([y.float.majorEncoded|Pd]);else if(n===!0)r.push([y.float.majorEncoded|zd]);else if(n===null)r.push([y.float.majorEncoded|Rd]);else if(n===void 0)r.push([y.float.majorEncoded|Od]);else{let i,o=!1;(!t||t.float64!==!0)&&(Nc(n),i=oo(Ee,1),n===i||Number.isNaN(n)?(Ee[0]=249,r.push(Ee.slice(0,3)),o=!0):(Dc(n),i=so(Ee,1),n===i&&(Ee[0]=250,r.push(Ee.slice(0,5)),o=!0))),o||($d(n),i=Uc(Ee,1),Ee[0]=251,r.push(Ee.slice(0,9)))}}un.encodedSize=function(e,t){let n=e.value;if(n===!1||n===!0||n===null||n===void 0)return 1;if(!t||t.float64!==!0){Nc(n);let i=oo(Ee,1);if(n===i||Number.isNaN(n))return 3;if(Dc(n),i=so(Ee,1),n===i)return 5}return 9};var Tc=new ArrayBuffer(9),be=new DataView(Tc,1),Ee=new Uint8Array(Tc,0);function Nc(r){if(r===1/0)be.setUint16(0,31744,!1);else if(r===-1/0)be.setUint16(0,64512,!1);else if(Number.isNaN(r))be.setUint16(0,32256,!1);else{be.setFloat32(0,r);let e=be.getUint32(0),t=(e&2139095040)>>23,n=e&8388607;if(t===255)be.setUint16(0,31744,!1);else if(t===0)be.setUint16(0,(r&2147483648)>>16|n>>13,!1);else{let i=t-127;i<-24?be.setUint16(0,0):i<-14?be.setUint16(0,(e&2147483648)>>16|1<<24+i,!1):be.setUint16(0,(e&2147483648)>>16|i+15<<10|n>>13,!1)}}}function oo(r,e){if(r.length-e<2)throw new Error(`${I} not enough data for float16`);let t=(r[e]<<8)+r[e+1];if(t===31744)return 1/0;if(t===64512)return-1/0;if(t===32256)return NaN;let n=t>>10&31,i=t&1023,o;return n===0?o=i*2**-24:n!==31?o=(i+1024)*2**(n-25):o=i===0?1/0:NaN,t&32768?-o:o}function Dc(r){be.setFloat32(0,r,!1)}function so(r,e){if(r.length-e<4)throw new Error(`${I} not enough data for float32`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,4).getFloat32(0,!1)}function $d(r){be.setFloat64(0,r,!1)}function Uc(r,e){if(r.length-e<8)throw new Error(`${I} not enough data for float64`);let t=(r.byteOffset||0)+e;return new DataView(r.buffer,t,8).getFloat64(0,!1)}un.compareTokens=we.compareTokens;function F(r,e,t){throw new Error(`${I} encountered invalid minor (${t}) for major ${r[e]>>>5}`)}function ln(r){return()=>{throw new Error(`${I} ${r}`)}}var S=[];for(let r=0;r<=23;r++)S[r]=F;S[24]=Ma;S[25]=Ha;S[26]=ja;S[27]=Ga;S[28]=F;S[29]=F;S[30]=F;S[31]=F;for(let r=32;r<=55;r++)S[r]=F;S[56]=Wa;S[57]=qa;S[58]=Ya;S[59]=Xa;S[60]=F;S[61]=F;S[62]=F;S[63]=F;for(let r=64;r<=87;r++)S[r]=Ja;S[88]=Za;S[89]=Qa;S[90]=ec;S[91]=tc;S[92]=F;S[93]=F;S[94]=F;S[95]=ln("indefinite length bytes/strings are not supported");for(let r=96;r<=119;r++)S[r]=rc;S[120]=nc;S[121]=ic;S[122]=oc;S[123]=sc;S[124]=F;S[125]=F;S[126]=F;S[127]=ln("indefinite length bytes/strings are not supported");for(let r=128;r<=151;r++)S[r]=cc;S[152]=fc;S[153]=uc;S[154]=lc;S[155]=hc;S[156]=F;S[157]=F;S[158]=F;S[159]=dc;for(let r=160;r<=183;r++)S[r]=pc;S[184]=mc;S[185]=yc;S[186]=gc;S[187]=wc;S[188]=F;S[189]=F;S[190]=F;S[191]=bc;for(let r=192;r<=215;r++)S[r]=xc;S[216]=_c;S[217]=Ac;S[218]=Ec;S[219]=vc;S[220]=F;S[221]=F;S[222]=F;S[223]=F;for(let r=224;r<=243;r++)S[r]=ln("simple values are not supported");S[244]=F;S[245]=F;S[246]=F;S[247]=Sc;S[248]=ln("simple values are not supported");S[249]=Bc;S[250]=Ic;S[251]=Cc;S[252]=F;S[253]=F;S[254]=F;S[255]=kc;var ve=[];for(let r=0;r<24;r++)ve[r]=new v(y.uint,r,1);for(let r=-1;r>=-24;r--)ve[31-r]=new v(y.negint,r,1);ve[64]=new v(y.bytes,new Uint8Array(0),1);ve[96]=new v(y.string,"",1);ve[128]=new v(y.array,0,1);ve[160]=new v(y.map,0,1);ve[244]=new v(y.false,!1,1);ve[245]=new v(y.true,!0,1);ve[246]=new v(y.null,null,1);function Md(){let r=[];return r[y.uint.major]=we,r[y.negint.major]=on,r[y.bytes.major]=Tt,r[y.string.major]=ac,r[y.array.major]=an,r[y.map.major]=cn,r[y.tag.major]=fn,r[y.float.major]=un,r}var cg=Md(),fg=new nn,hn=class r{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${Ct} object contains circular references`);return new r(t,e)}},Ye={null:new v(y.null,null),undefined:new v(y.undefined,void 0),true:new v(y.true,!0),false:new v(y.false,!1),emptyArray:new v(y.array,0),emptyMap:new v(y.map,0)},Ke={number(r,e,t,n){return!Number.isInteger(r)||!Number.isSafeInteger(r)?new v(y.float,r):r>=0?new v(y.uint,r):new v(y.negint,r)},bigint(r,e,t,n){return r>=BigInt(0)?new v(y.uint,r):new v(y.negint,r)},Uint8Array(r,e,t,n){return new v(y.bytes,r)},string(r,e,t,n){return new v(y.string,r)},boolean(r,e,t,n){return r?Ye.true:Ye.false},null(r,e,t,n){return Ye.null},undefined(r,e,t,n){return Ye.undefined},ArrayBuffer(r,e,t,n){return new v(y.bytes,new Uint8Array(r))},DataView(r,e,t,n){return new v(y.bytes,new Uint8Array(r.buffer,r.byteOffset,r.byteLength))},Array(r,e,t,n){if(!r.length)return t.addBreakTokens===!0?[Ye.emptyArray,new v(y.break)]:Ye.emptyArray;n=hn.createCheck(n,r);let i=[],o=0;for(let s of r)i[o++]=ao(s,t,n);return t.addBreakTokens?[new v(y.array,r.length),i,new v(y.break)]:[new v(y.array,r.length),i]},Object(r,e,t,n){let i=e!=="Object",o=i?r.keys():Object.keys(r),s=i?r.size:o.length;if(!s)return t.addBreakTokens===!0?[Ye.emptyMap,new v(y.break)]:Ye.emptyMap;n=hn.createCheck(n,r);let a=[],c=0;for(let h of o)a[c++]=[ao(h,t,n),ao(i?r.get(h):r[h],t,n)];return Hd(a,t),t.addBreakTokens?[new v(y.map,s),a,new v(y.break)]:[new v(y.map,s),a]}};Ke.Map=Ke.Object;Ke.Buffer=Ke.Uint8Array;for(let r of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Ke[`${r}Array`]=Ke.DataView;function ao(r,e={},t){let n=Fa(r),i=e&&e.typeEncoders&&e.typeEncoders[n]||Ke[n];if(typeof i=="function"){let s=i(r,n,e,t);if(s!=null)return s}let o=Ke[n];if(!o)throw new Error(`${Ct} unsupported type: ${n}`);return o(r,n,e,t)}function Hd(r,e){e.mapSorter&&r.sort(e.mapSorter)}var jd={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0},co=class{constructor(e,t={}){this._pos=0,this.data=e,this.options=t}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){let e=this.data[this._pos],t=ve[e];if(t===void 0){let n=S[e];if(!n)throw new Error(`${I} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let i=e&31;t=n(this.data,this._pos,i,this.options)}return this._pos+=t.encodedLength,t}},vr=Symbol.for("DONE"),dn=Symbol.for("BREAK");function Gd(r,e,t){let n=[];for(let i=0;i<r.value;i++){let o=Sr(e,t);if(o===dn){if(r.value===1/0)break;throw new Error(`${I} got unexpected break to lengthed array`)}if(o===vr)throw new Error(`${I} found array but not enough entries (got ${i}, expected ${r.value})`);n[i]=o}return n}function Wd(r,e,t){let n=t.useMaps===!0,i=n?void 0:{},o=n?new Map:void 0;for(let s=0;s<r.value;s++){let a=Sr(e,t);if(a===dn){if(r.value===1/0)break;throw new Error(`${I} got unexpected break to lengthed map`)}if(a===vr)throw new Error(`${I} found map but not enough entries (got ${s} [no key], expected ${r.value})`);if(n!==!0&&typeof a!="string")throw new Error(`${I} non-string keys not supported (got ${typeof a})`);if(t.rejectDuplicateMapKeys===!0&&(n&&o.has(a)||!n&&a in i))throw new Error(`${I} found repeat map key "${a}"`);let c=Sr(e,t);if(c===vr)throw new Error(`${I} found map but not enough entries (got ${s} [no value], expected ${r.value})`);n?o.set(a,c):i[a]=c}return n?o:i}function Sr(r,e){if(r.done())return vr;let t=r.next();if(t.type===y.break)return dn;if(t.type.terminal)return t.value;if(t.type===y.array)return Gd(t,r,e);if(t.type===y.map)return Wd(t,r,e);if(t.type===y.tag){if(e.tags&&typeof e.tags[t.value]=="function"){let n=Sr(r,e);return e.tags[t.value](n)}throw new Error(`${I} tag not supported (${t.value})`)}throw new Error("unsupported")}function fo(r,e){if(!(r instanceof Uint8Array))throw new Error(`${I} data to decode must be a Uint8Array`);e=Object.assign({},jd,e);let t=e.tokenizer||new co(r,e),n=Sr(t,e);if(n===vr)throw new Error(`${I} did not find any content to decode`);if(n===dn)throw new Error(`${I} got unexpected break`);return[n,r.subarray(t.pos())]}function kr(r,e){let[t,n]=fo(r,e);if(n.length>0)throw new Error(`${I} too many terminals, data makes no sense`);return t}var Kd=42;function Xd(r){if(r[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return N.decode(r.subarray(1))}var Fc={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Fc.tags[Kd]=Xd;var Lc=113;var Pc=r=>kr(r,Fc);var Rc=class extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){let t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===y.array&&(t.elements++,t.elements!==1&&e.push([44])),t.type===y.map&&(t.elements++,t.elements!==1&&(t.elements%2===1?e.push([44]):e.push([58]))))}[y.uint.major](e,t){this.prefix(e);let n=String(t.value),i=[];for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);e.push(i)}[y.negint.major](e,t){this[y.uint.major](e,t)}[y.bytes.major](e,t){throw new Error(`${Ct} unsupported type: Uint8Array`)}[y.string.major](e,t){this.prefix(e);let n=rn(JSON.stringify(t.value));e.push(n.length>32?tn(n):n)}[y.array.major](e,t){this.prefix(e),this.inRecursive.push({type:y.array,elements:0}),e.push([91])}[y.map.major](e,t){this.prefix(e),this.inRecursive.push({type:y.map,elements:0}),e.push([123])}[y.tag.major](e,t){}[y.float.major](e,t){if(t.type.name==="break"){let s=this.inRecursive.pop();if(s){if(s.type===y.array)e.push([93]);else if(s.type===y.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(t.value===void 0)throw new Error(`${Ct} unsupported type: undefined`);if(this.prefix(e),t.type.name==="true"){e.push([116,114,117,101]);return}else if(t.type.name==="false"){e.push([102,97,108,115,101]);return}else if(t.type.name==="null"){e.push([110,117,108,108]);return}let n=String(t.value),i=[],o=!1;for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s),!o&&(i[s]===46||i[s]===101||i[s]===69)&&(o=!0);o||(i.push(46),i.push(48)),e.push(i)}};var Ut=class{constructor(e,t={}){this._pos=0,this.data=e,this.options=t,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this._pos]}expect(e){if(this.data.length-this._pos<e.length)throw new Error(`${I} unexpected end of input at position ${this._pos}`);for(let t=0;t<e.length;t++)if(this.data[this._pos++]!==e[t])throw new Error(`${I} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){let e=this._pos,t=!1,n=!1,i=a=>{for(;!this.done();){let c=this.ch();if(a.includes(c))this._pos++;else break}};if(this.ch()===45&&(t=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,n=!0;else return new v(y.uint,0,this._pos-e);if(i([48,49,50,51,52,53,54,55,56,57]),t&&this._pos===e+1)throw new Error(`${I} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(n)throw new Error(`${I} unexpected token at position ${this._pos}`);n=!0,this._pos++,i([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(n=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,i([48,49,50,51,52,53,54,55,56,57]));let o=String.fromCharCode.apply(null,this.data.subarray(e,this._pos)),s=parseFloat(o);return n?new v(y.float,s,this._pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(s)?new v(s>=0?y.uint:y.negint,s,this._pos-e):new v(s>=0?y.uint:y.negint,BigInt(o),this._pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${I} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let o=this._pos,s=0;o<this.data.length&&s<65536;o++,s++){let a=this.data[o];if(a===92||a<32||a>=128)break;if(a===34){let c=String.fromCharCode.apply(null,this.data.subarray(this._pos,o));return this._pos=o+1,new v(y.string,c,s)}}let e=this._pos,t=[],n=()=>{if(this._pos+4>=this.data.length)throw new Error(`${I} unexpected end of unicode escape sequence at position ${this._pos}`);let o=0;for(let s=0;s<4;s++){let a=this.ch();if(a>=48&&a<=57)a-=48;else if(a>=97&&a<=102)a=a-97+10;else if(a>=65&&a<=70)a=a-65+10;else throw new Error(`${I} unexpected unicode escape character at position ${this._pos}`);o=o*16+a,this._pos++}return o},i=()=>{let o=this.ch(),s=null,a=o>239?4:o>223?3:o>191?2:1;if(this._pos+a>this.data.length)throw new Error(`${I} unexpected unicode sequence at position ${this._pos}`);let c,h,u,l;switch(a){case 1:o<128&&(s=o);break;case 2:c=this.data[this._pos+1],(c&192)===128&&(l=(o&31)<<6|c&63,l>127&&(s=l));break;case 3:c=this.data[this._pos+1],h=this.data[this._pos+2],(c&192)===128&&(h&192)===128&&(l=(o&15)<<12|(c&63)<<6|h&63,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:c=this.data[this._pos+1],h=this.data[this._pos+2],u=this.data[this._pos+3],(c&192)===128&&(h&192)===128&&(u&192)===128&&(l=(o&15)<<18|(c&63)<<12|(h&63)<<6|u&63,l>65535&&l<1114112&&(s=l))}s===null?(s=65533,a=1):s>65535&&(s-=65536,t.push(s>>>10&1023|55296),s=56320|s&1023),t.push(s),this._pos+=a};for(;!this.done();){let o=this.ch(),s;switch(o){case 92:if(this._pos++,this.done())throw new Error(`${I} unexpected string termination at position ${this._pos}`);switch(s=this.ch(),this._pos++,s){case 34:case 39:case 92:case 47:t.push(s);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(n());break;default:throw new Error(`${I} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new v(y.string,ro(t),this._pos-e);default:if(o<32)throw new Error(`${I} invalid control character at position ${this._pos}`);o<128?(t.push(o),this._pos++):i()}}throw new Error(`${I} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new v(y.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new v(y.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new v(y.null,null,4);case 102:return this.expect([102,97,108,115,101]),new v(y.false,!1,5);case 116:return this.expect([116,114,117,101]),new v(y.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${I} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new v(y.break,void 0,1);if(this.ch()!==44)throw new Error(`${I} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new v(y.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new v(y.break,void 0,1);if(this.ch()!==44)throw new Error(`${I} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new v(y.break,void 0,1);let e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${I} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${I} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}};function uo(r,e){return e=Object.assign({tokenizer:new Ut(r,e)},e),kr(r,e)}var lo=class extends Ut{constructor(e,t){super(e,t),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){let e=this._next();if(e.type===y.map){let t=this._next();if(t.type===y.string&&t.value==="/"){let n=this._next();if(n.type===y.string){if(this._next().type!==y.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(n),new v(y.tag,42,0)}if(n.type===y.map){let i=this._next();if(i.type===y.string&&i.value==="bytes"){let o=this._next();if(o.type===y.string){for(let a=0;a<2;a++)if(this._next().type!==y.break)throw new Error("Invalid encoded Bytes form");let s=nr.decode(`m${o.value}`);return new v(y.bytes,s,o.value.length)}this.tokenBuffer.push(o)}this.tokenBuffer.push(i)}this.tokenBuffer.push(n)}this.tokenBuffer.push(t)}return e}},ho={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};ho.tags[42]=N.parse;var Oc=297;var $c=r=>{let e=Object.assign(ho,{tokenizer:new lo(r,ho)});return uo(r,e)};var Pg=new TextDecoder;var zg=new TextEncoder;var df=z(q(),1);var Mc=z(q(),1);var Qd=async(r,e,t,n,i,o,s,a)=>{let c=await s.get(r,a),h=Pc(c),u=h,l=t;for(;n.length>0;){let p=n[0];if(p in u){n.shift(),l=`${l}/${p}`;let f=N.asCID(u[p]);if(f!=null)return{entry:{type:"object",name:e,path:t,cid:r,node:c,depth:o,size:BigInt(c.length),content:async function*(){yield h}},next:{cid:f,name:p,path:l,toResolve:n}};u=u[p]}else throw(0,Mc.default)(new Error(`No property named ${p} found in cbor node ${r}`),"ERR_NO_PROP")}return{entry:{type:"object",name:e,path:t,cid:r,node:c,depth:o,size:BigInt(c.length),content:async function*(){yield h}}}},Hc=Qd;var jc=z(q(),1);var e1=async(r,e,t,n,i,o,s,a)=>{let c=await s.get(r,a),h=$c(c),u=h,l=t;for(;n.length>0;){let p=n[0];if(p in u){n.shift(),l=`${l}/${p}`;let f=N.asCID(u[p]);if(f!=null)return{entry:{type:"object",name:e,path:t,cid:r,node:c,depth:o,size:BigInt(c.length),content:async function*(){yield h}},next:{cid:f,name:p,path:l,toResolve:n}};u=u[p]}else throw(0,jc.default)(new Error(`No property named ${p} found in dag-json node ${r}`),"ERR_NO_PROP")}return{entry:{type:"object",name:e,path:t,cid:r,node:c,depth:o,size:BigInt(c.length),content:async function*(){yield h}}}},Gc=e1;var Wc=z(q(),1);function t1(r,e,t,n){let i=BigInt(r.length),o=BigInt(e+i);return t>=o||n<e?new Uint8Array(0):(n>=e&&n<o&&(r=r.subarray(0,Number(n-e))),t>=e&&t<o&&(r=r.subarray(Number(t-e))),r)}var at=t1;var Br=z(q(),1),r1=(r,e=0,t=r)=>{let n=BigInt(r),i=BigInt(e??0),o=BigInt(t);if(o!==n&&(o=i+o),o>n&&(o=n),i<0n)throw(0,Br.default)(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(i>n)throw(0,Br.default)(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(o<0n)throw(0,Br.default)(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(o>n)throw(0,Br.default)(new Error("Length must be less than the file size"),"ERR_INVALID_PARAMS");return{start:i,end:o}},Ft=r1;var n1=r=>{async function*e(t={}){let{start:n,end:i}=Ft(r.length,t.offset,t.length),o=at(r,0n,n,i);t.onProgress?.(new $("unixfs:exporter:progress:identity",{bytesRead:BigInt(o.byteLength),totalBytes:i-n,fileSize:BigInt(r.byteLength)})),yield o}return e},i1=async(r,e,t,n,i,o,s,a)=>{if(n.length>0)throw(0,Wc.default)(new Error(`No link named ${t} found in raw node ${r}`),"ERR_NOT_FOUND");let c=$r(r.multihash.bytes);return{entry:{type:"identity",name:e,path:t,cid:r,content:n1(c.digest),depth:o,size:BigInt(c.digest.length),node:c.digest}}},qc=i1;var Yc=z(q(),1);var o1=r=>{async function*e(t={}){let{start:n,end:i}=Ft(r.length,t.offset,t.length),o=at(r,0n,n,i);t.onProgress?.(new $("unixfs:exporter:progress:raw",{bytesRead:BigInt(o.byteLength),totalBytes:i-n,fileSize:BigInt(r.byteLength)})),yield o}return e},s1=async(r,e,t,n,i,o,s,a)=>{if(n.length>0)throw(0,Yc.default)(new Error(`No link named ${t} found in raw node ${r}`),"ERR_NOT_FOUND");let c=await s.get(r,a);return{entry:{type:"raw",name:e,path:t,cid:r,content:o1(c),depth:o,size:BigInt(c.length),node:c}}},Kc=s1;var Ur=z(q(),1);var Ir=z(q(),1);var a1=async function(r){return(await it.encode(r)).slice(0,8).reverse()},c1=async(r,e,t)=>{let n=(e.tableSize()-1).toString(16).length;await Promise.all(r.map(async i=>{if(i.Name==null)throw new Error("Unexpected Link without a Name");if(i.Name.length===n){let o=parseInt(i.Name,16);e._putObjectAt(o,new ae({hash:t._options.hash,bits:t._options.bits},e,o));return}await t.put(i.Name.substring(2),!0)}))},Xc=(r,e)=>r.toString(16).toUpperCase().padStart(e,"0").substring(0,e),f1=r=>{let e=r.bucket,t=[];for(;e._parent!=null;)t.push(e),e=e._parent;return t.push(e),t.reverse()},Jc=async(r,e,t,n,i)=>{if(n==null){if(r.Data==null)throw(0,Ir.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let l;try{l=C.unmarshal(r.Data)}catch(f){throw(0,Ir.default)(f,"ERR_NOT_UNIXFS")}if(l.type!=="hamt-sharded-directory")throw(0,Ir.default)(new Error("not a HAMT"),"ERR_NOT_UNIXFS");if(l.fanout==null)throw(0,Ir.default)(new Error("missing fanout"),"ERR_NOT_UNIXFS");let p=kt({hashFn:a1,bits:Math.log2(Number(l.fanout))});n={rootBucket:p,hamtDepth:1,lastBucket:p}}let o=(n.lastBucket.tableSize()-1).toString(16).length;await c1(r.Links,n.lastBucket,n.rootBucket);let s=await n.rootBucket._findNewBucketAndPos(e),a=Xc(s.pos,o),c=f1(s);c.length>n.hamtDepth&&(n.lastBucket=c[n.hamtDepth],a=Xc(n.lastBucket._posAtParent,o));let h=r.Links.find(l=>{if(l.Name==null)return!1;let p=l.Name.substring(0,o),f=l.Name.substring(o);return!(p!==a||f!==""&&f!==e)});if(h==null)return;if(h.Name!=null&&h.Name.substring(o)===e)return h.Hash;n.hamtDepth++;let u=await t.get(h.Hash,i);return r=M(u),Jc(r,e,t,n,i)},Zc=Jc;function u1(r){let[e,t]=r[Symbol.asyncIterator]!=null?[r[Symbol.asyncIterator](),Symbol.asyncIterator]:[r[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>e.next(),push:i=>{n.push(i)},next:()=>n.length>0?{done:!1,value:n.shift()}:e.next(),[t](){return this}}}var pn=u1;function l1(r){return r[Symbol.asyncIterator]!=null}function h1(r,e){if(l1(r))return async function*(){for await(let a of r)await e(a)&&(yield a)}();let t=pn(r),{value:n,done:i}=t.next();if(i===!0)return function*(){}();let o=e(n);if(typeof o.then=="function")return async function*(){await o&&(yield n);for await(let a of t)await e(a)&&(yield a)}();let s=e;return function*(){o===!0&&(yield n);for(let a of t)s(a)&&(yield a)}()}var Qc=h1;function d1(r){return r[Symbol.asyncIterator]!=null}function p1(r,e){if(d1(r))return async function*(){for await(let a of r)yield e(a)}();let t=pn(r),{value:n,done:i}=t.next();if(i===!0)return function*(){}();let o=e(n);if(typeof o.then=="function")return async function*(){yield await o;for await(let a of t)yield e(a)}();let s=e;return function*(){yield o;for(let a of t)yield s(a)}()}var Lt=p1;function Re(){let r={};return r.promise=new Promise((e,t)=>{r.resolve=e,r.reject=t}),r}var mn=globalThis.CustomEvent??Event;async function*ct(r,e={}){let t=e.concurrency??1/0;t<1&&(t=1/0);let n=e.ordered==null?!1:e.ordered,i=new EventTarget,o=[],s=Re(),a=Re(),c=!1,h,u=!1;i.addEventListener("task-complete",()=>{a.resolve()}),Promise.resolve().then(async()=>{try{for await(let d of r){if(o.length===t&&(s=Re(),await s.promise),u)break;let m={done:!1};o.push(m),d().then(_=>{m.done=!0,m.ok=!0,m.value=_,i.dispatchEvent(new mn("task-complete"))},_=>{m.done=!0,m.err=_,i.dispatchEvent(new mn("task-complete"))})}c=!0,i.dispatchEvent(new mn("task-complete"))}catch(d){h=d,i.dispatchEvent(new mn("task-complete"))}});function l(){return n?o[0]?.done:!!o.find(d=>d.done)}function*p(){for(;o.length>0&&o[0].done;){let d=o[0];if(o.shift(),d.ok)yield d.value;else throw u=!0,s.resolve(),d.err;s.resolve()}}function*f(){for(;l();)for(let d=0;d<o.length;d++)if(o[d].done){let m=o[d];if(o.splice(d,1),d--,m.ok)yield m.value;else throw u=!0,s.resolve(),m.err;s.resolve()}}for(;;){if(l()||(a=Re(),await a.promise),h!=null)throw h;if(n?yield*p():yield*f(),c&&o.length===0)break}}var yn=class{buffer;mask;top;btm;next;constructor(e){if(!(e>0)||e-1&e)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},Pt=class{size;hwm;head;tail;constructor(e={}){this.hwm=e.splitLimit??16,this.head=new yn(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let t=this.head;this.head=t.next=new yn(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};var po=class extends Error{type;code;constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.code=t??"ABORT_ERR"}};function zt(r={}){return m1(t=>{let n=t.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},r)}function m1(r,e){e=e??{};let t=e.onEnd,n=new Pt,i,o,s,a=Re(),c=async()=>{try{return n.isEmpty()?s?{done:!0}:await new Promise((_,g)=>{o=w=>{o=null,n.push(w);try{_(r(n))}catch(x){g(x)}return i}}):r(n)}finally{n.isEmpty()&&queueMicrotask(()=>{a.resolve(),a=Re()})}},h=_=>o!=null?o(_):(n.push(_),i),u=_=>(n=new Pt,o!=null?o({error:_}):(n.push({error:_}),i)),l=_=>{if(s)return i;if(e?.objectMode!==!0&&_?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return h({done:!1,value:_})},p=_=>s?i:(s=!0,_!=null?u(_):h({done:!0})),f=()=>(n=new Pt,p(),{done:!0}),d=_=>(p(_),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:c,return:f,throw:d,push:l,end:p,get readableLength(){return n.size},onEmpty:async _=>{let g=_?.signal;if(g?.throwIfAborted(),n.isEmpty())return;let w,x;g!=null&&(w=new Promise((A,B)=>{x=()=>{B(new po)},g.addEventListener("abort",x)}));try{await Promise.race([a.promise,w])}finally{x!=null&&g!=null&&g?.removeEventListener("abort",x)}}},t==null)return i;let m=i;return i={[Symbol.asyncIterator](){return this},next(){return m.next()},throw(_){return m.throw(_),t!=null&&(t(_),t=void 0),{done:!0}},return(){return m.return(),t!=null&&(t(),t=void 0),{done:!0}},push:l,end(_){return m.end(_),t!=null&&(t(_),t=void 0),i},get readableLength(){return m.readableLength},onEmpty:_=>m.onEmpty(_)},i}function y1(r){return r[Symbol.asyncIterator]!=null}function g1(...r){let e=[];for(let t of r)y1(t)||e.push(t);return e.length===r.length?function*(){for(let t of e)yield*t}():async function*(){let t=zt({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(r.map(async n=>{for await(let i of n)t.push(i)})),t.end()}catch(n){t.end(n)}}),yield*t}()}var ef=g1;function Te(r,...e){if(r==null)throw new Error("Empty pipeline");if(mo(r)){let n=r;r=()=>n.source}else if(rf(r)||tf(r)){let n=r;r=()=>n}let t=[r,...e];if(t.length>1&&mo(t[t.length-1])&&(t[t.length-1]=t[t.length-1].sink),t.length>2)for(let n=1;n<t.length-1;n++)mo(t[n])&&(t[n]=b1(t[n]));return w1(...t)}var w1=(...r)=>{let e;for(;r.length>0;)e=r.shift()(e);return e},tf=r=>r?.[Symbol.asyncIterator]!=null,rf=r=>r?.[Symbol.iterator]!=null,mo=r=>r==null?!1:r.sink!=null&&r.source!=null,b1=r=>e=>{let t=r.sink(e);if(t?.then!=null){let n=zt({objectMode:!0});t.then(()=>{n.end()},s=>{n.end(s)});let i,o=r.source;if(tf(o))i=async function*(){yield*o,n.end()};else if(rf(o))i=function*(){yield*o,n.end()};else throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");return ef(n,i())}return r.source};var x1=(r,e,t,n,i,o,s)=>{async function*a(c={}){let h=c.offset??0,u=c.length??e.Links.length,l=e.Links.slice(h,u);c.onProgress?.(new $("unixfs:exporter:walk:directory",{cid:r})),yield*Te(l,p=>Lt(p,f=>async()=>{let d=f.Name??"",m=`${n}/${d}`;return(await i(f.Hash,d,m,[],o+1,s,c)).entry}),p=>ct(p,{ordered:!0,concurrency:c.blockReadConcurrency}),p=>Qc(p,f=>f!=null))}return a},nf=x1;var ft=z(q(),1);var go=z(sf(),1);var Tr=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},wo=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},af=r=>globalThis.DOMException===void 0?new wo(r):new DOMException(r),cf=r=>{let e=r.reason===void 0?af("This operation was aborted."):r.reason;return e instanceof Error?e:af(e)};function bo(r,e){let{milliseconds:t,fallback:n,message:i,customTimers:o={setTimeout,clearTimeout}}=e,s,c=new Promise((h,u)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(e.signal){let{signal:p}=e;p.aborted&&u(cf(p)),p.addEventListener("abort",()=>{u(cf(p))})}if(t===Number.POSITIVE_INFINITY){r.then(h,u);return}let l=new Tr;s=o.setTimeout.call(void 0,()=>{if(n){try{h(n())}catch(p){u(p)}return}typeof r.cancel=="function"&&r.cancel(),i===!1?h():i instanceof Error?u(i):(l.message=i??`Promise timed out after ${t} milliseconds`,u(l))},t),(async()=>{try{h(await r)}catch(p){u(p)}})()}).finally(()=>{c.clear()});return c.clear=()=>{o.clearTimeout.call(void 0,s),s=void 0},c}function xo(r,e,t){let n=0,i=r.length;for(;i>0;){let o=Math.trunc(i/2),s=n+o;t(r[s],e)<=0?(n=++s,i-=o+1):i=o}return n}var Nr=class{#e=[];enqueue(e,t){t={priority:0,...t};let n={priority:t.priority,run:e};if(this.size&&this.#e[this.size-1].priority>=t.priority){this.#e.push(n);return}let i=xo(this.#e,n,(o,s)=>s.priority-o.priority);this.#e.splice(i,0,n)}dequeue(){return this.#e.shift()?.run}filter(e){return this.#e.filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return this.#e.length}};var Dr=class extends go.default{#e;#s;#o=0;#d;#a;#p=0;#r;#c;#t;#m;#n=0;#f;#i;#y;timeout;constructor(e){if(super(),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Nr,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??""}\` (${typeof e.interval})`);this.#e=e.carryoverConcurrencyCount,this.#s=e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,this.#d=e.intervalCap,this.#a=e.interval,this.#t=new e.queueClass,this.#m=e.queueClass,this.concurrency=e.concurrency,this.timeout=e.timeout,this.#y=e.throwOnTimeout===!0,this.#i=e.autoStart===!1}get#b(){return this.#s||this.#o<this.#d}get#x(){return this.#n<this.#f}#_(){this.#n--,this.#u(),this.emit("next")}#A(){this.#w(),this.#g(),this.#c=void 0}get#E(){let e=Date.now();if(this.#r===void 0){let t=this.#p-e;if(t<0)this.#o=this.#e?this.#n:0;else return this.#c===void 0&&(this.#c=setTimeout(()=>{this.#A()},t)),!0}return!1}#u(){if(this.#t.size===0)return this.#r&&clearInterval(this.#r),this.#r=void 0,this.emit("empty"),this.#n===0&&this.emit("idle"),!1;if(!this.#i){let e=!this.#E;if(this.#b&&this.#x){let t=this.#t.dequeue();return t?(this.emit("active"),t(),e&&this.#g(),!0):!1}}return!1}#g(){this.#s||this.#r!==void 0||(this.#r=setInterval(()=>{this.#w()},this.#a),this.#p=Date.now()+this.#a)}#w(){this.#o===0&&this.#n===0&&this.#r&&(clearInterval(this.#r),this.#r=void 0),this.#o=this.#e?this.#n:0,this.#l()}#l(){for(;this.#u(););}get concurrency(){return this.#f}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#f=e,this.#l()}async#v(e){return new Promise((t,n)=>{e.addEventListener("abort",()=>{n(e.reason)},{once:!0})})}async add(e,t={}){return t={timeout:this.timeout,throwOnTimeout:this.#y,...t},new Promise((n,i)=>{this.#t.enqueue(async()=>{this.#n++,this.#o++;try{t.signal?.throwIfAborted();let o=e({signal:t.signal});t.timeout&&(o=bo(Promise.resolve(o),{milliseconds:t.timeout})),t.signal&&(o=Promise.race([o,this.#v(t.signal)]));let s=await o;n(s),this.emit("completed",s)}catch(o){if(o instanceof Tr&&!t.throwOnTimeout){n();return}i(o),this.emit("error",o)}finally{this.#_()}},t),this.emit("add"),this.#u()})}async addAll(e,t){return Promise.all(e.map(async n=>this.add(n,t)))}start(){return this.#i?(this.#i=!1,this.#l(),this):this}pause(){this.#i=!0}clear(){this.#t=new this.#m}async onEmpty(){this.#t.size!==0&&await this.#h("empty")}async onSizeLessThan(e){this.#t.size<e||await this.#h("next",()=>this.#t.size<e)}async onIdle(){this.#n===0&&this.#t.size===0||await this.#h("idle")}async#h(e,t){return new Promise(n=>{let i=()=>{t&&!t()||(this.off(e,i),n())};this.on(e,i)})}get size(){return this.#t.size}sizeBy(e){return this.#t.filter(e).length}get pending(){return this.#n}get isPaused(){return this.#i}};async function ff(r,e,t,n,i,o,s){if(e instanceof Uint8Array){let h=at(e,n,i,o);t.push(h);return}if(e.Data==null)throw(0,ft.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let a;try{a=C.unmarshal(e.Data)}catch(h){throw(0,ft.default)(h,"ERR_NOT_UNIXFS")}if(a.data!=null){let h=a.data,u=at(h,n,i,o);t.push(u),n+=BigInt(u.byteLength)}let c=[];if(e.Links.length!==a.blockSizes.length)throw(0,ft.default)(new Error("Inconsistent block sizes and dag links"),"ERR_NOT_UNIXFS");for(let h=0;h<e.Links.length;h++){let u=e.Links[h],l=n,p=l+a.blockSizes[h];if((i>=l&&i<p||o>=l&&o<=p||i<l&&o>p)&&c.push({link:u,blockStart:n}),n=p,n>o)break}await Te(c,h=>Lt(h,u=>async()=>{let l=await r.get(u.link.Hash,s);return{...u,block:l}}),h=>ct(h,{ordered:!0,concurrency:s.blockReadConcurrency}),async h=>{for await(let{link:u,block:l,blockStart:p}of h){let f;switch(u.Hash.code){case Y:f=M(l);break;case oe:f=l;break;default:t.end((0,ft.default)(new Error(`Unsupported codec: ${u.Hash.code}`),"ERR_NOT_UNIXFS"));return}let d=new Dr({concurrency:1});d.on("error",m=>{t.end(m)}),d.add(async()=>{s.onProgress?.(new $("unixfs:exporter:walk:file",{cid:u.Hash})),await ff(r,f,t,p,i,o,s)}),await d.onIdle()}}),n>=o&&t.end()}var E1=(r,e,t,n,i,o,s)=>{async function*a(c={}){let h=t.fileSize();if(h===void 0)throw new Error("File was a directory");let{start:u,end:l}=Ft(h,c.offset,c.length);if(l===0n)return;let p=0n,f=l-u,d=zt();c.onProgress?.(new $("unixfs:exporter:walk:file",{cid:r})),ff(s,e,d,0n,u,l,c).catch(m=>{d.end(m)});for await(let m of d)if(m!=null){if(p+=BigInt(m.byteLength),p>f)throw d.end(),(0,ft.default)(new Error("Read too many bytes - the file size reported by the UnixFS data in the root node may be incorrect"),"ERR_OVER_READ");p===f&&d.end(),c.onProgress?.(new $("unixfs:exporter:progress:unixfs:file",{bytesRead:p,totalBytes:f,fileSize:h})),yield m}if(p<f)throw(0,ft.default)(new Error("Traversed entire DAG but did not read enough bytes"),"ERR_UNDER_READ")}return a},_o=E1;var wn=z(q(),1);var v1=(r,e,t,n,i,o,s)=>{function a(c={}){return c.onProgress?.(new $("unixfs:exporter:walk:hamt-sharded-directory",{cid:r})),uf(e,n,i,o,s,c)}return a};async function*uf(r,e,t,n,i,o){let s=r.Links;if(r.Data==null)throw(0,wn.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let a;try{a=C.unmarshal(r.Data)}catch(u){throw(0,wn.default)(u,"ERR_NOT_UNIXFS")}if(a.fanout==null)throw(0,wn.default)(new Error("missing fanout"),"ERR_NOT_UNIXFS");let c=(a.fanout-1n).toString(16).length,h=Te(s,u=>Lt(u,l=>async()=>{let p=l.Name!=null?l.Name.substring(c):null;if(p!=null&&p!==""){let f=await t(l.Hash,p,`${e}/${p}`,[],n+1,i,o);return{entries:f.entry==null?[]:[f.entry]}}else{let f=await i.get(l.Hash,o);return r=M(f),o.onProgress?.(new $("unixfs:exporter:walk:hamt-sharded-directory",{cid:l.Hash})),{entries:uf(r,e,t,n,i,o)}}}),u=>ct(u,{ordered:!0,concurrency:o.blockReadConcurrency}));for await(let{entries:u}of h)yield*u}var lf=v1;var S1=(r,e)=>r.Links.find(n=>n.Name===e)?.Hash,k1={raw:_o,file:_o,directory:nf,"hamt-sharded-directory":lf,metadata:(r,e,t,n,i,o,s)=>()=>[],symlink:(r,e,t,n,i,o,s)=>()=>[]},B1=async(r,e,t,n,i,o,s,a)=>{let c=await s.get(r,a),h=M(c),u,l;if(e==null&&(e=r.toString()),h.Data==null)throw(0,Ur.default)(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{u=C.unmarshal(h.Data)}catch(f){throw(0,Ur.default)(f,"ERR_NOT_UNIXFS")}if(t==null&&(t=e),n.length>0){let f;if(u?.type==="hamt-sharded-directory"?f=await Zc(h,n[0],s):f=S1(h,n[0]),f==null)throw(0,Ur.default)(new Error("file does not exist"),"ERR_NOT_FOUND");let d=n.shift(),m=`${t}/${d}`;l={cid:f,toResolve:n,name:d??"",path:m}}let p=k1[u.type](r,h,u,t,i,o,s);if(p==null)throw(0,Ur.default)(new Error("could not find content exporter"),"ERR_NOT_FOUND");return u.isDirectory()?{entry:{type:"directory",name:e,path:t,cid:r,content:p,unixfs:u,depth:o,node:h,size:u.fileSize()},next:l}:{entry:{type:"file",name:e,path:t,cid:r,content:p,unixfs:u,depth:o,node:h,size:u.fileSize()},next:l}},hf=B1;var I1={[Y]:hf,[oe]:Kc,[Lc]:Hc,[Oc]:Gc,[li.code]:qc},pf=async(r,e,t,n,i,o,s)=>{let a=I1[r.code];if(a==null)throw(0,df.default)(new Error(`No resolver for code ${r.code}`),"ERR_NO_RESOLVER");return a(r,e,t,n,pf,i,o,s)},mf=pf;var C1=(r="")=>(r.trim().match(/([^\\^/]|\\\/)+/g)??[]).filter(Boolean),T1=r=>{if(r instanceof Uint8Array)return{cid:N.decode(r),toResolve:[]};let e=N.asCID(r);if(e!=null)return{cid:e,toResolve:[]};if(typeof r=="string"){r.indexOf("/ipfs/")===0&&(r=r.substring(6));let t=C1(r);return{cid:N.parse(t[0]),toResolve:t.slice(1)}}throw(0,bn.default)(new Error(`Unknown path type ${r}`),"ERR_BAD_PATH")};async function*N1(r,e,t={}){let{cid:n,toResolve:i}=T1(r),o=n.toString(),s=o,a=i.length;for(;;){let c=await mf(n,o,s,i,a,e,t);if(c.entry==null&&c.next==null)throw(0,bn.default)(new Error(`Could not resolve ${r}`),"ERR_NOT_FOUND");if(c.entry!=null&&(yield c.entry),c.next==null)return;i=c.next.toResolve,n=c.next.cid,o=c.next.name,s=c.next.path}}async function X(r,e,t={}){let n=await qe(N1(r,e,t));if(n==null)throw(0,bn.default)(new Error(`Could not resolve ${r}`),"ERR_NOT_FOUND");return n}async function*xn(r,e,t={}){let n=await X(r,e,t);if(n==null)return;if(yield n,n.type==="directory")for await(let o of i(n,t))yield o;async function*i(o,s){for await(let a of o.content(s))yield a,!(a instanceof Uint8Array)&&a.type==="directory"&&(yield*i(a,s))}}var vf=z(Ef(),1),Q=vf.default;var Se=class extends Error{name;code;constructor(e,t,n){super(e),this.name=t,this.code=n}},Ne=class extends Se{constructor(e="not a Unixfs node"){super(e,"NotUnixFSError","ERR_NOT_UNIXFS")}},re=class extends Se{constructor(e="invalid PBNode"){super(e,"InvalidPBNodeError","ERR_INVALID_PBNODE")}},De=class extends Se{constructor(e="unknown error"){super(e,"InvalidPBNodeError","ERR_UNKNOWN_ERROR")}},Fr=class extends Se{constructor(e="path already exists"){super(e,"AlreadyExistsError","ERR_ALREADY_EXISTS")}},En=class extends Se{constructor(e="path does not exist"){super(e,"DoesNotExistError","ERR_DOES_NOT_EXIST")}},$t=class extends Se{constructor(e="no content"){super(e,"NoContentError","ERR_NO_CONTENT")}},vn=class extends Se{constructor(e="not a file"){super(e,"NotAFileError","ERR_NOT_A_FILE")}},Xe=class extends Se{constructor(e="not a directory"){super(e,"NotADirectoryError","ERR_NOT_A_DIRECTORY")}},ee=class extends Se{constructor(e="invalid parameters"){super(e,"InvalidParametersError","ERR_INVALID_PARAMETERS")}};var de=z(Cf(),1);de.default.formatters.b=r=>r==null?"undefined":ge.baseEncode(r);de.default.formatters.t=r=>r==null?"undefined":Me.baseEncode(r);de.default.formatters.m=r=>r==null?"undefined":nr.baseEncode(r);de.default.formatters.p=r=>r==null?"undefined":r.toString();de.default.formatters.c=r=>r==null?"undefined":r.toString();de.default.formatters.k=r=>r==null?"undefined":r.toString();de.default.formatters.a=r=>r==null?"undefined":r.toString();function K1(r){let e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=r,e.destroy=()=>!0,e.extend=()=>e,e}function H(r){let e=K1(`${r}:trace`);return de.default.enabled(`${r}:trace`)&&de.default.names.map(t=>t.toString()).find(t=>t.includes(":trace"))!=null&&(e=(0,de.default)(`${r}:trace`)),Object.assign((0,de.default)(r),{error:(0,de.default)(`${r}:error`),trace:e})}var ko=z(qr(),1);function In(r){function e(t){return t instanceof Bn?t:new Bn(t,r)}return e}var Bn=class{_value;_hashFn;_depth;_availableBits;_currentBufferIndex;_buffers;constructor(e,t){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=t,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let t=e;for(;this._availableBits<t;)await this._produceMoreBits();let n=0;for(;t>0;){let i=this._buffers[this._currentBufferIndex],o=Math.min(i.availableBits(),t),s=i.take(o);n=(n<<o)+s,t-=o,this._availableBits-=o,i.availableBits()===0&&this._currentBufferIndex++}return n}untake(e){let t=e;for(;t>0;){let n=this._buffers[this._currentBufferIndex],i=Math.min(n.totalBits()-n.availableBits(),t);n.untake(i),t-=i,this._availableBits+=i,this._currentBufferIndex>0&&n.totalBits()===n.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;let e=this._depth>0?Xt([this._value,Uint8Array.from([this._depth])]):this._value,t=await this._hashFn(e),n=new Eo(t);this._buffers.push(n),this._availableBits+=n.availableBits()}},X1=[255,254,252,248,240,224,192,128],J1=[1,3,7,15,31,63,127,255],Eo=class{_value;_currentBytePos;_currentBitPos;constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let t=e,n=0;for(;t>0&&this._haveBits();){let i=this._value[this._currentBytePos],o=this._currentBitPos+1,s=Math.min(o,t),a=Z1(i,o-s,s);n=(n<<s)+a,t-=s,this._currentBitPos-=s,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return n}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function Z1(r,e,t){let n=Q1(e,t);return(r&n)>>>e}function Q1(r,e){return X1[r]&J1[Math.min(e+r-1,7)]}var Lr=BigInt(it.code),lt=8;async function jt(r){return(await it.encode(r)).subarray(0,8).reverse()}var Df=z(qr(),1);var ke=async(r,e,t)=>{t.codec==null&&(t.codec=j);let n=await se.digest(r),i=N.create(t.cidVersion,t.codec.code,n);return await e.put(i,r,{...t,signal:t.signal}),i};var vo=class{options;root;dir;path;dirty;flat;parent;parentKey;unixfs;mode;mtime;cid;size;nodeSize;constructor(e,t){this.options=t??{},this.root=e.root,this.dir=e.dir,this.path=e.path,this.dirty=e.dirty,this.flat=e.flat,this.parent=e.parent,this.parentKey=e.parentKey,this.unixfs=e.unixfs,this.mode=e.mode,this.mtime=e.mtime}},Cn=class extends vo{_bucket;constructor(e,t){super(e,t),this._bucket=kt({hashFn:jt,bits:8})}async put(e,t){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,await this._bucket.put(e,t)}async get(e){return this._bucket.get(e)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(let{key:e,value:t}of this._bucket.eachLeafSeries())yield{key:e,child:t}}estimateNodeSize(){return this.nodeSize!==void 0?this.nodeSize:(this.nodeSize=Nf(this._bucket,this,this.options),this.nodeSize)}async*flush(e){for await(let t of Tf(this._bucket,e,this,this.options))yield{...t,path:this.path}}};async function*Tf(r,e,t,n){let i=r._children,o=[],s=0n;for(let f=0;f<i.length;f++){let d=i.get(f);if(d==null)continue;let m=f.toString(16).toUpperCase().padStart(2,"0");if(d instanceof ae){let _;for await(let g of Tf(d,e,null,n))_=g;if(_==null)throw new Error("Could not flush sharded directory, no subshard found");o.push({Name:m,Tsize:Number(_.size),Hash:_.cid}),s+=_.size}else if(e0(d.value)){let _=d.value,g;for await(let x of _.flush(e))g=x,yield g;if(g==null)throw new Error("Did not flush dir");let w=m+d.key;o.push({Name:w,Tsize:Number(g.size),Hash:g.cid}),s+=g.size}else{let _=d.value;if(_.cid==null)continue;let g=m+d.key,w=_.size;o.push({Name:g,Tsize:Number(w),Hash:_.cid}),s+=BigInt(w??0)}}let a=Uint8Array.from(i.bitField().reverse()),c=new C({type:"hamt-sharded-directory",data:a,fanout:BigInt(r.tableSize()),hashType:Lr,mtime:t?.mtime,mode:t?.mode}),h={Data:c.marshal(),Links:o},u=U(O(h)),l=await ke(u,e,n),p=BigInt(u.byteLength)+s;yield{cid:l,unixfs:c,size:p}}function e0(r){return typeof r.flush=="function"}function Nf(r,e,t){let n=r._children,i=[];for(let c=0;c<n.length;c++){let h=n.get(c);if(h==null)continue;let u=c.toString(16).toUpperCase().padStart(2,"0");if(h instanceof ae){let l=Nf(h,null,t);i.push({Name:u,Tsize:Number(l),Hash:t.cidVersion===0?Tn:Nn})}else if(typeof h.value.flush=="function"){let p=h.value.nodeSize();i.push({Name:u+h.key,Tsize:Number(p),Hash:t.cidVersion===0?Tn:Nn})}else{let l=h.value;if(l.cid==null)continue;let p=u+h.key,f=l.size;i.push({Name:p,Tsize:Number(f),Hash:l.cid})}}let o=Uint8Array.from(n.bitField().reverse()),s=new C({type:"hamt-sharded-directory",data:o,fanout:BigInt(r.tableSize()),hashType:Lr,mtime:e?.mtime,mode:e?.mode});return U(O({Data:s.marshal(),Links:i})).length}var Tn=N.parse("QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn"),Nn=N.parse("zdj7WbTaiJT1fgatdet9Ei9iDB5hdCxkbVyhyh8YTUnXMiwYi");var So=H("helia:unixfs:commands:utils:hamt-utils"),Dn=r=>r.toString(16).toUpperCase().padStart(2,"0").substring(0,2),Uf=async(r,e,t)=>{let n=new Cn({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:t.mtime,mode:t.mode},t);for(let o=0;o<e.length;o++)await n._bucket.put(e[o].name,{size:e[o].size,cid:e[o].cid});let i=await qe(n.flush(r));if(i==null)throw new Error("Flushing shard yielded no result");return i},Un=async(r,e,t)=>{let n=C.unmarshal(r[0].node.Data??new Uint8Array(0)),i=BigInt(Math.pow(2,lt));r.reverse();let o,s;for(let a=0;a<r.length;a++){let c=a===r.length-1,h=r[a],u=Uint8Array.from(h.children.bitField().reverse()),l=new C({type:"hamt-sharded-directory",data:u,fanout:i,hashType:Lr});c&&(l.mtime=n.mtime,l.mode=n.mode),s={Data:l.marshal(),Links:h.node.Links};let p=U(O(s));if(o=await ke(p,e,t),!c){let f=r[a+1];if(f==null)throw new Error("Was not operating on shard root but also had no parent?");So("updating link in parent sub-shard with prefix %s",f.prefix),f.node.Links=f.node.Links.filter(d=>d.Name!==f.prefix),f.node.Links.push({Name:f.prefix,Hash:o,Tsize:h.node.Links.reduce((d,m)=>d+(m.Tsize??0),p.byteLength)})}}if(o==null||s==null)throw new Error("Noting persisted");return{cid:o,node:s}},Fn=async(r,e,t,n)=>{let o=In(jt)(je(e)),s=[];for(;;){let a=await t.get(r,n),c=M(a),h=new Df.default,u=await o.take(lt),l=Dn(u);s.push({prefix:l,children:h,node:c});let p;for(let d of c.Links){let m=d.Name??"";if(m.length<2)throw new Error("Invalid HAMT - link name was too short");let _=parseInt(m.substring(0,2),16);h.set(_,!0),m.startsWith(l)&&(p=d)}if(p==null){So("no link found with prefix %s for %s",l,e);break}let f=p.Name??"";if(f.length<2)throw new Error("Invalid HAMT - link name was too short");if(f.length===2){r=p.Hash,So("descend into sub-shard with prefix %s",f);continue}break}return{path:s,hash:o}};async function Ln(r,e,t,n){if(r.Data==null)throw new Error("DagPB node had no data");let i=C.unmarshal(r.Data),o;if(i.type==="directory")o=t0(r);else if(i.type==="hamt-sharded-directory")o=await Ff(r,0,t,e,n);else throw new Error("Can only estimate the size of directories or shards");return o>t}function t0(r){let e=0;for(let t of r.Links)e+=(t.Name??"").length,e+=t.Hash.version===1?Nn.bytes.byteLength:Tn.bytes.byteLength;return e}async function Ff(r,e,t,n,i){if(e>t)return t;if(r.Data==null||!C.unmarshal(r.Data).isDirectory())return e;for(let s of r.Links){let a=s.Name??"";if(a=a.substring(2),e+=a.length,e+=s.Hash.bytes.byteLength,s.Hash.code===Y){let c=await n.get(s.Hash,i),h=M(c);e+=await Ff(h,e,t,n,i)}}return e}var Ue=H("helia:unixfs:components:utils:add-link");async function Gt(r,e,t,n){if(r.node.Data==null)throw new ee("Invalid parent passed to addLink");if(C.unmarshal(r.node.Data).type==="hamt-sharded-directory")return Ue("adding link to sharded directory"),i0(r,e,t,n);Ue(`adding ${e.Name} (${e.Hash}) to regular directory`);let o=await n0(r,e,t,n);if(await Ln(o.node,t,n.shardSplitThresholdBytes,n)){Ue("converting directory to sharded directory");let s=await r0(o,t);o.cid=s.cid,o.node=M(await t.get(s.cid,n))}return o}var r0=async(r,e)=>{if(r.node.Data==null)throw new ee("Invalid parent passed to convertToShardedDirectory");let t=C.unmarshal(r.node.Data),n=await Uf(e,r.node.Links.map(i=>({name:i.Name??"",size:BigInt(i.Tsize??0),cid:i.Hash})),{mode:t.mode,mtime:t.mtime,cidVersion:r.cid.version});return Ue(`converted directory to sharded directory ${n.cid}`),n},n0=async(r,e,t,n)=>{let i=r.node.Links.filter(u=>{let l=u.Name===e.Name;if(l&&!n.allowOverwriting)throw new Fr;return!l});if(i.push(e),r.node.Data==null)throw new re("Parent node with no data passed to addToDirectory");let o=C.unmarshal(r.node.Data),s;if(o.mtime!=null){let u=Date.now(),l=Math.floor(u/1e3);o.mtime={secs:BigInt(l),nsecs:(u-l*1e3)*1e3},s=o.marshal()}else s=r.node.Data;r.node=O({Data:s,Links:i});let a=U(r.node),c=await se.digest(a),h=N.create(r.cid.version,Y,c);return await t.put(h,a),{node:r.node,cid:h}},i0=async(r,e,t,n)=>{let{path:i,hash:o}=await Fn(r.cid,e.Name,t,n),s=i[i.length-1];if(s==null)throw new Error("Invalid HAMT, could not generate path");let a=s.prefix,c=parseInt(a,16);Ue("next prefix for %s is %s",e.Name,a);let h=`${a}${e.Name}`,u=s.node.Links.find(l=>(l.Name??"").startsWith(a));if(u!=null)if(Ue("link %s was present in shard",h),u.Name===h){if(!n.allowOverwriting)throw new Fr;Ue("overwriting %s in subshard",e.Name),s.node.Links=s.node.Links.filter(l=>l.Name!==h),s.node.Links.push({Name:h,Hash:e.Hash,Tsize:e.Tsize})}else{if(u.Name?.length===2)throw new Error("Existing link was subshard?!");{Ue("prefix %s already exists, creating new subshard",a);let l=s.node.Links.findIndex(_=>_.Name?.startsWith(a)),p=s.node.Links.splice(l,1)[0],f=(p.Name??"").substring(2),m=In(jt)(je(f));for(let _=0;_<i.length;_++)await m.take(lt);for(;;){let _=await m.take(lt),g=Dn(_);p.Name=`${g}${f}`;let w=await o.take(lt),x=Dn(w);if(g===x){let B=new ko.default;B.set(w,!0),i.push({prefix:x,children:B,node:{Links:[]}});continue}let A=new ko.default;A.set(w,!0),A.set(_,!0),i.push({prefix:a,children:A,node:{Links:[p,{Name:`${x}${e.Name}`,Hash:e.Hash,Tsize:e.Tsize}]}});break}}}else Ue("link %s was not present in sub-shard",h),e.Name=h,s.node.Links.push(e),s.children.set(c,!0),Ue("adding %s to existing sub-shard",h);return Un(i,t,n)};async function Je(r,e,t={}){let n=await X(r,e,t);if(n.type!=="directory")throw new Xe(`${r.toString()} was not a UnixFS directory`);return{cid:r,node:n.node}}async function Wt(r,e,t,n){let i=await X(r,t,n);if(i.type!=="directory"&&i.type!=="file"&&i.type!=="raw")throw new Ne(`${r.toString()} was not a UnixFS node`);return{Name:e,Tsize:i.node instanceof Uint8Array?i.node.byteLength:o0(i.node),Hash:r}}function o0(r){let e=r.Links.reduce((t,n)=>t+(n.Tsize??0),0);return U(r).byteLength+e}var Bo=H("helia:unixfs:components:utils:resolve");async function Fe(r,e,t,n){if(e==null||e==="")return{cid:r};Bo('resolve "%s" under %c',e,r);let i=e.split("/").filter(Boolean),o=[{name:"",cid:r,size:0n}];for(let s=0;s<i.length;s++){let a=i[s],c=await X(r,t,n);if(Bo('resolving "%s"',a,c),c.type==="file"){if(s<i.length-1)throw new ee("Path was invalid");r=c.cid}else if(c.type==="directory"){let h;for await(let u of c.content())if(u.name===a){h=u.cid;break}if(h==null)throw new En("Could not find path in directory");r=h,o.push({name:a,cid:r,size:c.size})}else throw new ee("Could not resolve path")}return Bo("resolved %s to %c",e,r),{cid:r,path:e,segments:o}}async function qt(r,e,t,n){if(e.segments==null||e.segments.length===0)return r;let i=e.segments.pop();if(i==null)throw new Error("Insufficient segments");i.cid=r,e.segments.reverse();for(let o of e.segments){let[s,a]=await Promise.all([Je(o.cid,t,n),Wt(i.cid,i.name,t,n)]);r=(await Gt(s,a,t,{...n,allowOverwriting:!0,cidVersion:r.version})).cid,o.cid=r,i=o}return r}var s0=Q.bind({ignoreUndefined:!0}),a0={};async function*Lf(r,e,t={}){let n=s0(a0,t),i=await Fe(r,n.path,e,n),o=await X(i.cid,e,n);if(o.type!=="file"&&o.type!=="raw")throw new vn;if(o.content==null)throw new $t;yield*o.content(n)}var c0=Q.bind({ignoreUndefined:!0}),f0=H("helia:unixfs:chmod"),u0={recursive:!1,shardSplitThresholdBytes:262144};async function Pf(r,e,t,n={}){let i=c0(u0,n),o=await Fe(r,i.path,t,n);if(f0("chmod %c %d",o.cid,e),i.recursive){let p=await Te(async function*(){for await(let f of xn(o.cid,t,n)){let d,m=[];if(f.type==="raw")d=new C({type:"file",data:f.node});else if(f.type==="file"||f.type==="directory")d=f.unixfs,m=f.node.Links;else throw new Ne;d.mode=e;let _={Data:d.marshal(),Links:m};yield{path:f.path,content:_}}},f=>We(f,t,{...i,dagBuilder:async function*(d,m){for await(let _ of d)yield async function(){let g=_.content,w=U(g),x=await ke(w,m,{...i,cidVersion:r.version});if(g.Data==null)throw new re(`${x} had no data`);let A=C.unmarshal(g.Data);return{cid:x,size:BigInt(w.length),path:_.path,unixfs:A}}}}),async f=>qe(f));if(p==null)throw new De(`Could not chmod ${o.cid.toString()}`);return qt(p.cid,o,t,i)}let s=await t.get(o.cid,n),a,c=[];if(o.cid.code===oe)a=new C({type:"file",data:s});else{let p=M(s);if(p.Data==null)throw new re(`${o.cid.toString()} had no data`);c=p.Links,a=C.unmarshal(p.Data)}a.mode=e;let h=U({Data:a.marshal(),Links:c}),u=await se.digest(h),l=N.create(o.cid.version,Y,u);return await t.put(l,h),qt(l,o,t,i)}var l0=Q.bind({ignoreUndefined:!0}),h0=H("helia:unixfs:cp"),d0={force:!1,shardSplitThresholdBytes:262144};async function zf(r,e,t,n,i={}){let o=l0(d0,i);if(t.includes("/"))throw new ee("Name must not have slashes");let[s,a]=await Promise.all([Je(e,n,o),Wt(r,t,n,o)]);return h0('Adding %c as "%s" to %c',r,t,e),(await Gt(s,a,n,{allowOverwriting:o.force,cidVersion:e.version,...o})).cid}var p0=Q.bind({ignoreUndefined:!0}),m0={};async function*Rf(r,e,t={}){let n=p0(m0,t),i=await Fe(r,n.path,e,n),o=await X(i.cid,e);if(o.type==="file"||o.type==="raw"){yield o;return}if(o.content==null)throw new $t;if(o.type!=="directory")throw new Xe;yield*o.content({offset:t.offset,length:t.length})}var y0=Q.bind({ignoreUndefined:!0}),Of=H("helia:unixfs:mkdir"),g0={cidVersion:1,force:!1,shardSplitThresholdBytes:262144};async function $f(r,e,t,n={}){let i=y0(g0,n);if(e.includes("/"))throw new ee("Path must not have slashes");if((await X(r,t,n)).type!=="directory")throw new Xe(`${r.toString()} was not a UnixFS directory`);Of("creating %s",e);let a={Data:new C({type:"directory",mode:i.mode,mtime:i.mtime}).marshal(),Links:[]},c=U(a),h=await se.digest(c),u=N.create(i.cidVersion,Y,h);await t.put(u,c);let[l,p]=await Promise.all([Je(r,t,i),Wt(u,e,t,i)]);return Of("adding empty dir called %s to %c",e,r),(await Gt(l,p,t,{...i,allowOverwriting:i.force})).cid}var Pn=H("helia:unixfs:utils:remove-link");async function Vf(r,e,t,n){if(r.node.Data==null)throw new re("Parent node had no data");if(C.unmarshal(r.node.Data).type==="hamt-sharded-directory"){Pn(`removing ${e} from sharded directory`);let o=await b0(r,e,t,n);return await Ln(o.node,t,n.shardSplitThresholdBytes,n)?o:(Pn("converting shard to flat directory %c",r.cid),x0(o,t,n))}return Pn(`removing link ${e} regular directory`),w0(r,e,t,n)}var w0=async(r,e,t,n)=>{r.node.Links=r.node.Links.filter(s=>s.Name!==e);let i=U(r.node),o=await ke(i,t,{...n,cidVersion:r.cid.version});return Pn(`Updated regular directory ${o}`),{node:r.node,cid:o}},b0=async(r,e,t,n)=>{let{path:i}=await Fn(r.cid,e,t,n),o=i[i.length-1];if(o==null)throw new Error("Invalid HAMT, could not generate path");let s=o.node.Links.filter(h=>(h.Name??"").substring(2)===e).map(h=>h.Name).pop();if(s==null)throw new Error("File not found");let a=s.substring(0,2),c=parseInt(a,16);if(o.node.Links=o.node.Links.filter(h=>h.Name!==s),o.children.unset(c),o.node.Links.length===1)for(;i.length!==1;){let h=i[i.length-1];if(h==null||h.node.Links.length>1)break;i.pop();let u=i[i.length-1];if(u==null)break;let l=h.node.Links[0];u.node.Links=u.node.Links.filter(p=>!(p.Name??"").startsWith(u.prefix)),u.node.Links.push({Hash:l.Hash,Name:`${u.prefix}${(l.Name??"").substring(2)}`,Tsize:l.Tsize})}return Un(i,t,n)},x0=async(r,e,t)=>{if(r.node.Data==null)throw new ee("Invalid parent passed to convertToFlatDirectory");let n={Links:[]},i=await X(r.cid,e);if(i.type!=="directory")throw new Error("Unexpected node type");for await(let c of i.content()){let h=0;c.node instanceof Uint8Array?h=c.node.byteLength:h=U(c.node).length,n.Links.push({Hash:c.cid,Name:c.name,Tsize:h})}let o=C.unmarshal(r.node.Data);n.Data=new C({type:"directory",mode:o.mode,mtime:o.mtime}).marshal();let s=U(O(n));return{cid:await ke(s,e,{codec:j,cidVersion:r.cid.version,signal:t.signal}),node:n}};var _0=Q.bind({ignoreUndefined:!0}),A0=H("helia:unixfs:rm"),E0={shardSplitThresholdBytes:262144};async function Mf(r,e,t,n={}){let i=_0(E0,n);if(e.includes("/"))throw new ee("Name must not have slashes");let o=await Je(r,t,i);return A0("Removing %s from %c",e,r),(await Vf(o,e,t,{...i,cidVersion:r.version})).cid}var v0=Q.bind({ignoreUndefined:!0}),S0=H("helia:unixfs:stat"),k0={};async function Hf(r,e,t={}){let n=v0(k0,t),i=await Fe(r,t.path,e,n);S0("stat %c",i.cid);let o=await X(i.cid,e,n);if(o.type!=="file"&&o.type!=="directory"&&o.type!=="raw")throw new Ne;let s=0n,a=0n,c=0n,h=0n,u=0,l,p,f=o.type,d;if(o.type==="raw"&&(s=BigInt(o.node.byteLength),a=BigInt(o.node.byteLength),c=BigInt(o.node.byteLength),h=BigInt(o.node.byteLength),u=1),o.type==="directory"&&(s=0n,a=BigInt(o.unixfs.marshal().byteLength),c=0n,h=a,u=1,l=o.unixfs.mode,p=o.unixfs.mtime,d=o.unixfs),o.type==="file"){let m=await jf(i.cid,e,n);s=o.unixfs.fileSize(),a=BigInt((o.node.Data?.byteLength??0)+o.node.Links.reduce((_,g)=>_+(g.Tsize??0),0)),c=BigInt(m.localFileSize),h=BigInt(m.localDagSize),u=m.blocks,l=o.unixfs.mode,p=o.unixfs.mtime,d=o.unixfs}return{cid:i.cid,mode:l,mtime:p,fileSize:s,dagSize:a,localFileSize:c,localDagSize:h,blocks:u,type:f,unixfs:d}}async function jf(r,e,t){let n={localFileSize:0,localDagSize:0,blocks:0};if(await e.has(r,t)){let i=await e.get(r,t);if(n.blocks++,n.localDagSize+=i.byteLength,r.code===oe)n.localFileSize+=i.byteLength;else if(r.code===Y){let o=M(i);if(o.Links.length>0)for(let s of o.Links){let a=await jf(s.Hash,e,t);n.localFileSize+=a.localFileSize,n.localDagSize+=a.localDagSize,n.blocks+=a.blocks}else{if(o.Data==null)throw new re(`PBNode ${r.toString()} had no data`);let s=C.unmarshal(o.Data);if(s.data==null)throw new re(`UnixFS node ${r.toString()} had no data`);n.localFileSize+=s.data.byteLength??0}}else throw new De(`${r.toString()} was neither DAG_PB nor RAW`)}return n}var B0=Q.bind({ignoreUndefined:!0}),I0=H("helia:unixfs:touch"),C0={recursive:!1,shardSplitThresholdBytes:262144};async function Gf(r,e,t={}){let n=B0(C0,t),i=await Fe(r,n.path,e,n),o=n.mtime??{secs:BigInt(Math.round(Date.now()/1e3)),nsecs:0};if(I0("touch %c %o",i.cid,o),n.recursive){let p=await Te(async function*(){for await(let f of xn(i.cid,e)){let d,m;if(f.type==="raw")d=new C({data:f.node}),m=[];else if(f.type==="file"||f.type==="directory")d=f.unixfs,m=f.node.Links;else throw new Ne;d.mtime=o;let _={Data:d.marshal(),Links:m};yield{path:f.path,content:_}}},f=>We(f,e,{...n,dagBuilder:async function*(d,m){for await(let _ of d)yield async function(){let g=_.content,w=U(g),x=await ke(w,m,{...n,cidVersion:r.version});if(g.Data==null)throw new re(`${x} had no data`);let A=C.unmarshal(g.Data);return{cid:x,size:BigInt(w.length),path:_.path,unixfs:A}}}}),async f=>qe(f));if(p==null)throw new De(`Could not chmod ${i.cid.toString()}`);return qt(p.cid,i,e,n)}let s=await e.get(i.cid,t),a,c=[];if(i.cid.code===oe)a=new C({data:s});else{let p=M(s);if(c=p.Links,p.Data==null)throw new re(`${i.cid.toString()} had no data`);a=C.unmarshal(p.Data)}a.mtime=o;let h=U({Data:a.marshal(),Links:c}),u=await se.digest(h),l=N.create(i.cid.version,Y,u);return await e.put(l,h),qt(l,i,e,n)}function Wf(r,e){return{path:decodeURIComponent(new URL(r).pathname.split("/").pop()??""),content:T0(r,e)}}async function*T0(r,e){let t=await globalThis.fetch(r,e);if(t.body==null)throw new De("HTTP response did not have a body");let n=t.body.getReader();try{for(;;){let{done:i,value:o}=await n.read();if(i)return;o!=null&&(yield o)}}finally{n.releaseLock()}}var Io=class{components;constructor(e){this.components=e}async*addAll(e,t={}){yield*Ca(e,this.components.blockstore,t)}async addBytes(e,t={}){return Ta(e,this.components.blockstore,t)}async addByteStream(e,t={}){return Na(e,this.components.blockstore,t)}async addFile(e,t={}){return Da(e,this.components.blockstore,t)}async addDirectory(e={},t={}){return Ua(e,this.components.blockstore,t)}async*cat(e,t={}){yield*Lf(e,this.components.blockstore,t)}async chmod(e,t,n={}){return Pf(e,t,this.components.blockstore,n)}async cp(e,t,n,i={}){return zf(e,t,n,this.components.blockstore,i)}async*ls(e,t={}){yield*Rf(e,this.components.blockstore,t)}async mkdir(e,t,n={}){return $f(e,t,this.components.blockstore,n)}async rm(e,t,n={}){return Mf(e,t,this.components.blockstore,n)}async stat(e,t={}){return Hf(e,this.components.blockstore,t)}async touch(e,t={}){return Gf(e,this.components.blockstore,t)}};function N0(r){return new Io(r)}return Qf(D0);})();
return HeliaUnixfs}));
