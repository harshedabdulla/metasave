{"abi":[{"type":"function","name":"RULES_ENGINE_STORAGE_POSITION","inputs":[],"outputs":[{"name":"","type":"bytes32","internalType":"bytes32"}],"stateMutability":"view"}],"bytecode":{"object":"0x60a6610038600b82828239805160001a607314602b57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe730000000000000000000000000000000000000000301460806040526004361060335760003560e01c8063ac93ae44146038575b600080fd5b605e7f41d4cb087b2c44a761b2288e4c8ac115e76a546efd837c9a2e9cec2661a49a0081565b60405190815260200160405180910390f3fea26469706673582212202cf70cdaa7f773a79647b2d1c66e7922f6ed8e25898cba3c59ca7754d171061f64736f6c63430008170033","sourceMap":"380:690:188:-:0;;;;;;;;;;;;;;;-1:-1:-1;;;380:690:188;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x730000000000000000000000000000000000000000301460806040526004361060335760003560e01c8063ac93ae44146038575b600080fd5b605e7f41d4cb087b2c44a761b2288e4c8ac115e76a546efd837c9a2e9cec2661a49a0081565b60405190815260200160405180910390f3fea26469706673582212202cf70cdaa7f773a79647b2d1c66e7922f6ed8e25898cba3c59ca7754d171061f64736f6c63430008170033","sourceMap":"380:690:188:-:0;;;;;;;;;;;;;;;;;;;;;;;;584:130;;648:66;584:130;;;;;168:25:829;;;156:2;141:18;584:130:188;;;;;;","linkReferences":{}},"methodIdentifiers":{"RULES_ENGINE_STORAGE_POSITION()":"ac93ae44"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.23+commit.f704f362\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"RULES_ENGINE_STORAGE_POSITION\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"stateVariables\":{\"RULES_ENGINE_STORAGE_POSITION\":{\"custom:storage-location\":\"erc7201:rules.engine.storage\",\"details\":\"keccak256(abi.encode(uint256(keccak256(\\\"rules.engine.storage\\\")) - 1)) & ~bytes32(uint256(0xff))\"}},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/extension/upgradeable/RulesEngine.sol\":\"RulesEngineStorage\"},\"evmVersion\":\"london\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":20},\"remappings\":[\":@chainlink/=lib/chainlink/\",\":@ds-test/=lib/ds-test/src/\",\":@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/\",\":@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/\",\":@std/=lib/forge-std/src/\",\":@thirdweb-dev/dynamic-contracts/=lib/dynamic-contracts/\",\":ERC721A-Upgradeable/=lib/ERC721A-Upgradeable/contracts/\",\":ERC721A/=lib/ERC721A/contracts/\",\":chainlink/=lib/chainlink/contracts/\",\":contracts/=contracts/\",\":ds-test/=lib/ds-test/src/\",\":dynamic-contracts/=lib/dynamic-contracts/src/\",\":erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/\",\":erc721a-upgradeable/=lib/ERC721A-Upgradeable/\",\":erc721a/=lib/ERC721A/\",\":forge-std/=lib/forge-std/src/\",\":lib/sstore2/=lib/dynamic-contracts/lib/sstore2/\",\":openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin/=lib/openzeppelin-contracts-upgradeable/contracts/\",\":sstore2/=lib/dynamic-contracts/lib/sstore2/contracts/\"]},\"sources\":{\"contracts/eip/interface/IERC1155.sol\":{\"keccak256\":\"0x19b9bee642c1b8e21c412a90fd08784dad7f567651edbe72bebf70d16551a2f4\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://9c3f49fddb363032b69842d35cfc2aa72c8a36f3db2bed1e9bad3fc486b96df5\",\"dweb:/ipfs/QmQ5tn1fboZBmXWDXRfBMGJqYS9FtaQC8NYHaCiJapaJLF\"]},\"contracts/eip/interface/IERC20.sol\":{\"keccak256\":\"0x458d6ffd4d79153b9bfca794efa8169bbb942b47723153e6d2b0051e2cd9dcf1\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://a08cdc1bfc92ed80fc6686fb51a018b896ee862ac9fa1a1599b3fa0198760ce8\",\"dweb:/ipfs/QmTxqXNnbht1GfzkTAKpQnpZdEADS9YXZdE8Cdr6cSJrNP\"]},\"contracts/eip/interface/IERC20Metadata.sol\":{\"keccak256\":\"0xc2500d7a12573fc6f9714d806bec722ad4110a68e6dd14b69903042421001734\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://02423735619f14f3a13fae0ad6e407385565f159ad956c8bd1c14b3605a73a65\",\"dweb:/ipfs/QmYfYWh5wGidaQ7qDbC8oSuQ3gsnd3moJbWZ8yBzMnrYz1\"]},\"contracts/eip/interface/IERC721.sol\":{\"keccak256\":\"0x00754fd93079350acb6b1d0451320cc4b4252bf7990aa39cde29abb5ca4a60ea\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://c91392521b426c02b342d4ba0f2c5cad2c6074e1be90203c9525751dd23b36bf\",\"dweb:/ipfs/QmNjjCttJ9A39HMn3FTMqjQN5y7UoQrPUhQ7Nd8Ci7jFZj\"]},\"contracts/extension/interface/IRulesEngine.sol\":{\"keccak256\":\"0x8fe3dd345130a94008bdb46fb13a40eb6e2df9cf8261893103f18f548d8d511d\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://869bef4d59679ff81e361e97ef4973e7c9b1676aa52c5a332d292360a2f355ff\",\"dweb:/ipfs/QmeuGoVkJ9EynTsaXM3XkB7ME6BFqNDvynDuLAsfKjiTTv\"]},\"contracts/extension/upgradeable/RulesEngine.sol\":{\"keccak256\":\"0x8da8814c1a632b61e60b0e6fa5da2f5a4f6986c330165926c3f1f1a3248cc6f0\",\"license\":\"Apache-2.0\",\"urls\":[\"bzz-raw://2b28feeef26e616fbfd62e96c1d6843e39d6c2bbd28379c5b732934d655a1045\",\"dweb:/ipfs/QmY6GVGBSi2cDYRtqPGPoCE8StwqywsmskMdyt4CnxDyDS\"]},\"contracts/external-deps/openzeppelin/utils/structs/EnumerableSet.sol\":{\"keccak256\":\"0x5050943b32b6a8f282573d166b2e9d87ab7eb4dbba4ab6acf36ecb54fe6995e4\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://d4831d777a29ebdf9f2caecd70e74b97bff1b70e53622fd0a02aed01e21c8271\",\"dweb:/ipfs/QmUqurVVnCc7XkMxb2k23TVQUtuhHZduJ3hTZarTJrqU24\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.23+commit.f704f362"},"language":"Solidity","output":{"abi":[{"inputs":[],"stateMutability":"view","type":"function","name":"RULES_ENGINE_STORAGE_POSITION","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}]}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["@chainlink/=lib/chainlink/","@ds-test/=lib/ds-test/src/","@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/","@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/","@std/=lib/forge-std/src/","@thirdweb-dev/dynamic-contracts/=lib/dynamic-contracts/","ERC721A-Upgradeable/=lib/ERC721A-Upgradeable/contracts/","ERC721A/=lib/ERC721A/contracts/","chainlink/=lib/chainlink/contracts/","contracts/=contracts/","ds-test/=lib/ds-test/src/","dynamic-contracts/=lib/dynamic-contracts/src/","erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/","erc721a-upgradeable/=lib/ERC721A-Upgradeable/","erc721a/=lib/ERC721A/","forge-std/=lib/forge-std/src/","lib/sstore2/=lib/dynamic-contracts/lib/sstore2/","openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/","openzeppelin-contracts/=lib/openzeppelin-contracts/","openzeppelin/=lib/openzeppelin-contracts-upgradeable/contracts/","sstore2/=lib/dynamic-contracts/lib/sstore2/contracts/"],"optimizer":{"enabled":true,"runs":20},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"contracts/extension/upgradeable/RulesEngine.sol":"RulesEngineStorage"},"evmVersion":"london","libraries":{}},"sources":{"contracts/eip/interface/IERC1155.sol":{"keccak256":"0x19b9bee642c1b8e21c412a90fd08784dad7f567651edbe72bebf70d16551a2f4","urls":["bzz-raw://9c3f49fddb363032b69842d35cfc2aa72c8a36f3db2bed1e9bad3fc486b96df5","dweb:/ipfs/QmQ5tn1fboZBmXWDXRfBMGJqYS9FtaQC8NYHaCiJapaJLF"],"license":"Apache-2.0"},"contracts/eip/interface/IERC20.sol":{"keccak256":"0x458d6ffd4d79153b9bfca794efa8169bbb942b47723153e6d2b0051e2cd9dcf1","urls":["bzz-raw://a08cdc1bfc92ed80fc6686fb51a018b896ee862ac9fa1a1599b3fa0198760ce8","dweb:/ipfs/QmTxqXNnbht1GfzkTAKpQnpZdEADS9YXZdE8Cdr6cSJrNP"],"license":"Apache-2.0"},"contracts/eip/interface/IERC20Metadata.sol":{"keccak256":"0xc2500d7a12573fc6f9714d806bec722ad4110a68e6dd14b69903042421001734","urls":["bzz-raw://02423735619f14f3a13fae0ad6e407385565f159ad956c8bd1c14b3605a73a65","dweb:/ipfs/QmYfYWh5wGidaQ7qDbC8oSuQ3gsnd3moJbWZ8yBzMnrYz1"],"license":"Apache-2.0"},"contracts/eip/interface/IERC721.sol":{"keccak256":"0x00754fd93079350acb6b1d0451320cc4b4252bf7990aa39cde29abb5ca4a60ea","urls":["bzz-raw://c91392521b426c02b342d4ba0f2c5cad2c6074e1be90203c9525751dd23b36bf","dweb:/ipfs/QmNjjCttJ9A39HMn3FTMqjQN5y7UoQrPUhQ7Nd8Ci7jFZj"],"license":"MIT"},"contracts/extension/interface/IRulesEngine.sol":{"keccak256":"0x8fe3dd345130a94008bdb46fb13a40eb6e2df9cf8261893103f18f548d8d511d","urls":["bzz-raw://869bef4d59679ff81e361e97ef4973e7c9b1676aa52c5a332d292360a2f355ff","dweb:/ipfs/QmeuGoVkJ9EynTsaXM3XkB7ME6BFqNDvynDuLAsfKjiTTv"],"license":"Apache-2.0"},"contracts/extension/upgradeable/RulesEngine.sol":{"keccak256":"0x8da8814c1a632b61e60b0e6fa5da2f5a4f6986c330165926c3f1f1a3248cc6f0","urls":["bzz-raw://2b28feeef26e616fbfd62e96c1d6843e39d6c2bbd28379c5b732934d655a1045","dweb:/ipfs/QmY6GVGBSi2cDYRtqPGPoCE8StwqywsmskMdyt4CnxDyDS"],"license":"Apache-2.0"},"contracts/external-deps/openzeppelin/utils/structs/EnumerableSet.sol":{"keccak256":"0x5050943b32b6a8f282573d166b2e9d87ab7eb4dbba4ab6acf36ecb54fe6995e4","urls":["bzz-raw://d4831d777a29ebdf9f2caecd70e74b97bff1b70e53622fd0a02aed01e21c8271","dweb:/ipfs/QmUqurVVnCc7XkMxb2k23TVQUtuhHZduJ3hTZarTJrqU24"],"license":"MIT"}},"version":1},"ast":{"absolutePath":"contracts/extension/upgradeable/RulesEngine.sol","id":44187,"exportedSymbols":{"EnumerableSet":[52528],"IERC1155":[13890],"IERC20":[14047],"IERC20Metadata":[14066],"IERC721":[14253],"IRulesEngine":[34564],"RulesEngine":[44186],"RulesEngineStorage":[43697]},"nodeType":"SourceUnit","src":"39:6133:188","nodes":[{"id":43663,"nodeType":"PragmaDirective","src":"39:24:188","nodes":[],"literals":["solidity","^","0.8",".11"]},{"id":43664,"nodeType":"ImportDirective","src":"87:39:188","nodes":[],"absolutePath":"contracts/extension/interface/IRulesEngine.sol","file":"../interface/IRulesEngine.sol","nameLocation":"-1:-1:-1","scope":44187,"sourceUnit":34565,"symbolAliases":[],"unitAlias":""},{"id":43665,"nodeType":"ImportDirective","src":"128:40:188","nodes":[],"absolutePath":"contracts/eip/interface/IERC20.sol","file":"../../eip/interface/IERC20.sol","nameLocation":"-1:-1:-1","scope":44187,"sourceUnit":14048,"symbolAliases":[],"unitAlias":""},{"id":43666,"nodeType":"ImportDirective","src":"169:48:188","nodes":[],"absolutePath":"contracts/eip/interface/IERC20Metadata.sol","file":"../../eip/interface/IERC20Metadata.sol","nameLocation":"-1:-1:-1","scope":44187,"sourceUnit":14067,"symbolAliases":[],"unitAlias":""},{"id":43667,"nodeType":"ImportDirective","src":"218:41:188","nodes":[],"absolutePath":"contracts/eip/interface/IERC721.sol","file":"../../eip/interface/IERC721.sol","nameLocation":"-1:-1:-1","scope":44187,"sourceUnit":14254,"symbolAliases":[],"unitAlias":""},{"id":43668,"nodeType":"ImportDirective","src":"260:42:188","nodes":[],"absolutePath":"contracts/eip/interface/IERC1155.sol","file":"../../eip/interface/IERC1155.sol","nameLocation":"-1:-1:-1","scope":44187,"sourceUnit":13891,"symbolAliases":[],"unitAlias":""},{"id":43669,"nodeType":"ImportDirective","src":"304:74:188","nodes":[],"absolutePath":"contracts/external-deps/openzeppelin/utils/structs/EnumerableSet.sol","file":"../../external-deps/openzeppelin/utils/structs/EnumerableSet.sol","nameLocation":"-1:-1:-1","scope":44187,"sourceUnit":52529,"symbolAliases":[],"unitAlias":""},{"id":43697,"nodeType":"ContractDefinition","src":"380:690:188","nodes":[{"id":43673,"nodeType":"VariableDeclaration","src":"584:130:188","nodes":[],"constant":true,"documentation":{"id":43670,"nodeType":"StructuredDocumentation","src":"413:166:188","text":"@custom:storage-location erc7201:rules.engine.storage\n @dev keccak256(abi.encode(uint256(keccak256(\"rules.engine.storage\")) - 1)) & ~bytes32(uint256(0xff))"},"functionSelector":"ac93ae44","mutability":"constant","name":"RULES_ENGINE_STORAGE_POSITION","nameLocation":"608:29:188","scope":43697,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":43671,"name":"bytes32","nodeType":"ElementaryTypeName","src":"584:7:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":{"hexValue":"307834316434636230383762326334346137363162323238386534633861633131356537366135343665666438333763396132653963656332363631613439613030","id":43672,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"648:66:188","typeDescriptions":{"typeIdentifier":"t_rational_29776308018804927291613261012580841153847573815264711683682693973550035147264_by_1","typeString":"int_const 2977...(69 digits omitted)...7264"},"value":"0x41d4cb087b2c44a761b2288e4c8ac115e76a546efd837c9a2e9cec2661a49a00"},"visibility":"public"},{"id":43684,"nodeType":"StructDefinition","src":"721:153:188","nodes":[],"canonicalName":"RulesEngineStorage.Data","members":[{"constant":false,"id":43675,"mutability":"mutable","name":"rulesEngineOverride","nameLocation":"751:19:188","nodeType":"VariableDeclaration","scope":43684,"src":"743:27:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":43674,"name":"address","nodeType":"ElementaryTypeName","src":"743:7:188","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":43678,"mutability":"mutable","name":"ids","nameLocation":"805:3:188","nodeType":"VariableDeclaration","scope":43684,"src":"780:28:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_struct$_Bytes32Set_$52134_storage_ptr","typeString":"struct EnumerableSet.Bytes32Set"},"typeName":{"id":43677,"nodeType":"UserDefinedTypeName","pathNode":{"id":43676,"name":"EnumerableSet.Bytes32Set","nameLocations":["780:13:188","794:10:188"],"nodeType":"IdentifierPath","referencedDeclaration":52134,"src":"780:24:188"},"referencedDeclaration":52134,"src":"780:24:188","typeDescriptions":{"typeIdentifier":"t_struct$_Bytes32Set_$52134_storage_ptr","typeString":"struct EnumerableSet.Bytes32Set"}},"visibility":"internal"},{"constant":false,"id":43683,"mutability":"mutable","name":"rules","nameLocation":"862:5:188","nodeType":"VariableDeclaration","scope":43684,"src":"818:49:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_struct$_RuleWithId_$34503_storage_$","typeString":"mapping(bytes32 => struct IRulesEngine.RuleWithId)"},"typeName":{"id":43682,"keyName":"","keyNameLocation":"-1:-1:-1","keyType":{"id":43679,"name":"bytes32","nodeType":"ElementaryTypeName","src":"826:7:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Mapping","src":"818:43:188","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_struct$_RuleWithId_$34503_storage_$","typeString":"mapping(bytes32 => struct IRulesEngine.RuleWithId)"},"valueName":"","valueNameLocation":"-1:-1:-1","valueType":{"id":43681,"nodeType":"UserDefinedTypeName","pathNode":{"id":43680,"name":"IRulesEngine.RuleWithId","nameLocations":["837:12:188","850:10:188"],"nodeType":"IdentifierPath","referencedDeclaration":34503,"src":"837:23:188"},"referencedDeclaration":34503,"src":"837:23:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_storage_ptr","typeString":"struct IRulesEngine.RuleWithId"}}},"visibility":"internal"}],"name":"Data","nameLocation":"728:4:188","scope":43697,"visibility":"public"},{"id":43696,"nodeType":"FunctionDefinition","src":"880:188:188","nodes":[],"body":{"id":43695,"nodeType":"Block","src":"939:129:188","nodes":[],"statements":[{"assignments":[43691],"declarations":[{"constant":false,"id":43691,"mutability":"mutable","name":"position","nameLocation":"957:8:188","nodeType":"VariableDeclaration","scope":43695,"src":"949:16:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":43690,"name":"bytes32","nodeType":"ElementaryTypeName","src":"949:7:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"}],"id":43693,"initialValue":{"id":43692,"name":"RULES_ENGINE_STORAGE_POSITION","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43673,"src":"968:29:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"VariableDeclarationStatement","src":"949:48:188"},{"AST":{"nativeSrc":"1016:46:188","nodeType":"YulBlock","src":"1016:46:188","statements":[{"nativeSrc":"1030:22:188","nodeType":"YulAssignment","src":"1030:22:188","value":{"name":"position","nativeSrc":"1044:8:188","nodeType":"YulIdentifier","src":"1044:8:188"},"variableNames":[{"name":"data_.slot","nativeSrc":"1030:10:188","nodeType":"YulIdentifier","src":"1030:10:188"}]}]},"evmVersion":"london","externalReferences":[{"declaration":43688,"isOffset":false,"isSlot":true,"src":"1030:10:188","suffix":"slot","valueSize":1},{"declaration":43691,"isOffset":false,"isSlot":false,"src":"1044:8:188","valueSize":1}],"id":43694,"nodeType":"InlineAssembly","src":"1007:55:188"}]},"implemented":true,"kind":"function","modifiers":[],"name":"data","nameLocation":"889:4:188","parameters":{"id":43685,"nodeType":"ParameterList","parameters":[],"src":"893:2:188"},"returnParameters":{"id":43689,"nodeType":"ParameterList","parameters":[{"constant":false,"id":43688,"mutability":"mutable","name":"data_","nameLocation":"932:5:188","nodeType":"VariableDeclaration","scope":43696,"src":"919:18:188","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_Data_$43684_storage_ptr","typeString":"struct RulesEngineStorage.Data"},"typeName":{"id":43687,"nodeType":"UserDefinedTypeName","pathNode":{"id":43686,"name":"Data","nameLocations":["919:4:188"],"nodeType":"IdentifierPath","referencedDeclaration":43684,"src":"919:4:188"},"referencedDeclaration":43684,"src":"919:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_Data_$43684_storage_ptr","typeString":"struct RulesEngineStorage.Data"}},"visibility":"internal"}],"src":"918:20:188"},"scope":43697,"stateMutability":"pure","virtual":false,"visibility":"internal"}],"abstract":false,"baseContracts":[],"canonicalName":"RulesEngineStorage","contractDependencies":[],"contractKind":"library","fullyImplemented":true,"linearizedBaseContracts":[43697],"name":"RulesEngineStorage","nameLocation":"388:18:188","scope":44187,"usedErrors":[],"usedEvents":[]},{"id":44186,"nodeType":"ContractDefinition","src":"1072:5099:188","nodes":[{"id":43703,"nodeType":"UsingForDirective","src":"1124:49:188","nodes":[],"global":false,"libraryName":{"id":43700,"name":"EnumerableSet","nameLocations":["1130:13:188"],"nodeType":"IdentifierPath","referencedDeclaration":52528,"src":"1130:13:188"},"typeName":{"id":43702,"nodeType":"UserDefinedTypeName","pathNode":{"id":43701,"name":"EnumerableSet.Bytes32Set","nameLocations":["1148:13:188","1162:10:188"],"nodeType":"IdentifierPath","referencedDeclaration":52134,"src":"1148:24:188"},"referencedDeclaration":52134,"src":"1148:24:188","typeDescriptions":{"typeIdentifier":"t_struct$_Bytes32Set_$52134_storage_ptr","typeString":"struct EnumerableSet.Bytes32Set"}}},{"id":43778,"nodeType":"FunctionDefinition","src":"1362:558:188","nodes":[],"body":{"id":43777,"nodeType":"Block","src":"1437:483:188","nodes":[],"statements":[{"assignments":[43711],"declarations":[{"constant":false,"id":43711,"mutability":"mutable","name":"engineOverride","nameLocation":"1455:14:188","nodeType":"VariableDeclaration","scope":43777,"src":"1447:22:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":43710,"name":"address","nodeType":"ElementaryTypeName","src":"1447:7:188","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"id":43714,"initialValue":{"arguments":[],"expression":{"argumentTypes":[],"id":43712,"name":"getRulesEngineOverride","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43848,"src":"1472:22:188","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_address_$","typeString":"function () view returns (address)"}},"id":43713,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1472:24:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"VariableDeclarationStatement","src":"1447:49:188"},{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":43720,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":43715,"name":"engineOverride","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43711,"src":"1510:14:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"hexValue":"30","id":43718,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1536:1:188","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":43717,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"1528:7:188","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":43716,"name":"address","nodeType":"ElementaryTypeName","src":"1528:7:188","typeDescriptions":{}}},"id":43719,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1528:10:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"1510:28:188","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":43729,"nodeType":"IfStatement","src":"1506:116:188","trueBody":{"id":43728,"nodeType":"Block","src":"1540:82:188","statements":[{"expression":{"arguments":[{"id":43725,"name":"_tokenOwner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43705,"src":"1599:11:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":43722,"name":"engineOverride","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43711,"src":"1574:14:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":43721,"name":"IRulesEngine","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34564,"src":"1561:12:188","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IRulesEngine_$34564_$","typeString":"type(contract IRulesEngine)"}},"id":43723,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1561:28:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IRulesEngine_$34564","typeString":"contract IRulesEngine"}},"id":43724,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1590:8:188","memberName":"getScore","nodeType":"MemberAccess","referencedDeclaration":34525,"src":"1561:37:188","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":43726,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1561:50:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":43709,"id":43727,"nodeType":"Return","src":"1554:57:188"}]}},{"assignments":[43734],"declarations":[{"constant":false,"id":43734,"mutability":"mutable","name":"ids","nameLocation":"1649:3:188","nodeType":"VariableDeclaration","scope":43777,"src":"1632:20:188","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_memory_ptr","typeString":"bytes32[]"},"typeName":{"baseType":{"id":43732,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1632:7:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":43733,"nodeType":"ArrayTypeName","src":"1632:9:188","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_storage_ptr","typeString":"bytes32[]"}},"visibility":"internal"}],"id":43740,"initialValue":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"expression":{"arguments":[],"expression":{"argumentTypes":[],"id":43735,"name":"_rulesEngineStorage","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44175,"src":"1655:19:188","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$__$returns$_t_struct$_Data_$43684_storage_ptr_$","typeString":"function () pure returns (struct RulesEngineStorage.Data storage pointer)"}},"id":43736,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1655:21:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_struct$_Data_$43684_storage_ptr","typeString":"struct RulesEngineStorage.Data storage pointer"}},"id":43737,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"1677:3:188","memberName":"ids","nodeType":"MemberAccess","referencedDeclaration":43678,"src":"1655:25:188","typeDescriptions":{"typeIdentifier":"t_struct$_Bytes32Set_$52134_storage","typeString":"struct EnumerableSet.Bytes32Set storage ref"}},"id":43738,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"1681:6:188","memberName":"values","nodeType":"MemberAccess","referencedDeclaration":52237,"src":"1655:32:188","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_struct$_Bytes32Set_$52134_storage_ptr_$returns$_t_array$_t_bytes32_$dyn_memory_ptr_$attached_to$_t_struct$_Bytes32Set_$52134_storage_ptr_$","typeString":"function (struct EnumerableSet.Bytes32Set storage pointer) view returns (bytes32[] memory)"}},"id":43739,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1655:34:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_memory_ptr","typeString":"bytes32[] memory"}},"nodeType":"VariableDeclarationStatement","src":"1632:57:188"},{"assignments":[43742],"declarations":[{"constant":false,"id":43742,"mutability":"mutable","name":"len","nameLocation":"1707:3:188","nodeType":"VariableDeclaration","scope":43777,"src":"1699:11:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":43741,"name":"uint256","nodeType":"ElementaryTypeName","src":"1699:7:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":43745,"initialValue":{"expression":{"id":43743,"name":"ids","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43734,"src":"1713:3:188","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_memory_ptr","typeString":"bytes32[] memory"}},"id":43744,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1717:6:188","memberName":"length","nodeType":"MemberAccess","src":"1713:10:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"1699:24:188"},{"body":{"id":43775,"nodeType":"Block","src":"1771:143:188","statements":[{"assignments":[43759],"declarations":[{"constant":false,"id":43759,"mutability":"mutable","name":"rule","nameLocation":"1803:4:188","nodeType":"VariableDeclaration","scope":43775,"src":"1785:22:188","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId"},"typeName":{"id":43758,"nodeType":"UserDefinedTypeName","pathNode":{"id":43757,"name":"RuleWithId","nameLocations":["1785:10:188"],"nodeType":"IdentifierPath","referencedDeclaration":34503,"src":"1785:10:188"},"referencedDeclaration":34503,"src":"1785:10:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_storage_ptr","typeString":"struct IRulesEngine.RuleWithId"}},"visibility":"internal"}],"id":43767,"initialValue":{"baseExpression":{"expression":{"arguments":[],"expression":{"argumentTypes":[],"id":43760,"name":"_rulesEngineStorage","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44175,"src":"1810:19:188","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$__$returns$_t_struct$_Data_$43684_storage_ptr_$","typeString":"function () pure returns (struct RulesEngineStorage.Data storage pointer)"}},"id":43761,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1810:21:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_struct$_Data_$43684_storage_ptr","typeString":"struct RulesEngineStorage.Data storage pointer"}},"id":43762,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"1832:5:188","memberName":"rules","nodeType":"MemberAccess","referencedDeclaration":43683,"src":"1810:27:188","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_struct$_RuleWithId_$34503_storage_$","typeString":"mapping(bytes32 => struct IRulesEngine.RuleWithId storage ref)"}},"id":43766,"indexExpression":{"baseExpression":{"id":43763,"name":"ids","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43734,"src":"1838:3:188","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_memory_ptr","typeString":"bytes32[] memory"}},"id":43765,"indexExpression":{"id":43764,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43747,"src":"1842:1:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"1838:6:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"1810:35:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_storage","typeString":"struct IRulesEngine.RuleWithId storage ref"}},"nodeType":"VariableDeclarationStatement","src":"1785:60:188"},{"expression":{"id":43773,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":43768,"name":"score","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43708,"src":"1859:5:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"arguments":[{"id":43770,"name":"_tokenOwner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43705,"src":"1885:11:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":43771,"name":"rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43759,"src":"1898:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}],"id":43769,"name":"_getScoreForRule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44080,"src":"1868:16:188","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_address_$_t_struct$_RuleWithId_$34503_memory_ptr_$returns$_t_uint256_$","typeString":"function (address,struct IRulesEngine.RuleWithId memory) view returns (uint256)"}},"id":43772,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1868:35:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1859:44:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":43774,"nodeType":"ExpressionStatement","src":"1859:44:188"}]},"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":43752,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":43750,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43747,"src":"1754:1:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":43751,"name":"len","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43742,"src":"1758:3:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1754:7:188","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":43776,"initializationExpression":{"assignments":[43747],"declarations":[{"constant":false,"id":43747,"mutability":"mutable","name":"i","nameLocation":"1747:1:188","nodeType":"VariableDeclaration","scope":43776,"src":"1739:9:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":43746,"name":"uint256","nodeType":"ElementaryTypeName","src":"1739:7:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":43749,"initialValue":{"hexValue":"30","id":43748,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1751:1:188","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"nodeType":"VariableDeclarationStatement","src":"1739:13:188"},"isSimpleCounterLoop":false,"loopExpression":{"expression":{"id":43755,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":43753,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43747,"src":"1763:1:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"hexValue":"31","id":43754,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1768:1:188","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"1763:6:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":43756,"nodeType":"ExpressionStatement","src":"1763:6:188"},"nodeType":"ForStatement","src":"1734:180:188"}]},"baseFunctions":[34525],"functionSelector":"d47875d0","implemented":true,"kind":"function","modifiers":[],"name":"getScore","nameLocation":"1371:8:188","parameters":{"id":43706,"nodeType":"ParameterList","parameters":[{"constant":false,"id":43705,"mutability":"mutable","name":"_tokenOwner","nameLocation":"1388:11:188","nodeType":"VariableDeclaration","scope":43778,"src":"1380:19:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":43704,"name":"address","nodeType":"ElementaryTypeName","src":"1380:7:188","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"1379:21:188"},"returnParameters":{"id":43709,"nodeType":"ParameterList","parameters":[{"constant":false,"id":43708,"mutability":"mutable","name":"score","nameLocation":"1430:5:188","nodeType":"VariableDeclaration","scope":43778,"src":"1422:13:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":43707,"name":"uint256","nodeType":"ElementaryTypeName","src":"1422:7:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1421:15:188"},"scope":44186,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":43836,"nodeType":"FunctionDefinition","src":"1926:339:188","nodes":[],"body":{"id":43835,"nodeType":"Block","src":"1999:266:188","nodes":[],"statements":[{"assignments":[43789],"declarations":[{"constant":false,"id":43789,"mutability":"mutable","name":"ids","nameLocation":"2026:3:188","nodeType":"VariableDeclaration","scope":43835,"src":"2009:20:188","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_memory_ptr","typeString":"bytes32[]"},"typeName":{"baseType":{"id":43787,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2009:7:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":43788,"nodeType":"ArrayTypeName","src":"2009:9:188","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_storage_ptr","typeString":"bytes32[]"}},"visibility":"internal"}],"id":43795,"initialValue":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"expression":{"arguments":[],"expression":{"argumentTypes":[],"id":43790,"name":"_rulesEngineStorage","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44175,"src":"2032:19:188","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$__$returns$_t_struct$_Data_$43684_storage_ptr_$","typeString":"function () pure returns (struct RulesEngineStorage.Data storage pointer)"}},"id":43791,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2032:21:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_struct$_Data_$43684_storage_ptr","typeString":"struct RulesEngineStorage.Data storage pointer"}},"id":43792,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"2054:3:188","memberName":"ids","nodeType":"MemberAccess","referencedDeclaration":43678,"src":"2032:25:188","typeDescriptions":{"typeIdentifier":"t_struct$_Bytes32Set_$52134_storage","typeString":"struct EnumerableSet.Bytes32Set storage ref"}},"id":43793,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"2058:6:188","memberName":"values","nodeType":"MemberAccess","referencedDeclaration":52237,"src":"2032:32:188","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_struct$_Bytes32Set_$52134_storage_ptr_$returns$_t_array$_t_bytes32_$dyn_memory_ptr_$attached_to$_t_struct$_Bytes32Set_$52134_storage_ptr_$","typeString":"function (struct EnumerableSet.Bytes32Set storage pointer) view returns (bytes32[] memory)"}},"id":43794,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2032:34:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_memory_ptr","typeString":"bytes32[] memory"}},"nodeType":"VariableDeclarationStatement","src":"2009:57:188"},{"assignments":[43797],"declarations":[{"constant":false,"id":43797,"mutability":"mutable","name":"len","nameLocation":"2084:3:188","nodeType":"VariableDeclaration","scope":43835,"src":"2076:11:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":43796,"name":"uint256","nodeType":"ElementaryTypeName","src":"2076:7:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":43800,"initialValue":{"expression":{"id":43798,"name":"ids","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43789,"src":"2090:3:188","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_memory_ptr","typeString":"bytes32[] memory"}},"id":43799,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2094:6:188","memberName":"length","nodeType":"MemberAccess","src":"2090:10:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2076:24:188"},{"expression":{"id":43808,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":43801,"name":"rules","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43783,"src":"2111:5:188","typeDescriptions":{"typeIdentifier":"t_array$_t_struct$_RuleWithId_$34503_memory_ptr_$dyn_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory[] memory"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":43806,"name":"len","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43797,"src":"2136:3:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":43805,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"NewExpression","src":"2119:16:188","typeDescriptions":{"typeIdentifier":"t_function_objectcreation_pure$_t_uint256_$returns$_t_array$_t_struct$_RuleWithId_$34503_memory_ptr_$dyn_memory_ptr_$","typeString":"function (uint256) pure returns (struct IRulesEngine.RuleWithId memory[] memory)"},"typeName":{"baseType":{"id":43803,"nodeType":"UserDefinedTypeName","pathNode":{"id":43802,"name":"RuleWithId","nameLocations":["2123:10:188"],"nodeType":"IdentifierPath","referencedDeclaration":34503,"src":"2123:10:188"},"referencedDeclaration":34503,"src":"2123:10:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_storage_ptr","typeString":"struct IRulesEngine.RuleWithId"}},"id":43804,"nodeType":"ArrayTypeName","src":"2123:12:188","typeDescriptions":{"typeIdentifier":"t_array$_t_struct$_RuleWithId_$34503_storage_$dyn_storage_ptr","typeString":"struct IRulesEngine.RuleWithId[]"}}},"id":43807,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2119:21:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_array$_t_struct$_RuleWithId_$34503_memory_ptr_$dyn_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory[] memory"}},"src":"2111:29:188","typeDescriptions":{"typeIdentifier":"t_array$_t_struct$_RuleWithId_$34503_memory_ptr_$dyn_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory[] memory"}},"id":43809,"nodeType":"ExpressionStatement","src":"2111:29:188"},{"body":{"id":43833,"nodeType":"Block","src":"2188:71:188","statements":[{"expression":{"id":43831,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"id":43821,"name":"rules","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43783,"src":"2202:5:188","typeDescriptions":{"typeIdentifier":"t_array$_t_struct$_RuleWithId_$34503_memory_ptr_$dyn_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory[] memory"}},"id":43823,"indexExpression":{"id":43822,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43811,"src":"2208:1:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"2202:8:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"baseExpression":{"expression":{"arguments":[],"expression":{"argumentTypes":[],"id":43824,"name":"_rulesEngineStorage","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44175,"src":"2213:19:188","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$__$returns$_t_struct$_Data_$43684_storage_ptr_$","typeString":"function () pure returns (struct RulesEngineStorage.Data storage pointer)"}},"id":43825,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2213:21:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_struct$_Data_$43684_storage_ptr","typeString":"struct RulesEngineStorage.Data storage pointer"}},"id":43826,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"2235:5:188","memberName":"rules","nodeType":"MemberAccess","referencedDeclaration":43683,"src":"2213:27:188","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_struct$_RuleWithId_$34503_storage_$","typeString":"mapping(bytes32 => struct IRulesEngine.RuleWithId storage ref)"}},"id":43830,"indexExpression":{"baseExpression":{"id":43827,"name":"ids","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43789,"src":"2241:3:188","typeDescriptions":{"typeIdentifier":"t_array$_t_bytes32_$dyn_memory_ptr","typeString":"bytes32[] memory"}},"id":43829,"indexExpression":{"id":43828,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43811,"src":"2245:1:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"2241:6:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"2213:35:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_storage","typeString":"struct IRulesEngine.RuleWithId storage ref"}},"src":"2202:46:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}},"id":43832,"nodeType":"ExpressionStatement","src":"2202:46:188"}]},"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":43816,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":43814,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43811,"src":"2171:1:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":43815,"name":"len","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43797,"src":"2175:3:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2171:7:188","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":43834,"initializationExpression":{"assignments":[43811],"declarations":[{"constant":false,"id":43811,"mutability":"mutable","name":"i","nameLocation":"2164:1:188","nodeType":"VariableDeclaration","scope":43834,"src":"2156:9:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":43810,"name":"uint256","nodeType":"ElementaryTypeName","src":"2156:7:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":43813,"initialValue":{"hexValue":"30","id":43812,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2168:1:188","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"nodeType":"VariableDeclarationStatement","src":"2156:13:188"},"isSimpleCounterLoop":false,"loopExpression":{"expression":{"id":43819,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":43817,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43811,"src":"2180:1:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"hexValue":"31","id":43818,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2185:1:188","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"2180:6:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":43820,"nodeType":"ExpressionStatement","src":"2180:6:188"},"nodeType":"ForStatement","src":"2151:108:188"}]},"baseFunctions":[34532],"functionSelector":"1184aef2","implemented":true,"kind":"function","modifiers":[],"name":"getAllRules","nameLocation":"1935:11:188","parameters":{"id":43779,"nodeType":"ParameterList","parameters":[],"src":"1946:2:188"},"returnParameters":{"id":43784,"nodeType":"ParameterList","parameters":[{"constant":false,"id":43783,"mutability":"mutable","name":"rules","nameLocation":"1992:5:188","nodeType":"VariableDeclaration","scope":43836,"src":"1972:25:188","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_array$_t_struct$_RuleWithId_$34503_memory_ptr_$dyn_memory_ptr","typeString":"struct IRulesEngine.RuleWithId[]"},"typeName":{"baseType":{"id":43781,"nodeType":"UserDefinedTypeName","pathNode":{"id":43780,"name":"RuleWithId","nameLocations":["1972:10:188"],"nodeType":"IdentifierPath","referencedDeclaration":34503,"src":"1972:10:188"},"referencedDeclaration":34503,"src":"1972:10:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_storage_ptr","typeString":"struct IRulesEngine.RuleWithId"}},"id":43782,"nodeType":"ArrayTypeName","src":"1972:12:188","typeDescriptions":{"typeIdentifier":"t_array$_t_struct$_RuleWithId_$34503_storage_$dyn_storage_ptr","typeString":"struct IRulesEngine.RuleWithId[]"}},"visibility":"internal"}],"src":"1971:27:188"},"scope":44186,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":43848,"nodeType":"FunctionDefinition","src":"2271:162:188","nodes":[],"body":{"id":43847,"nodeType":"Block","src":"2354:79:188","nodes":[],"statements":[{"expression":{"id":43845,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":43841,"name":"rulesEngineAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43839,"src":"2364:18:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"arguments":[],"expression":{"argumentTypes":[],"id":43842,"name":"_rulesEngineStorage","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44175,"src":"2385:19:188","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$__$returns$_t_struct$_Data_$43684_storage_ptr_$","typeString":"function () pure returns (struct RulesEngineStorage.Data storage pointer)"}},"id":43843,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2385:21:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_struct$_Data_$43684_storage_ptr","typeString":"struct RulesEngineStorage.Data storage pointer"}},"id":43844,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"2407:19:188","memberName":"rulesEngineOverride","nodeType":"MemberAccess","referencedDeclaration":43675,"src":"2385:41:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"2364:62:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":43846,"nodeType":"ExpressionStatement","src":"2364:62:188"}]},"baseFunctions":[34537],"functionSelector":"a7145eb4","implemented":true,"kind":"function","modifiers":[],"name":"getRulesEngineOverride","nameLocation":"2280:22:188","parameters":{"id":43837,"nodeType":"ParameterList","parameters":[],"src":"2302:2:188"},"returnParameters":{"id":43840,"nodeType":"ParameterList","parameters":[{"constant":false,"id":43839,"mutability":"mutable","name":"rulesEngineAddress","nameLocation":"2334:18:188","nodeType":"VariableDeclaration","scope":43848,"src":"2326:26:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":43838,"name":"address","nodeType":"ElementaryTypeName","src":"2326:7:188","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"2325:28:188"},"scope":44186,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":43898,"nodeType":"FunctionDefinition","src":"2626:633:188","nodes":[],"body":{"id":43897,"nodeType":"Block","src":"2730:529:188","nodes":[],"statements":[{"expression":{"arguments":[{"arguments":[],"expression":{"argumentTypes":[],"id":43857,"name":"_canSetRules","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44180,"src":"2748:12:188","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_bool_$","typeString":"function () view returns (bool)"}},"id":43858,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2748:14:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"52756c6573456e67696e653a2063616e6e6f74207365742072756c6573","id":43859,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"2764:31:188","typeDescriptions":{"typeIdentifier":"t_stringliteral_9f4d1f3c378293662114667b69c52aeee1c2e3e6abb6966f99faddba5029592e","typeString":"literal_string \"RulesEngine: cannot set rules\""},"value":"RulesEngine: cannot set rules"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_9f4d1f3c378293662114667b69c52aeee1c2e3e6abb6966f99faddba5029592e","typeString":"literal_string \"RulesEngine: cannot set rules\""}],"id":43856,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"2740:7:188","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":43860,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2740:56:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":43861,"nodeType":"ExpressionStatement","src":"2740:56:188"},{"expression":{"id":43878,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":43862,"name":"ruleId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43854,"src":"2807:6:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"arguments":[{"expression":{"id":43866,"name":"rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43851,"src":"2856:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeMultiplicative_$34486_memory_ptr","typeString":"struct IRulesEngine.RuleTypeMultiplicative memory"}},"id":43867,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"2861:5:188","memberName":"token","nodeType":"MemberAccess","referencedDeclaration":34478,"src":"2856:10:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"expression":{"id":43868,"name":"rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43851,"src":"2868:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeMultiplicative_$34486_memory_ptr","typeString":"struct IRulesEngine.RuleTypeMultiplicative memory"}},"id":43869,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"2873:9:188","memberName":"tokenType","nodeType":"MemberAccess","referencedDeclaration":34481,"src":"2868:14:188","typeDescriptions":{"typeIdentifier":"t_enum$_TokenType_$34461","typeString":"enum IRulesEngine.TokenType"}},{"expression":{"id":43870,"name":"rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43851,"src":"2884:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeMultiplicative_$34486_memory_ptr","typeString":"struct IRulesEngine.RuleTypeMultiplicative memory"}},"id":43871,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"2889:7:188","memberName":"tokenId","nodeType":"MemberAccess","referencedDeclaration":34483,"src":"2884:12:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":43872,"name":"rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43851,"src":"2898:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeMultiplicative_$34486_memory_ptr","typeString":"struct IRulesEngine.RuleTypeMultiplicative memory"}},"id":43873,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"2903:18:188","memberName":"scorePerOwnedToken","nodeType":"MemberAccess","referencedDeclaration":34485,"src":"2898:23:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":43874,"name":"RuleType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34464,"src":"2923:8:188","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_RuleType_$34464_$","typeString":"type(enum IRulesEngine.RuleType)"}},"id":43875,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"2932:14:188","memberName":"Multiplicative","nodeType":"MemberAccess","referencedDeclaration":34463,"src":"2923:23:188","typeDescriptions":{"typeIdentifier":"t_enum$_RuleType_$34464","typeString":"enum IRulesEngine.RuleType"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_enum$_TokenType_$34461","typeString":"enum IRulesEngine.TokenType"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_enum$_RuleType_$34464","typeString":"enum IRulesEngine.RuleType"}],"expression":{"id":43864,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-1,"src":"2839:3:188","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":43865,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"2843:12:188","memberName":"encodePacked","nodeType":"MemberAccess","src":"2839:16:188","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":43876,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2839:108:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":43863,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-8,"src":"2816:9:188","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":43877,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2816:141:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"2807:150:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":43879,"nodeType":"ExpressionStatement","src":"2807:150:188"},{"expression":{"arguments":[{"arguments":[{"id":43882,"name":"ruleId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43854,"src":"3020:6:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"expression":{"id":43883,"name":"rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43851,"src":"3044:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeMultiplicative_$34486_memory_ptr","typeString":"struct IRulesEngine.RuleTypeMultiplicative memory"}},"id":43884,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3049:5:188","memberName":"token","nodeType":"MemberAccess","referencedDeclaration":34478,"src":"3044:10:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"expression":{"id":43885,"name":"rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43851,"src":"3072:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeMultiplicative_$34486_memory_ptr","typeString":"struct IRulesEngine.RuleTypeMultiplicative memory"}},"id":43886,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3077:9:188","memberName":"tokenType","nodeType":"MemberAccess","referencedDeclaration":34481,"src":"3072:14:188","typeDescriptions":{"typeIdentifier":"t_enum$_TokenType_$34461","typeString":"enum IRulesEngine.TokenType"}},{"expression":{"id":43887,"name":"rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43851,"src":"3104:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeMultiplicative_$34486_memory_ptr","typeString":"struct IRulesEngine.RuleTypeMultiplicative memory"}},"id":43888,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3109:7:188","memberName":"tokenId","nodeType":"MemberAccess","referencedDeclaration":34483,"src":"3104:12:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"hexValue":"30","id":43889,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3134:1:188","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},{"expression":{"id":43890,"name":"rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43851,"src":"3164:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeMultiplicative_$34486_memory_ptr","typeString":"struct IRulesEngine.RuleTypeMultiplicative memory"}},"id":43891,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3169:18:188","memberName":"scorePerOwnedToken","nodeType":"MemberAccess","referencedDeclaration":34485,"src":"3164:23:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":43892,"name":"RuleType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34464,"src":"3205:8:188","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_RuleType_$34464_$","typeString":"type(enum IRulesEngine.RuleType)"}},"id":43893,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3214:14:188","memberName":"Multiplicative","nodeType":"MemberAccess","referencedDeclaration":34463,"src":"3205:23:188","typeDescriptions":{"typeIdentifier":"t_enum$_RuleType_$34464","typeString":"enum IRulesEngine.RuleType"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_enum$_TokenType_$34461","typeString":"enum IRulesEngine.TokenType"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_enum$_RuleType_$34464","typeString":"enum IRulesEngine.RuleType"}],"id":43881,"name":"RuleWithId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34503,"src":"2992:10:188","typeDescriptions":{"typeIdentifier":"t_type$_t_struct$_RuleWithId_$34503_storage_ptr_$","typeString":"type(struct IRulesEngine.RuleWithId storage pointer)"}},"id":43894,"isConstant":false,"isLValue":false,"isPure":false,"kind":"structConstructorCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2992:250:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}],"id":43880,"name":"_createRule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44113,"src":"2967:11:188","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_struct$_RuleWithId_$34503_memory_ptr_$returns$__$","typeString":"function (struct IRulesEngine.RuleWithId memory)"}},"id":43895,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2967:285:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":43896,"nodeType":"ExpressionStatement","src":"2967:285:188"}]},"baseFunctions":[34545],"functionSelector":"1e2e9cb5","implemented":true,"kind":"function","modifiers":[],"name":"createRuleMultiplicative","nameLocation":"2635:24:188","parameters":{"id":43852,"nodeType":"ParameterList","parameters":[{"constant":false,"id":43851,"mutability":"mutable","name":"rule","nameLocation":"2690:4:188","nodeType":"VariableDeclaration","scope":43898,"src":"2660:34:188","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeMultiplicative_$34486_memory_ptr","typeString":"struct IRulesEngine.RuleTypeMultiplicative"},"typeName":{"id":43850,"nodeType":"UserDefinedTypeName","pathNode":{"id":43849,"name":"RuleTypeMultiplicative","nameLocations":["2660:22:188"],"nodeType":"IdentifierPath","referencedDeclaration":34486,"src":"2660:22:188"},"referencedDeclaration":34486,"src":"2660:22:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeMultiplicative_$34486_storage_ptr","typeString":"struct IRulesEngine.RuleTypeMultiplicative"}},"visibility":"internal"}],"src":"2659:36:188"},"returnParameters":{"id":43855,"nodeType":"ParameterList","parameters":[{"constant":false,"id":43854,"mutability":"mutable","name":"ruleId","nameLocation":"2722:6:188","nodeType":"VariableDeclaration","scope":43898,"src":"2714:14:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":43853,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2714:7:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"}],"src":"2713:16:188"},"scope":44186,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":43951,"nodeType":"FunctionDefinition","src":"3265:475:188","nodes":[],"body":{"id":43950,"nodeType":"Block","src":"3359:381:188","nodes":[],"statements":[{"expression":{"arguments":[{"arguments":[],"expression":{"argumentTypes":[],"id":43907,"name":"_canSetRules","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44180,"src":"3377:12:188","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_bool_$","typeString":"function () view returns (bool)"}},"id":43908,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3377:14:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"52756c6573456e67696e653a2063616e6e6f74207365742072756c6573","id":43909,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"3393:31:188","typeDescriptions":{"typeIdentifier":"t_stringliteral_9f4d1f3c378293662114667b69c52aeee1c2e3e6abb6966f99faddba5029592e","typeString":"literal_string \"RulesEngine: cannot set rules\""},"value":"RulesEngine: cannot set rules"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_9f4d1f3c378293662114667b69c52aeee1c2e3e6abb6966f99faddba5029592e","typeString":"literal_string \"RulesEngine: cannot set rules\""}],"id":43906,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"3369:7:188","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":43910,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3369:56:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":43911,"nodeType":"ExpressionStatement","src":"3369:56:188"},{"expression":{"id":43930,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":43912,"name":"ruleId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43904,"src":"3436:6:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"arguments":[{"expression":{"id":43916,"name":"rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43901,"src":"3485:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeThreshold_$34476_memory_ptr","typeString":"struct IRulesEngine.RuleTypeThreshold memory"}},"id":43917,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3490:5:188","memberName":"token","nodeType":"MemberAccess","referencedDeclaration":34466,"src":"3485:10:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"expression":{"id":43918,"name":"rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43901,"src":"3497:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeThreshold_$34476_memory_ptr","typeString":"struct IRulesEngine.RuleTypeThreshold memory"}},"id":43919,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3502:9:188","memberName":"tokenType","nodeType":"MemberAccess","referencedDeclaration":34469,"src":"3497:14:188","typeDescriptions":{"typeIdentifier":"t_enum$_TokenType_$34461","typeString":"enum IRulesEngine.TokenType"}},{"expression":{"id":43920,"name":"rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43901,"src":"3513:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeThreshold_$34476_memory_ptr","typeString":"struct IRulesEngine.RuleTypeThreshold memory"}},"id":43921,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3518:7:188","memberName":"tokenId","nodeType":"MemberAccess","referencedDeclaration":34471,"src":"3513:12:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":43922,"name":"rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43901,"src":"3527:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeThreshold_$34476_memory_ptr","typeString":"struct IRulesEngine.RuleTypeThreshold memory"}},"id":43923,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3532:7:188","memberName":"balance","nodeType":"MemberAccess","referencedDeclaration":34473,"src":"3527:12:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":43924,"name":"rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43901,"src":"3541:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeThreshold_$34476_memory_ptr","typeString":"struct IRulesEngine.RuleTypeThreshold memory"}},"id":43925,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3546:5:188","memberName":"score","nodeType":"MemberAccess","referencedDeclaration":34475,"src":"3541:10:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":43926,"name":"RuleType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34464,"src":"3553:8:188","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_RuleType_$34464_$","typeString":"type(enum IRulesEngine.RuleType)"}},"id":43927,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3562:9:188","memberName":"Threshold","nodeType":"MemberAccess","referencedDeclaration":34462,"src":"3553:18:188","typeDescriptions":{"typeIdentifier":"t_enum$_RuleType_$34464","typeString":"enum IRulesEngine.RuleType"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_enum$_TokenType_$34461","typeString":"enum IRulesEngine.TokenType"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_enum$_RuleType_$34464","typeString":"enum IRulesEngine.RuleType"}],"expression":{"id":43914,"name":"abi","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-1,"src":"3468:3:188","typeDescriptions":{"typeIdentifier":"t_magic_abi","typeString":"abi"}},"id":43915,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3472:12:188","memberName":"encodePacked","nodeType":"MemberAccess","src":"3468:16:188","typeDescriptions":{"typeIdentifier":"t_function_abiencodepacked_pure$__$returns$_t_bytes_memory_ptr_$","typeString":"function () pure returns (bytes memory)"}},"id":43928,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3468:104:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":43913,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-8,"src":"3445:9:188","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":43929,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3445:137:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"3436:146:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":43931,"nodeType":"ExpressionStatement","src":"3436:146:188"},{"expression":{"arguments":[{"arguments":[{"id":43934,"name":"ruleId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43904,"src":"3628:6:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"expression":{"id":43935,"name":"rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43901,"src":"3636:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeThreshold_$34476_memory_ptr","typeString":"struct IRulesEngine.RuleTypeThreshold memory"}},"id":43936,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3641:5:188","memberName":"token","nodeType":"MemberAccess","referencedDeclaration":34466,"src":"3636:10:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"expression":{"id":43937,"name":"rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43901,"src":"3648:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeThreshold_$34476_memory_ptr","typeString":"struct IRulesEngine.RuleTypeThreshold memory"}},"id":43938,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3653:9:188","memberName":"tokenType","nodeType":"MemberAccess","referencedDeclaration":34469,"src":"3648:14:188","typeDescriptions":{"typeIdentifier":"t_enum$_TokenType_$34461","typeString":"enum IRulesEngine.TokenType"}},{"expression":{"id":43939,"name":"rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43901,"src":"3664:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeThreshold_$34476_memory_ptr","typeString":"struct IRulesEngine.RuleTypeThreshold memory"}},"id":43940,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3669:7:188","memberName":"tokenId","nodeType":"MemberAccess","referencedDeclaration":34471,"src":"3664:12:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":43941,"name":"rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43901,"src":"3678:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeThreshold_$34476_memory_ptr","typeString":"struct IRulesEngine.RuleTypeThreshold memory"}},"id":43942,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3683:7:188","memberName":"balance","nodeType":"MemberAccess","referencedDeclaration":34473,"src":"3678:12:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":43943,"name":"rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43901,"src":"3692:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeThreshold_$34476_memory_ptr","typeString":"struct IRulesEngine.RuleTypeThreshold memory"}},"id":43944,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"3697:5:188","memberName":"score","nodeType":"MemberAccess","referencedDeclaration":34475,"src":"3692:10:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":43945,"name":"RuleType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34464,"src":"3704:8:188","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_RuleType_$34464_$","typeString":"type(enum IRulesEngine.RuleType)"}},"id":43946,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3713:9:188","memberName":"Threshold","nodeType":"MemberAccess","referencedDeclaration":34462,"src":"3704:18:188","typeDescriptions":{"typeIdentifier":"t_enum$_RuleType_$34464","typeString":"enum IRulesEngine.RuleType"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_enum$_TokenType_$34461","typeString":"enum IRulesEngine.TokenType"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_enum$_RuleType_$34464","typeString":"enum IRulesEngine.RuleType"}],"id":43933,"name":"RuleWithId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34503,"src":"3617:10:188","typeDescriptions":{"typeIdentifier":"t_type$_t_struct$_RuleWithId_$34503_storage_ptr_$","typeString":"type(struct IRulesEngine.RuleWithId storage pointer)"}},"id":43947,"isConstant":false,"isLValue":false,"isPure":false,"kind":"structConstructorCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3617:106:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}],"id":43932,"name":"_createRule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44113,"src":"3592:11:188","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_struct$_RuleWithId_$34503_memory_ptr_$returns$__$","typeString":"function (struct IRulesEngine.RuleWithId memory)"}},"id":43948,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3592:141:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":43949,"nodeType":"ExpressionStatement","src":"3592:141:188"}]},"baseFunctions":[34553],"functionSelector":"1022a25e","implemented":true,"kind":"function","modifiers":[],"name":"createRuleThreshold","nameLocation":"3274:19:188","parameters":{"id":43902,"nodeType":"ParameterList","parameters":[{"constant":false,"id":43901,"mutability":"mutable","name":"rule","nameLocation":"3319:4:188","nodeType":"VariableDeclaration","scope":43951,"src":"3294:29:188","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeThreshold_$34476_memory_ptr","typeString":"struct IRulesEngine.RuleTypeThreshold"},"typeName":{"id":43900,"nodeType":"UserDefinedTypeName","pathNode":{"id":43899,"name":"RuleTypeThreshold","nameLocations":["3294:17:188"],"nodeType":"IdentifierPath","referencedDeclaration":34476,"src":"3294:17:188"},"referencedDeclaration":34476,"src":"3294:17:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleTypeThreshold_$34476_storage_ptr","typeString":"struct IRulesEngine.RuleTypeThreshold"}},"visibility":"internal"}],"src":"3293:31:188"},"returnParameters":{"id":43905,"nodeType":"ParameterList","parameters":[{"constant":false,"id":43904,"mutability":"mutable","name":"ruleId","nameLocation":"3351:6:188","nodeType":"VariableDeclaration","scope":43951,"src":"3343:14:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":43903,"name":"bytes32","nodeType":"ElementaryTypeName","src":"3343:7:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"}],"src":"3342:16:188"},"scope":44186,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":43967,"nodeType":"FunctionDefinition","src":"3746:149:188","nodes":[],"body":{"id":43966,"nodeType":"Block","src":"3792:103:188","nodes":[],"statements":[{"expression":{"arguments":[{"arguments":[],"expression":{"argumentTypes":[],"id":43957,"name":"_canSetRules","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44180,"src":"3810:12:188","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_bool_$","typeString":"function () view returns (bool)"}},"id":43958,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3810:14:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"52756c6573456e67696e653a2063616e6e6f74207365742072756c6573","id":43959,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"3826:31:188","typeDescriptions":{"typeIdentifier":"t_stringliteral_9f4d1f3c378293662114667b69c52aeee1c2e3e6abb6966f99faddba5029592e","typeString":"literal_string \"RulesEngine: cannot set rules\""},"value":"RulesEngine: cannot set rules"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_9f4d1f3c378293662114667b69c52aeee1c2e3e6abb6966f99faddba5029592e","typeString":"literal_string \"RulesEngine: cannot set rules\""}],"id":43956,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"3802:7:188","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":43960,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3802:56:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":43961,"nodeType":"ExpressionStatement","src":"3802:56:188"},{"expression":{"arguments":[{"id":43963,"name":"_ruleId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43953,"src":"3880:7:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":43962,"name":"_deleteRule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44140,"src":"3868:11:188","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_bytes32_$returns$__$","typeString":"function (bytes32)"}},"id":43964,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3868:20:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":43965,"nodeType":"ExpressionStatement","src":"3868:20:188"}]},"baseFunctions":[34558],"functionSelector":"9d907761","implemented":true,"kind":"function","modifiers":[],"name":"deleteRule","nameLocation":"3755:10:188","parameters":{"id":43954,"nodeType":"ParameterList","parameters":[{"constant":false,"id":43953,"mutability":"mutable","name":"_ruleId","nameLocation":"3774:7:188","nodeType":"VariableDeclaration","scope":43967,"src":"3766:15:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":43952,"name":"bytes32","nodeType":"ElementaryTypeName","src":"3766:7:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"}],"src":"3765:17:188"},"returnParameters":{"id":43955,"nodeType":"ParameterList","parameters":[],"src":"3792:0:188"},"scope":44186,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":44080,"nodeType":"FunctionDefinition","src":"4088:971:188","nodes":[],"body":{"id":44079,"nodeType":"Block","src":"4198:861:188","nodes":[],"statements":[{"assignments":[43978],"declarations":[{"constant":false,"id":43978,"mutability":"mutable","name":"balance","nameLocation":"4216:7:188","nodeType":"VariableDeclaration","scope":44079,"src":"4208:15:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":43977,"name":"uint256","nodeType":"ElementaryTypeName","src":"4208:7:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":43980,"initialValue":{"hexValue":"30","id":43979,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4226:1:188","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"nodeType":"VariableDeclarationStatement","src":"4208:19:188"},{"condition":{"commonType":{"typeIdentifier":"t_enum$_TokenType_$34461","typeString":"enum IRulesEngine.TokenType"},"id":43985,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":43981,"name":"_rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43972,"src":"4242:5:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}},"id":43982,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4248:9:188","memberName":"tokenType","nodeType":"MemberAccess","referencedDeclaration":34493,"src":"4242:15:188","typeDescriptions":{"typeIdentifier":"t_enum$_TokenType_$34461","typeString":"enum IRulesEngine.TokenType"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"expression":{"id":43983,"name":"TokenType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34461,"src":"4261:9:188","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_TokenType_$34461_$","typeString":"type(enum IRulesEngine.TokenType)"}},"id":43984,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"4271:5:188","memberName":"ERC20","nodeType":"MemberAccess","referencedDeclaration":34458,"src":"4261:15:188","typeDescriptions":{"typeIdentifier":"t_enum$_TokenType_$34461","typeString":"enum IRulesEngine.TokenType"}},"src":"4242:34:188","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"condition":{"commonType":{"typeIdentifier":"t_enum$_TokenType_$34461","typeString":"enum IRulesEngine.TokenType"},"id":44014,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":44010,"name":"_rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43972,"src":"4531:5:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}},"id":44011,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4537:9:188","memberName":"tokenType","nodeType":"MemberAccess","referencedDeclaration":34493,"src":"4531:15:188","typeDescriptions":{"typeIdentifier":"t_enum$_TokenType_$34461","typeString":"enum IRulesEngine.TokenType"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"expression":{"id":44012,"name":"TokenType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34461,"src":"4550:9:188","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_TokenType_$34461_$","typeString":"type(enum IRulesEngine.TokenType)"}},"id":44013,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"4560:6:188","memberName":"ERC721","nodeType":"MemberAccess","referencedDeclaration":34459,"src":"4550:16:188","typeDescriptions":{"typeIdentifier":"t_enum$_TokenType_$34461","typeString":"enum IRulesEngine.TokenType"}},"src":"4531:35:188","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"condition":{"commonType":{"typeIdentifier":"t_enum$_TokenType_$34461","typeString":"enum IRulesEngine.TokenType"},"id":44030,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":44026,"name":"_rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43972,"src":"4656:5:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}},"id":44027,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4662:9:188","memberName":"tokenType","nodeType":"MemberAccess","referencedDeclaration":34493,"src":"4656:15:188","typeDescriptions":{"typeIdentifier":"t_enum$_TokenType_$34461","typeString":"enum IRulesEngine.TokenType"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"expression":{"id":44028,"name":"TokenType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34461,"src":"4675:9:188","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_TokenType_$34461_$","typeString":"type(enum IRulesEngine.TokenType)"}},"id":44029,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"4685:7:188","memberName":"ERC1155","nodeType":"MemberAccess","referencedDeclaration":34460,"src":"4675:17:188","typeDescriptions":{"typeIdentifier":"t_enum$_TokenType_$34461","typeString":"enum IRulesEngine.TokenType"}},"src":"4656:36:188","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":44044,"nodeType":"IfStatement","src":"4652:136:188","trueBody":{"id":44043,"nodeType":"Block","src":"4694:94:188","statements":[{"expression":{"id":44041,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":44031,"name":"balance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43978,"src":"4708:7:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":44037,"name":"_tokenOwner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43969,"src":"4750:11:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"expression":{"id":44038,"name":"_rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43972,"src":"4763:5:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}},"id":44039,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4769:7:188","memberName":"tokenId","nodeType":"MemberAccess","referencedDeclaration":34495,"src":"4763:13:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"expression":{"id":44033,"name":"_rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43972,"src":"4727:5:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}},"id":44034,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4733:5:188","memberName":"token","nodeType":"MemberAccess","referencedDeclaration":34490,"src":"4727:11:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":44032,"name":"IERC1155","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":13890,"src":"4718:8:188","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC1155_$13890_$","typeString":"type(contract IERC1155)"}},"id":44035,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4718:21:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC1155_$13890","typeString":"contract IERC1155"}},"id":44036,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4740:9:188","memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":13858,"src":"4718:31:188","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$_t_uint256_$returns$_t_uint256_$","typeString":"function (address,uint256) view external returns (uint256)"}},"id":44040,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4718:59:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4708:69:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44042,"nodeType":"ExpressionStatement","src":"4708:69:188"}]}},"id":44045,"nodeType":"IfStatement","src":"4527:261:188","trueBody":{"id":44025,"nodeType":"Block","src":"4568:78:188","statements":[{"expression":{"id":44023,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":44015,"name":"balance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43978,"src":"4582:7:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":44021,"name":"_tokenOwner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43969,"src":"4623:11:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"expression":{"id":44017,"name":"_rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43972,"src":"4600:5:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}},"id":44018,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4606:5:188","memberName":"token","nodeType":"MemberAccess","referencedDeclaration":34490,"src":"4600:11:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":44016,"name":"IERC721","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14253,"src":"4592:7:188","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC721_$14253_$","typeString":"type(contract IERC721)"}},"id":44019,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4592:20:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC721_$14253","typeString":"contract IERC721"}},"id":44020,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4613:9:188","memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":14178,"src":"4592:30:188","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":44022,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4592:43:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4582:53:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44024,"nodeType":"ExpressionStatement","src":"4582:53:188"}]}},"id":44046,"nodeType":"IfStatement","src":"4238:550:188","trueBody":{"id":44009,"nodeType":"Block","src":"4278:243:188","statements":[{"assignments":[43987],"declarations":[{"constant":false,"id":43987,"mutability":"mutable","name":"unit","nameLocation":"4386:4:188","nodeType":"VariableDeclaration","scope":44009,"src":"4378:12:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":43986,"name":"uint256","nodeType":"ElementaryTypeName","src":"4378:7:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":43996,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":43995,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3130","id":43988,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4393:2:188","typeDescriptions":{"typeIdentifier":"t_rational_10_by_1","typeString":"int_const 10"},"value":"10"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"arguments":[{"expression":{"id":43990,"name":"_rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43972,"src":"4414:5:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}},"id":43991,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4420:5:188","memberName":"token","nodeType":"MemberAccess","referencedDeclaration":34490,"src":"4414:11:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":43989,"name":"IERC20Metadata","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14066,"src":"4399:14:188","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20Metadata_$14066_$","typeString":"type(contract IERC20Metadata)"}},"id":43992,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4399:27:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20Metadata_$14066","typeString":"contract IERC20Metadata"}},"id":43993,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4427:8:188","memberName":"decimals","nodeType":"MemberAccess","referencedDeclaration":14065,"src":"4399:36:188","typeDescriptions":{"typeIdentifier":"t_function_external_view$__$returns$_t_uint8_$","typeString":"function () view external returns (uint8)"}},"id":43994,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4399:38:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint8","typeString":"uint8"}},"src":"4393:44:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4378:59:188"},{"expression":{"id":44007,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":43997,"name":"balance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43978,"src":"4451:7:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44006,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":44003,"name":"_tokenOwner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43969,"src":"4491:11:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"expression":{"id":43999,"name":"_rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43972,"src":"4468:5:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}},"id":44000,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4474:5:188","memberName":"token","nodeType":"MemberAccess","referencedDeclaration":34490,"src":"4468:11:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":43998,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":14047,"src":"4461:6:188","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$14047_$","typeString":"type(contract IERC20)"}},"id":44001,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4461:19:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$14047","typeString":"contract IERC20"}},"id":44002,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4481:9:188","memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":13992,"src":"4461:29:188","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":44004,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4461:42:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":44005,"name":"unit","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43987,"src":"4506:4:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4461:49:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4451:59:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44008,"nodeType":"ExpressionStatement","src":"4451:59:188"}]}},{"condition":{"commonType":{"typeIdentifier":"t_enum$_RuleType_$34464","typeString":"enum IRulesEngine.RuleType"},"id":44051,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":44047,"name":"_rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43972,"src":"4802:5:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}},"id":44048,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4808:8:188","memberName":"ruleType","nodeType":"MemberAccess","referencedDeclaration":34502,"src":"4802:14:188","typeDescriptions":{"typeIdentifier":"t_enum$_RuleType_$34464","typeString":"enum IRulesEngine.RuleType"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"expression":{"id":44049,"name":"RuleType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34464,"src":"4820:8:188","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_RuleType_$34464_$","typeString":"type(enum IRulesEngine.RuleType)"}},"id":44050,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"4829:9:188","memberName":"Threshold","nodeType":"MemberAccess","referencedDeclaration":34462,"src":"4820:18:188","typeDescriptions":{"typeIdentifier":"t_enum$_RuleType_$34464","typeString":"enum IRulesEngine.RuleType"}},"src":"4802:36:188","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"condition":{"commonType":{"typeIdentifier":"t_enum$_RuleType_$34464","typeString":"enum IRulesEngine.RuleType"},"id":44068,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":44064,"name":"_rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43972,"src":"4956:5:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}},"id":44065,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4962:8:188","memberName":"ruleType","nodeType":"MemberAccess","referencedDeclaration":34502,"src":"4956:14:188","typeDescriptions":{"typeIdentifier":"t_enum$_RuleType_$34464","typeString":"enum IRulesEngine.RuleType"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"expression":{"id":44066,"name":"RuleType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34464,"src":"4974:8:188","typeDescriptions":{"typeIdentifier":"t_type$_t_enum$_RuleType_$34464_$","typeString":"type(enum IRulesEngine.RuleType)"}},"id":44067,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"4983:14:188","memberName":"Multiplicative","nodeType":"MemberAccess","referencedDeclaration":34463,"src":"4974:23:188","typeDescriptions":{"typeIdentifier":"t_enum$_RuleType_$34464","typeString":"enum IRulesEngine.RuleType"}},"src":"4956:41:188","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":44077,"nodeType":"IfStatement","src":"4952:101:188","trueBody":{"id":44076,"nodeType":"Block","src":"4999:54:188","statements":[{"expression":{"id":44074,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":44069,"name":"score","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43975,"src":"5013:5:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44073,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44070,"name":"balance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43978,"src":"5021:7:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"expression":{"id":44071,"name":"_rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43972,"src":"5031:5:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}},"id":44072,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5037:5:188","memberName":"score","nodeType":"MemberAccess","referencedDeclaration":34499,"src":"5031:11:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5021:21:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5013:29:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44075,"nodeType":"ExpressionStatement","src":"5013:29:188"}]}},"id":44078,"nodeType":"IfStatement","src":"4798:255:188","trueBody":{"id":44063,"nodeType":"Block","src":"4840:106:188","statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":44055,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":44052,"name":"balance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43978,"src":"4858:7:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">=","rightExpression":{"expression":{"id":44053,"name":"_rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43972,"src":"4869:5:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}},"id":44054,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4875:7:188","memberName":"balance","nodeType":"MemberAccess","referencedDeclaration":34497,"src":"4869:13:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4858:24:188","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":44062,"nodeType":"IfStatement","src":"4854:82:188","trueBody":{"id":44061,"nodeType":"Block","src":"4884:52:188","statements":[{"expression":{"id":44059,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":44056,"name":"score","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43975,"src":"4902:5:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"expression":{"id":44057,"name":"_rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43972,"src":"4910:5:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}},"id":44058,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"4916:5:188","memberName":"score","nodeType":"MemberAccess","referencedDeclaration":34499,"src":"4910:11:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4902:19:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":44060,"nodeType":"ExpressionStatement","src":"4902:19:188"}]}}]}}]},"implemented":true,"kind":"function","modifiers":[],"name":"_getScoreForRule","nameLocation":"4097:16:188","parameters":{"id":43973,"nodeType":"ParameterList","parameters":[{"constant":false,"id":43969,"mutability":"mutable","name":"_tokenOwner","nameLocation":"4122:11:188","nodeType":"VariableDeclaration","scope":44080,"src":"4114:19:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":43968,"name":"address","nodeType":"ElementaryTypeName","src":"4114:7:188","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":43972,"mutability":"mutable","name":"_rule","nameLocation":"4153:5:188","nodeType":"VariableDeclaration","scope":44080,"src":"4135:23:188","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId"},"typeName":{"id":43971,"nodeType":"UserDefinedTypeName","pathNode":{"id":43970,"name":"RuleWithId","nameLocations":["4135:10:188"],"nodeType":"IdentifierPath","referencedDeclaration":34503,"src":"4135:10:188"},"referencedDeclaration":34503,"src":"4135:10:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_storage_ptr","typeString":"struct IRulesEngine.RuleWithId"}},"visibility":"internal"}],"src":"4113:46:188"},"returnParameters":{"id":43976,"nodeType":"ParameterList","parameters":[{"constant":false,"id":43975,"mutability":"mutable","name":"score","nameLocation":"4191:5:188","nodeType":"VariableDeclaration","scope":44080,"src":"4183:13:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":43974,"name":"uint256","nodeType":"ElementaryTypeName","src":"4183:7:188","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"4182:15:188"},"scope":44186,"stateMutability":"view","virtual":false,"visibility":"internal"},{"id":44113,"nodeType":"FunctionDefinition","src":"5065:266:188","nodes":[],"body":{"id":44112,"nodeType":"Block","src":"5120:211:188","nodes":[],"statements":[{"expression":{"arguments":[{"arguments":[{"expression":{"id":44091,"name":"_rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44083,"src":"5168:5:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}},"id":44092,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5174:6:188","memberName":"ruleId","nodeType":"MemberAccess","referencedDeclaration":34488,"src":"5168:12:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"expression":{"arguments":[],"expression":{"argumentTypes":[],"id":44087,"name":"_rulesEngineStorage","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44175,"src":"5138:19:188","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$__$returns$_t_struct$_Data_$43684_storage_ptr_$","typeString":"function () pure returns (struct RulesEngineStorage.Data storage pointer)"}},"id":44088,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5138:21:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_struct$_Data_$43684_storage_ptr","typeString":"struct RulesEngineStorage.Data storage pointer"}},"id":44089,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5160:3:188","memberName":"ids","nodeType":"MemberAccess","referencedDeclaration":43678,"src":"5138:25:188","typeDescriptions":{"typeIdentifier":"t_struct$_Bytes32Set_$52134_storage","typeString":"struct EnumerableSet.Bytes32Set storage ref"}},"id":44090,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5164:3:188","memberName":"add","nodeType":"MemberAccess","referencedDeclaration":52152,"src":"5138:29:188","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_struct$_Bytes32Set_$52134_storage_ptr_$_t_bytes32_$returns$_t_bool_$attached_to$_t_struct$_Bytes32Set_$52134_storage_ptr_$","typeString":"function (struct EnumerableSet.Bytes32Set storage pointer,bytes32) returns (bool)"}},"id":44093,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5138:43:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"52756c6573456e67696e653a2072756c6520616c726561647920657869737473","id":44094,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"5183:34:188","typeDescriptions":{"typeIdentifier":"t_stringliteral_9b28329e5988c6913a805257a97be0355648c8002d2382083694b6ef9411bd14","typeString":"literal_string \"RulesEngine: rule already exists\""},"value":"RulesEngine: rule already exists"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_9b28329e5988c6913a805257a97be0355648c8002d2382083694b6ef9411bd14","typeString":"literal_string \"RulesEngine: rule already exists\""}],"id":44086,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"5130:7:188","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":44095,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5130:88:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":44096,"nodeType":"ExpressionStatement","src":"5130:88:188"},{"expression":{"id":44104,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"expression":{"arguments":[],"expression":{"argumentTypes":[],"id":44097,"name":"_rulesEngineStorage","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44175,"src":"5228:19:188","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$__$returns$_t_struct$_Data_$43684_storage_ptr_$","typeString":"function () pure returns (struct RulesEngineStorage.Data storage pointer)"}},"id":44098,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5228:21:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_struct$_Data_$43684_storage_ptr","typeString":"struct RulesEngineStorage.Data storage pointer"}},"id":44099,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5250:5:188","memberName":"rules","nodeType":"MemberAccess","referencedDeclaration":43683,"src":"5228:27:188","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_struct$_RuleWithId_$34503_storage_$","typeString":"mapping(bytes32 => struct IRulesEngine.RuleWithId storage ref)"}},"id":44102,"indexExpression":{"expression":{"id":44100,"name":"_rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44083,"src":"5256:5:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}},"id":44101,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5262:6:188","memberName":"ruleId","nodeType":"MemberAccess","referencedDeclaration":34488,"src":"5256:12:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"5228:41:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_storage","typeString":"struct IRulesEngine.RuleWithId storage ref"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":44103,"name":"_rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44083,"src":"5272:5:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}},"src":"5228:49:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_storage","typeString":"struct IRulesEngine.RuleWithId storage ref"}},"id":44105,"nodeType":"ExpressionStatement","src":"5228:49:188"},{"eventCall":{"arguments":[{"expression":{"id":44107,"name":"_rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44083,"src":"5304:5:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}},"id":44108,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5310:6:188","memberName":"ruleId","nodeType":"MemberAccess","referencedDeclaration":34488,"src":"5304:12:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"id":44109,"name":"_rule","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44083,"src":"5318:5:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId memory"}],"id":44106,"name":"RuleCreated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34510,"src":"5292:11:188","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_bytes32_$_t_struct$_RuleWithId_$34503_memory_ptr_$returns$__$","typeString":"function (bytes32,struct IRulesEngine.RuleWithId memory)"}},"id":44110,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5292:32:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":44111,"nodeType":"EmitStatement","src":"5287:37:188"}]},"implemented":true,"kind":"function","modifiers":[],"name":"_createRule","nameLocation":"5074:11:188","parameters":{"id":44084,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44083,"mutability":"mutable","name":"_rule","nameLocation":"5104:5:188","nodeType":"VariableDeclaration","scope":44113,"src":"5086:23:188","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_memory_ptr","typeString":"struct IRulesEngine.RuleWithId"},"typeName":{"id":44082,"nodeType":"UserDefinedTypeName","pathNode":{"id":44081,"name":"RuleWithId","nameLocations":["5086:10:188"],"nodeType":"IdentifierPath","referencedDeclaration":34503,"src":"5086:10:188"},"referencedDeclaration":34503,"src":"5086:10:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_storage_ptr","typeString":"struct IRulesEngine.RuleWithId"}},"visibility":"internal"}],"src":"5085:25:188"},"returnParameters":{"id":44085,"nodeType":"ParameterList","parameters":[],"src":"5120:0:188"},"scope":44186,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":44140,"nodeType":"FunctionDefinition","src":"5337:238:188","nodes":[],"body":{"id":44139,"nodeType":"Block","src":"5384:191:188","nodes":[],"statements":[{"expression":{"arguments":[{"arguments":[{"id":44123,"name":"_ruleId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44115,"src":"5435:7:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"expression":{"arguments":[],"expression":{"argumentTypes":[],"id":44119,"name":"_rulesEngineStorage","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44175,"src":"5402:19:188","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$__$returns$_t_struct$_Data_$43684_storage_ptr_$","typeString":"function () pure returns (struct RulesEngineStorage.Data storage pointer)"}},"id":44120,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5402:21:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_struct$_Data_$43684_storage_ptr","typeString":"struct RulesEngineStorage.Data storage pointer"}},"id":44121,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5424:3:188","memberName":"ids","nodeType":"MemberAccess","referencedDeclaration":43678,"src":"5402:25:188","typeDescriptions":{"typeIdentifier":"t_struct$_Bytes32Set_$52134_storage","typeString":"struct EnumerableSet.Bytes32Set storage ref"}},"id":44122,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5428:6:188","memberName":"remove","nodeType":"MemberAccess","referencedDeclaration":52170,"src":"5402:32:188","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_struct$_Bytes32Set_$52134_storage_ptr_$_t_bytes32_$returns$_t_bool_$attached_to$_t_struct$_Bytes32Set_$52134_storage_ptr_$","typeString":"function (struct EnumerableSet.Bytes32Set storage pointer,bytes32) returns (bool)"}},"id":44124,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5402:41:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"52756c6573456e67696e653a2072756c6520616c726561647920657869737473","id":44125,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"5445:34:188","typeDescriptions":{"typeIdentifier":"t_stringliteral_9b28329e5988c6913a805257a97be0355648c8002d2382083694b6ef9411bd14","typeString":"literal_string \"RulesEngine: rule already exists\""},"value":"RulesEngine: rule already exists"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_9b28329e5988c6913a805257a97be0355648c8002d2382083694b6ef9411bd14","typeString":"literal_string \"RulesEngine: rule already exists\""}],"id":44118,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"5394:7:188","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":44126,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5394:86:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":44127,"nodeType":"ExpressionStatement","src":"5394:86:188"},{"expression":{"id":44133,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"delete","prefix":true,"src":"5490:43:188","subExpression":{"baseExpression":{"expression":{"arguments":[],"expression":{"argumentTypes":[],"id":44128,"name":"_rulesEngineStorage","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44175,"src":"5497:19:188","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$__$returns$_t_struct$_Data_$43684_storage_ptr_$","typeString":"function () pure returns (struct RulesEngineStorage.Data storage pointer)"}},"id":44129,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5497:21:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_struct$_Data_$43684_storage_ptr","typeString":"struct RulesEngineStorage.Data storage pointer"}},"id":44130,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"memberLocation":"5519:5:188","memberName":"rules","nodeType":"MemberAccess","referencedDeclaration":43683,"src":"5497:27:188","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_struct$_RuleWithId_$34503_storage_$","typeString":"mapping(bytes32 => struct IRulesEngine.RuleWithId storage ref)"}},"id":44132,"indexExpression":{"id":44131,"name":"_ruleId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44115,"src":"5525:7:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"5497:36:188","typeDescriptions":{"typeIdentifier":"t_struct$_RuleWithId_$34503_storage","typeString":"struct IRulesEngine.RuleWithId storage ref"}},"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":44134,"nodeType":"ExpressionStatement","src":"5490:43:188"},{"eventCall":{"arguments":[{"id":44136,"name":"_ruleId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44115,"src":"5560:7:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":44135,"name":"RuleDeleted","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34514,"src":"5548:11:188","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_bytes32_$returns$__$","typeString":"function (bytes32)"}},"id":44137,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5548:20:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":44138,"nodeType":"EmitStatement","src":"5543:25:188"}]},"implemented":true,"kind":"function","modifiers":[],"name":"_deleteRule","nameLocation":"5346:11:188","parameters":{"id":44116,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44115,"mutability":"mutable","name":"_ruleId","nameLocation":"5366:7:188","nodeType":"VariableDeclaration","scope":44140,"src":"5358:15:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":44114,"name":"bytes32","nodeType":"ElementaryTypeName","src":"5358:7:188","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"}],"src":"5357:17:188"},"returnParameters":{"id":44117,"nodeType":"ParameterList","parameters":[],"src":"5384:0:188"},"scope":44186,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":44162,"nodeType":"FunctionDefinition","src":"5581:296:188","nodes":[],"body":{"id":44161,"nodeType":"Block","src":"5651:226:188","nodes":[],"statements":[{"expression":{"arguments":[{"arguments":[],"expression":{"argumentTypes":[],"id":44146,"name":"_canOverrideRulesEngine","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44185,"src":"5669:23:188","typeDescriptions":{"typeIdentifier":"t_function_internal_view$__$returns$_t_bool_$","typeString":"function () view returns (bool)"}},"id":44147,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5669:25:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"52756c6573456e67696e653a2063616e6e6f74206f766572726964652072756c657320656e67696e65","id":44148,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"5696:43:188","typeDescriptions":{"typeIdentifier":"t_stringliteral_05e35faf48f00bcaa1fcfe70dcfefd6247a76166f6866862b975bfcdaf7895c1","typeString":"literal_string \"RulesEngine: cannot override rules engine\""},"value":"RulesEngine: cannot override rules engine"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_05e35faf48f00bcaa1fcfe70dcfefd6247a76166f6866862b975bfcdaf7895c1","typeString":"literal_string \"RulesEngine: cannot override rules engine\""}],"id":44145,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"5661:7:188","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":44149,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5661:79:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":44150,"nodeType":"ExpressionStatement","src":"5661:79:188"},{"expression":{"id":44155,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"arguments":[],"expression":{"argumentTypes":[],"id":44151,"name":"_rulesEngineStorage","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44175,"src":"5750:19:188","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$__$returns$_t_struct$_Data_$43684_storage_ptr_$","typeString":"function () pure returns (struct RulesEngineStorage.Data storage pointer)"}},"id":44152,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5750:21:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_struct$_Data_$43684_storage_ptr","typeString":"struct RulesEngineStorage.Data storage pointer"}},"id":44153,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"5772:19:188","memberName":"rulesEngineOverride","nodeType":"MemberAccess","referencedDeclaration":43675,"src":"5750:41:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":44154,"name":"_rulesEngineAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44142,"src":"5794:19:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"5750:63:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":44156,"nodeType":"ExpressionStatement","src":"5750:63:188"},{"eventCall":{"arguments":[{"id":44158,"name":"_rulesEngineAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44142,"src":"5850:19:188","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":44157,"name":"RulesEngineOverriden","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":34518,"src":"5829:20:188","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$returns$__$","typeString":"function (address)"}},"id":44159,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5829:41:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":44160,"nodeType":"EmitStatement","src":"5824:46:188"}]},"baseFunctions":[34563],"functionSelector":"0eb0adb6","implemented":true,"kind":"function","modifiers":[],"name":"setRulesEngineOverride","nameLocation":"5590:22:188","parameters":{"id":44143,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44142,"mutability":"mutable","name":"_rulesEngineAddress","nameLocation":"5621:19:188","nodeType":"VariableDeclaration","scope":44162,"src":"5613:27:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":44141,"name":"address","nodeType":"ElementaryTypeName","src":"5613:7:188","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"5612:29:188"},"returnParameters":{"id":44144,"nodeType":"ParameterList","parameters":[],"src":"5651:0:188"},"scope":44186,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":44175,"nodeType":"FunctionDefinition","src":"5883:141:188","nodes":[],"body":{"id":44174,"nodeType":"Block","src":"5975:49:188","nodes":[],"statements":[{"expression":{"id":44172,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":44168,"name":"data","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44166,"src":"5985:4:188","typeDescriptions":{"typeIdentifier":"t_struct$_Data_$43684_storage_ptr","typeString":"struct RulesEngineStorage.Data storage pointer"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":44169,"name":"RulesEngineStorage","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43697,"src":"5992:18:188","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_RulesEngineStorage_$43697_$","typeString":"type(library RulesEngineStorage)"}},"id":44170,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6011:4:188","memberName":"data","nodeType":"MemberAccess","referencedDeclaration":43696,"src":"5992:23:188","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$__$returns$_t_struct$_Data_$43684_storage_ptr_$","typeString":"function () pure returns (struct RulesEngineStorage.Data storage pointer)"}},"id":44171,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5992:25:188","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_struct$_Data_$43684_storage_ptr","typeString":"struct RulesEngineStorage.Data storage pointer"}},"src":"5985:32:188","typeDescriptions":{"typeIdentifier":"t_struct$_Data_$43684_storage_ptr","typeString":"struct RulesEngineStorage.Data storage pointer"}},"id":44173,"nodeType":"ExpressionStatement","src":"5985:32:188"}]},"implemented":true,"kind":"function","modifiers":[],"name":"_rulesEngineStorage","nameLocation":"5892:19:188","parameters":{"id":44163,"nodeType":"ParameterList","parameters":[],"src":"5911:2:188"},"returnParameters":{"id":44167,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44166,"mutability":"mutable","name":"data","nameLocation":"5969:4:188","nodeType":"VariableDeclaration","scope":44175,"src":"5937:36:188","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_struct$_Data_$43684_storage_ptr","typeString":"struct RulesEngineStorage.Data"},"typeName":{"id":44165,"nodeType":"UserDefinedTypeName","pathNode":{"id":44164,"name":"RulesEngineStorage.Data","nameLocations":["5937:18:188","5956:4:188"],"nodeType":"IdentifierPath","referencedDeclaration":43684,"src":"5937:23:188"},"referencedDeclaration":43684,"src":"5937:23:188","typeDescriptions":{"typeIdentifier":"t_struct$_Data_$43684_storage_ptr","typeString":"struct RulesEngineStorage.Data"}},"visibility":"internal"}],"src":"5936:38:188"},"scope":44186,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":44180,"nodeType":"FunctionDefinition","src":"6030:61:188","nodes":[],"implemented":false,"kind":"function","modifiers":[],"name":"_canSetRules","nameLocation":"6039:12:188","parameters":{"id":44176,"nodeType":"ParameterList","parameters":[],"src":"6051:2:188"},"returnParameters":{"id":44179,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44178,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":44180,"src":"6085:4:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":44177,"name":"bool","nodeType":"ElementaryTypeName","src":"6085:4:188","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"6084:6:188"},"scope":44186,"stateMutability":"view","virtual":true,"visibility":"internal"},{"id":44185,"nodeType":"FunctionDefinition","src":"6097:72:188","nodes":[],"implemented":false,"kind":"function","modifiers":[],"name":"_canOverrideRulesEngine","nameLocation":"6106:23:188","parameters":{"id":44181,"nodeType":"ParameterList","parameters":[],"src":"6129:2:188"},"returnParameters":{"id":44184,"nodeType":"ParameterList","parameters":[{"constant":false,"id":44183,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":44185,"src":"6163:4:188","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":44182,"name":"bool","nodeType":"ElementaryTypeName","src":"6163:4:188","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"6162:6:188"},"scope":44186,"stateMutability":"view","virtual":true,"visibility":"internal"}],"abstract":true,"baseContracts":[{"baseName":{"id":43698,"name":"IRulesEngine","nameLocations":["1105:12:188"],"nodeType":"IdentifierPath","referencedDeclaration":34564,"src":"1105:12:188"},"id":43699,"nodeType":"InheritanceSpecifier","src":"1105:12:188"}],"canonicalName":"RulesEngine","contractDependencies":[],"contractKind":"contract","fullyImplemented":false,"linearizedBaseContracts":[44186,34564],"name":"RulesEngine","nameLocation":"1090:11:188","scope":44187,"usedErrors":[],"usedEvents":[34510,34514,34518]}],"license":"Apache-2.0"},"id":188}