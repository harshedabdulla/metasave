import { Address } from "abitype/zod";
import z from "zod";
import { createPublicErc4337ClientSchema } from "../client/schema.js";
import { BigNumberishRangeSchema, ChainSchema, PercentageSchema, } from "../utils/index.js";
export const ConnectionConfigSchema = z.union([
    z.object({
        rpcUrl: z.never().optional(),
        apiKey: z.string(),
        jwt: z.never().optional(),
    }),
    z.object({
        rpcUrl: z.never().optional(),
        apiKey: z.never().optional(),
        jwt: z.string(),
    }),
    z.object({
        rpcUrl: z.string(),
        apiKey: z.never().optional(),
        jwt: z.never().optional(),
    }),
    z.object({
        rpcUrl: z.string(),
        apiKey: z.never().optional(),
        jwt: z.string(),
    }),
]);
export const UserOperationFeeOptionsFieldSchema = BigNumberishRangeSchema.merge(PercentageSchema).partial();
export const UserOperationFeeOptionsSchema = z
    .object({
    maxFeePerGas: UserOperationFeeOptionsFieldSchema,
    maxPriorityFeePerGas: UserOperationFeeOptionsFieldSchema,
    callGasLimit: UserOperationFeeOptionsFieldSchema,
    verificationGasLimit: UserOperationFeeOptionsFieldSchema,
    preVerificationGas: UserOperationFeeOptionsFieldSchema,
})
    .partial()
    .strict();
export const SmartAccountProviderOptsSchema = z
    .object({
    txMaxRetries: z.number().min(0).optional().default(5),
    txRetryIntervalMs: z.number().min(0).optional().default(2000),
    txRetryMulitplier: z.number().min(0).optional().default(1.5),
    feeOptions: UserOperationFeeOptionsSchema.optional(),
})
    .strict();
export const createSmartAccountProviderConfigSchema = () => {
    return z.object({
        rpcProvider: z.union([
            z.string(),
            createPublicErc4337ClientSchema(),
        ]),
        chain: ChainSchema,
        entryPointAddress: Address.optional(),
        opts: SmartAccountProviderOptsSchema.optional().default(SmartAccountProviderOptsSchema.parse({})),
    });
};
//# sourceMappingURL=schema.js.map