"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.applyUserOpOverrideOrFeeOption = exports.applyUserOpFeeOption = exports.applyUserOpOverride = exports.isValidRequest = void 0;
const bigint_js_1 = require("./bigint.js");
const index_js_1 = require("./index.js");
function isValidRequest(request) {
    return (!!request.callGasLimit &&
        !!request.maxFeePerGas &&
        request.maxPriorityFeePerGas != null &&
        !!request.preVerificationGas &&
        !!request.verificationGasLimit);
}
exports.isValidRequest = isValidRequest;
function applyUserOpOverride(value, override) {
    if (override == null) {
        return value;
    }
    if ((0, index_js_1.isBigNumberish)(override)) {
        return override;
    }
    else {
        return value != null
            ? (0, bigint_js_1.bigIntPercent)(value, BigInt(100 + override.percentage))
            : value;
    }
}
exports.applyUserOpOverride = applyUserOpOverride;
function applyUserOpFeeOption(value, feeOption) {
    if (feeOption == null) {
        return value ?? 0n;
    }
    return value != null
        ? (0, bigint_js_1.bigIntClamp)(feeOption.percentage
            ? (0, bigint_js_1.bigIntPercent)(value, BigInt(100 + feeOption.percentage))
            : value, feeOption.min, feeOption.max)
        : feeOption.min ?? 0n;
}
exports.applyUserOpFeeOption = applyUserOpFeeOption;
function applyUserOpOverrideOrFeeOption(value, override, feeOption) {
    return value != null && override != null
        ? applyUserOpOverride(value, override)
        : applyUserOpFeeOption(value, feeOption);
}
exports.applyUserOpOverrideOrFeeOption = applyUserOpOverrideOrFeeOption;
//# sourceMappingURL=userop.js.map